<!DOCTYPE html>
<html style="height: 100%;"><head>
	<title>A Simple - Yet Quite Powerful - Palette Quantizer in C# - CodeProject</title> 
	<link type="text/css" rel="stylesheet" href="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/Main.css">
<link type="text/css" rel="stylesheet" href="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/no-media-query.css">

	
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="Description" content="A palette quantizer based on human perception; Author: Smart K8; Updated: 28 Jul 2012; Section: Algorithms &amp; Recipes; Chapter: General Programming; Updated: 28 Jul 2012">
<meta name="Keywords" content="C#3.0, .NET3.5, VS2008, C#, Windows, .NET, Visual-Studio, Dev, Beginner, Intermediate,Algorithms &amp; Recipes,General Programming,Free source code, tutorials">
<meta name="Author" content="Smart K8">
<meta name="Rating" content="General">
<meta name="Revisit-After" content="1 days">
<meta name="application-name" content="CodeProject">
<meta name="google-translate-customization" content="d908bb7ce7aff658-4c2f3a504525c916-g629383f736781a8a-13">

<link rel="dns-prefetch" href="http://ajax.googleapis.com/"> 



<link rel="alternate" type="application/rss+xml" title="CodeProject Latest articles - All Topics" href="http://www.codeproject.com/WebServices/ArticleRSS.aspx?cat=1">
<link rel="alternate" type="application/rss+xml" title="CodeProject Latest articles - Android" href="http://www.codeproject.com/WebServices/ArticleRSS.aspx?cat=22">
<link rel="alternate" type="application/rss+xml" title="CodeProject Latest articles - iOS" href="http://www.codeproject.com/WebServices/ArticleRSS.aspx?cat=25">
<link rel="alternate" type="application/rss+xml" title="CodeProject Latest articles - C++" href="http://www.codeproject.com/WebServices/ArticleRSS.aspx?cat=2">
<link rel="alternate" type="application/rss+xml" title="CodeProject Latest articles - C#" href="http://www.codeproject.com/WebServices/ArticleRSS.aspx?cat=3">
<link rel="alternate" type="application/rss+xml" title="CodeProject Latest articles - Web" href="http://www.codeproject.com/WebServices/ArticleRSS.aspx?cat=23">
<link rel="alternate" type="application/rss+xml" title="CodeProject Lounge Postings" href="http://www.codeproject.com/webservices/LoungeRSS.aspx">
<meta name="robots" content="index, follow">
<link rel="search" type="application/opensearchdescription+xml" title="CodeProject" href="http://www.codeproject.com/info/OpenSearch.xml">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<!-- base href="http://www.codeproject.com/KB/recipes/SimplePaletteQuantizer.aspx?display=Mobile" -->
	<link rel="icon" href="http://www.codeproject.com/favicon.ico" type="image/ico">
<link rel="shortcut icon" href="http://www.codeproject.com/favicon.ico" type="image/ico">
<link rel="apple-touch-icon" href="http://www.codeproject.com/images/FavIcon-Apple.png" type="image/png">
<script src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/gpt.js" type="text/javascript" async=""></script><script type="text/javascript" language="Javascript">//<![CDATA[
function defrm () { /* thanks twitter */ document.write = ''; window.top.location = window.self.location;  setTimeout(function() { document.body.innerHTML = ''; }, 0);  window.self.onload = function(evt) { document.body.innerHTML = ''; }; }if (window.top !== window.self) {  try {  if (window.top.location.host) { /* will throw */ } else { defrm(); /* chrome */ }  } catch (ex) { defrm(); /* everyone else */ } }if (typeof(DemoUrl)!='undefined')   document.write(unescape('%3Cme')+'ta http'+'-equiv="re'+'fresh"                  con'+'tent="1;url='+DemoUrl+unescape('"%3CE'));
(function() { 
	var _dma = document.createElement('script');
        _dma.type = 'text/javascript';
        _dma.async = true;
        _dma.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'cdn2.developermedia.com/a.min.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(_dma);
})();

//]]>
</script><script src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/a.js" async="" type="text/javascript"></script>

	




<script type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-1735123-1']);
	_gaq.push(['_trackPageview']);
	_gaq.push(['_setDomainName', 'www.codeproject.com']);
	_gaq.push(['_setSessionTimeout', '1200']); 

	(function () {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
	})(); 
</script><script src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/ga.js" async="" type="text/javascript"></script>


<script async="" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/pubads_impl_83.js"></script><iframe style="visibility: hidden; display: none;" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/container.htm"></iframe><link href="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/translateelement.css" charset="UTF-8" rel="stylesheet" type="text/css"><script src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/main.js" charset="UTF-8" type="text/javascript"></script><script src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/element_main.js" charset="UTF-8" type="text/javascript"></script><script>try {  for(var lastpass_iter=0; lastpass_iter < document.forms.length; lastpass_iter++){    var lastpass_f = document.forms[lastpass_iter];    if(typeof(lastpass_f.lpsubmitorig)=="undefined"){      if (typeof(lastpass_f.submit) == "function") {        lastpass_f.lpsubmitorig = lastpass_f.submit;        lastpass_f.submit = function(){          var form = this;          try {            if (document.documentElement && 'createEvent' in document)            {              var forms = document.getElementsByTagName('form');              for (var i=0 ; i<forms.length ; ++i)                if (forms[i]==form)                {                  var element = document.createElement('lpformsubmitdataelement');                  element.setAttribute('formnum',i);                  element.setAttribute('from','submithook');                  document.documentElement.appendChild(element);                  var evt = document.createEvent('Events');                  evt.initEvent('lpformsubmit',true,false);                  element.dispatchEvent(evt);                  break;                }            }          } catch (e) {}          try {            form.lpsubmitorig();          } catch (e) {}        }      }    }  }} catch (e) {}</script><script src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/osd.js" type="text/javascript"></script></head>	

<body style="position: relative; min-height: 100%; top: 0px;" class="firefox firefox0">

<a class="access-link" href="#Main"><img alt="Click here to Skip to main content" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/t.gif"></a>





<div class="page-background">

	
	

	

	
    <div id="ctl00_STM" class="site-top-menu fixed">
        <div class="main-content">
            

<div class="container memberbar clearfix">

	<div id="ctl00_MemberMenu_GenInfo" class="float-left">12.2M <img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/unknown_sm.gif"> (56K on)</div>

	<div class="float-left">
		
	</div>

	<div class="float-right">

		

		<span id="ctl00_MemberMenu_Messages_NotificationDiv" class="tooltip member-message">
	<a id="ctl00_MemberMenu_Messages_NotificationCount" class="notification-count" href="http://www.codeproject.com/script/Membership/MyNotifications.aspx">1</a>

	<div class="tooltip-flyout notification-dropdown">
		
		<div id="ctl00_MemberMenu_Messages_Confirm" class="bold spaced"><a id="ctl00_MemberMenu_Messages_EmailConfirm" href="http://www.codeproject.com/script/Membership/SendConfirmRequest.aspx?rp=%2fKB%2frecipes%2fSimplePaletteQuantizer.aspx%3fdisplay%3dMobile">Your email address needs to be confirmed.</a></div>
		
		<div id="Notifications" class="notification-list">
			<img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/animated_loading.gif" alt="loading" style="margin:auto;">
		</div>
		<div class="spaced">
			
		</div>
	</div>
</span><span id="ctl00_MemberMenu_CurRat" class="tooltip">
				<a id="ctl00_MemberMenu_MyProfile" dir="ltr" class="member-rep-total bronze" href="http://www.codeproject.com/script/Membership/View.aspx?mid=3518136">Sachin Gupta JSR</a><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/arrow-down-16.png" style="width:16px;height:16px;vertical-align:middle">
				<div class="tooltip-flyout" style="width:12em !important;">
					
					<div class="list-item"><a id="ctl00_MemberMenu_MySettingsDefault" href="https://www.codeproject.com/script/Membership/Modify.aspx">My Settings</a></div>
					
					<div class="list-item"><a id="ctl00_MemberMenu_MyBookmarks" href="http://www.codeproject.com/script/Bookmarks/List.aspx?obtid=2">My Bookmarks</a></div>
					<div class="list-item"><a id="ctl00_MemberMenu_MyArticles" href="http://www.codeproject.com/script/Articles/MemberArticles.aspx?amid=3518136">My Articles</a></div>
					<div class="list-item"><a id="ctl00_MemberMenu_MyMessages" href="http://www.codeproject.com/script/Forums/Messages.aspx?fmid=3518136">My Messages</a></div>
					<div class="list-item"><a id="ctl00_MemberMenu_MyQuestions" href="http://www.codeproject.com/script/Answers/MemberPosts.aspx?tab=questions&amp;mid=3518136&amp;showall=True">My Questions</a></div>
					<div class="list-item"><a id="ctl00_MemberMenu_MyAnswers" href="http://www.codeproject.com/script/Answers/MemberPosts.aspx?tab=answers&amp;mid=3518136&amp;showall=True">My Answers</a></div>
					<div class="list-item"><a id="ctl00_MemberMenu_MyComments" href="http://www.codeproject.com/script/comments/MemberComments.aspx?mid=3518136">My Comments</a></div>
					<div class="list-item"><a id="ctl00_MemberMenu_MyContacts" href="http://www.codeproject.com/script/Membership/ListContacts.aspx">My Contact info</a></div>
					
					
					
					
				</div>
			</span>
			&nbsp;
			<a id="ctl00_MemberMenu_Signout" href="http://www.codeproject.com/script/Membership/LogOff.aspx?rp=%2fKB%2frecipes%2fSimplePaletteQuantizer.aspx%3fdisplay%3dMobile">Sign out</a>
			<img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/circle-cross.gif" style="vertical-align:middle;margin-top:-3px;" height="16px" width="16px">
		

		
	</div>
</div>
        </div>
    </div>

	
    <div id="ctl00_SH" class="site-header fixed">
        <div class="main-content">
            <div class="logo"><a href="http://www.codeproject.com/"><img id="ctl00_Logo" tabindex="1" title="CodeProject" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/logo250x135.gif" alt="Home" style="height:135px;width:250px;border-width:0px;"></a></div>
            <div class="promo"><div class="msg-728x90" data-format="728x90" data-type="ad" data-publisher="lqm.codeproject.site" data-zone="General-Programming/Algorithms-Recipes/Algorithms" data-country="IN" data-tags="C#3.0, .NET3.5, VS2008, C#, Windows, .NET, Visual-Studio, Dev, Beginner, Intermediate,rating4.5"><div id="div-gpt-ad-lqm.codeproject.site/general-programming/algorithms-recipes/algorithms-1" style="height: 90px; width: 728px; box-sizing: border-box; border: 0px none; font-size: 0px;"><div style="border: 0pt none;" id="google_ads_iframe_/6839/lqm.codeproject.site/general-programming/algorithms-recipes/algorithms_0__container__"><iframe src="javascript:&quot;<html><body style='background:transparent'></body></html>&quot;" style="border: 0px none; vertical-align: bottom;" marginheight="0" marginwidth="0" scrolling="no" name="google_ads_iframe_/6839/lqm.codeproject.site/general-programming/algorithms-recipes/algorithms_0" title="3rd party ad content" id="google_ads_iframe_/6839/lqm.codeproject.site/general-programming/algorithms-recipes/algorithms_0" frameborder="0" height="90" width="728"></iframe></div><iframe src="javascript:&quot;<html><body style='background:transparent'></body></html>&quot;" style="border: 0px none; vertical-align: bottom; visibility: hidden; display: none;" marginheight="0" marginwidth="0" scrolling="no" name="google_ads_iframe_/6839/lqm.codeproject.site/general-programming/algorithms-recipes/algorithms_0__hidden__" title="" id="google_ads_iframe_/6839/lqm.codeproject.site/general-programming/algorithms-recipes/algorithms_0__hidden__" frameborder="0" height="0" width="0"></iframe></div></div></div>
        </div>
    </div>

	<a href="#Main"><img alt="Click here to Skip to main content" class="access-link" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/t.gif"></a>

	
	<div id="ctl00_TPR" class="sub-headerbar clearfix fixed">
    <div class="float-right">
		

<div class="searchbar">

<form method="get" action="/search.aspx?sbo=kw" name="Search" class="tight">


<table class="search" border="0" cellpadding="0" cellspacing="0"><tbody><tr><td><input tabindex="2" class="search  subdue" id="sb_tb" value="Search for articles, questions, tips" name="q"></td><td><input src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/search.gif" type="image"></td></tr></tbody></table>

<div class="hover-container">
	<div style="display: none;" id="SearchFilter" class="search-advanced small-text align-left">
	<b>Search within:<br></b>
		
		<input id="sb_kw" name="sbo" value="kw" checked="checked" type="radio"><label for="sb_kw">Articles</label><br>
<input id="sb_qa" name="sbo" value="qa" type="radio"><label for="sb_qa">Quick Answers</label><br>
<input id="sb_fm" name="sbo" value="fm" type="radio"><label for="sb_fm">Messages</label><br>


		
		

		
		
	</div>
</div>
</form>

</div>
    </div>
    <div class="float-left">
		

<div class="navbar clearfix">
<ul class="navmenu openable">

<li class="desktop-only"><a id="ctl00_TopNavBar_Home" href="http://www.codeproject.com/">home</a>


</li><li class=""><a id="ctl00_TopNavBar_Art" class="down selected" href="http://www.codeproject.com/script/Articles/Latest.aspx">articles</a>

	<ul>
		<li class=""><a id="ctl00_TopNavBar_ArtTopicList" class="fly" onmouseover="navBarMenu.ShowMap(this, 'ctl00_TopNavBar_MapFlyout');" href="http://www.codeproject.com/script/Content/SiteMap.aspx">Chapters and Sections<span class="has-submenu">&gt;</span></a><ul id="ctl00_TopNavBar_MapFlyout">
			<li>
				<div id="siteMap">
					<img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/animated.gif" alt="loading" style="margin:150px;width:100px;height:100px;">
				</div>
			</li>
			</ul>
		</li>
		<li><a id="ctl00_TopNavBar_ArtSearch" class="fly break" href="http://www.codeproject.com/search.aspx?sbo=kw">Search</a></li>
		<li><a id="ctl00_TopNavBar_ArtLatestArts" class="fly" href="http://www.codeproject.com/script/Articles/Latest.aspx?at=1,3,7">Latest Articles</a></li>
		<li><a id="ctl00_TopNavBar_ArtLatestTips" class="fly" href="http://www.codeproject.com/script/Articles/Latest.aspx?at=6">Latest Tips/Tricks</a></li>
		<li><a id="ctl00_TopNavBar_ArtTop" class="fly" href="http://www.codeproject.com/script/Articles/TopArticles.aspx?ta_so=5">Top Articles</a></li>
		<li><a id="ctl00_TopNavBar_ArtBeginner" class="fly" href="http://www.codeproject.com/search.aspx?sbo=kw?aidlst=152&amp;sa_us=True">Beginner Articles</a></li>
		<li><a id="ctl00_TopNavBar_ArtBlogArticles" class="fly break" href="http://www.codeproject.com/script/Articles/BlogArticleList.aspx">Technical Blogs</a></li>
		<li><a id="ctl00_TopNavBar_ArtGuide" class="fly" href="http://www.codeproject.com/info/Submit.aspx">Posting/Update Guidelines</a></li>
		<li><a id="ctl00_TopNavBar_ArtHelpForum" class="fly" href="http://www.codeproject.com/Forums/1641/Article-Writing.aspx">Article Help Forum</a></li>
		<li><a id="ctl00_TopNavBar_ArtCompetition" class="fly break" href="http://www.codeproject.com/script/Awards/CurrentCompetitions.aspx?cmpTpId=1">Article Competition</a></li>
		<li><a id="ctl00_TopNavBar_ArtPostArticle" class="fly highlight1" href="http://www.codeproject.com/script/Articles/Submit.aspx">
			<img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/write13.png" height="13px" width="13px"> Submit an article or tip
			</a></li>
		<li><a id="ctl00_TopNavBar_ArtPostBlog" class="fly highlight2" href="http://www.codeproject.com/script/Articles/BlogFeed.aspx">
			<img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/write13.png" height="13px" width="13px"> Post your Blog
			</a></li>		<li class="last"></li>
	</ul>

</li>



<li class="">
<a id="ctl00_TopNavBar_Answers" href="http://www.codeproject.com/script/Answers/List.aspx?tab=active">
    <span class="desktop-only tablet-only">quick answers</span><span class="mobile-only">Q&amp;A</span>
</a>
	<ul>
		<li id="ctl00_TopNavBar_AQL"><a id="ctl00_TopNavBar_ArticleQuestion" class="fly highlight1" href="#_comments">
			<img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/write13.png" height="13px" width="13px"> Ask a Question about this 
			article</a>
		</li>

		<li><a id="ctl00_TopNavBar_QAAsk" class="fly highlight2" href="http://www.codeproject.com/Questions/ask.aspx"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/write13.png" height="13px" width="13px"> Ask a Question</a></li>

		
		<li><a id="ctl00_TopNavBar_QAUnanswered" class="fly" href="http://www.codeproject.com/script/Answers/List.aspx?tab=unanswered">View Unanswered Questions</a></li>
		<li><a id="ctl00_TopNavBar_QALatest" class="fly" href="http://www.codeproject.com/script/Answers/List.aspx?tab=active">View All Questions...</a></li>
		
				<li><a id="ctl00_TopNavBar_QATR_ctl00_Tag" class="fly" href="http://www.codeproject.com/script/Answers/List.aspx?tab=active&amp;alltags=true&amp;tags=120" style="padding-left:30px">Linux questions</a></li>
			
				<li><a id="ctl00_TopNavBar_QATR_ctl01_Tag" class="fly" href="http://www.codeproject.com/script/Answers/List.aspx?tab=active&amp;alltags=true&amp;tags=81" style="padding-left:30px">C# questions</a></li>
			
				<li><a id="ctl00_TopNavBar_QATR_ctl02_Tag" class="fly" href="http://www.codeproject.com/script/Answers/List.aspx?tab=active&amp;alltags=true&amp;tags=85" style="padding-left:30px">ASP.NET questions</a></li>
			
				<li><a id="ctl00_TopNavBar_QATR_ctl03_Tag" class="fly" href="http://www.codeproject.com/script/Answers/List.aspx?tab=active&amp;alltags=true&amp;tags=93" style="padding-left:30px">SQL questions</a></li>
			
				<li><a id="ctl00_TopNavBar_QATR_ctl04_Tag" class="fly" href="http://www.codeproject.com/script/Answers/List.aspx?tab=active&amp;alltags=true&amp;tags=842" style="padding-left:30px">VB.NET questions</a></li>
			
		<li class="last"></li>
	</ul>

</li>



<li class=""><a id="ctl00_TopNavBar_Forums" href="http://www.codeproject.com/script/Forums/List.aspx">
        <span class="desktop-only tablet-only">discussions</span><span class="mobile-only">forums</span>
</a>

	<ul>
		<li><a id="ctl00_TopNavBar_MessageBoardsAll" class="fly" href="http://www.codeproject.com/script/Forums/List.aspx">All Message Boards...</a></li>
		<li class=""><a class="fly" style="padding-left:30px" href="http://www.codeproject.com/Forums/1580997/Application-Lifecycle.aspx">Application Lifecycle<span class="has-submenu">&gt;</span></a>
<ul class="openable"><li><a class="fly" href="http://www.codeproject.com/Forums/1533717/Running-a-Business.aspx">Running a Business</a></li>
<li><a class="fly" href="http://www.codeproject.com/Forums/1533716/Sales-Marketing.aspx">Sales / Marketing</a></li>
<li><a class="fly" href="http://www.codeproject.com/Forums/1651/Collaboration-Beta-Testing.aspx">Collaboration / Beta Testing</a></li>
<li><a class="fly" href="http://www.codeproject.com/Forums/3304/Work-Issues.aspx">Work  Issues</a></li>
</ul></li>
<li><a class="fly" style="padding-left:30px" href="http://www.codeproject.com/Forums/369270/Design-and-Architecture.aspx">Design and Architecture</a>
</li>
<li><a class="fly" style="padding-left:30px" href="http://www.codeproject.com/Forums/12076/ASP-NET.aspx">ASP.NET</a>
</li>
<li><a class="fly" style="padding-left:30px" href="http://www.codeproject.com/Forums/1580226/JavaScript.aspx">JavaScript</a>
</li>
<li class=""><a class="fly" style="padding-left:30px" href="http://www.codeproject.com/Forums/1647/C-Cplusplus-MFC.aspx">C / C++ / MFC<span class="has-submenu">&gt;</span></a>
<ul class="openable"><li><a class="fly" href="http://www.codeproject.com/Forums/4486/ATL-WTL-STL.aspx">ATL /  WTL / STL</a></li>
<li><a class="fly" href="http://www.codeproject.com/Forums/3785/Managed-Cplusplus-CLI.aspx">Managed C++/CLI</a></li>
</ul></li>
<li><a class="fly" style="padding-left:30px" href="http://www.codeproject.com/Forums/1649/Csharp.aspx">C#</a>
</li>
<li><a class="fly" style="padding-left:30px" href="http://www.codeproject.com/Forums/1627782/Free-Tools.aspx">Free Tools</a>
</li>
<li><a class="fly" style="padding-left:30px" href="http://www.codeproject.com/Forums/1827460/Objective-C-and-Swift.aspx">Objective-C and Swift</a>
</li>
<li><a class="fly" style="padding-left:30px" href="http://www.codeproject.com/Forums/1725/Database.aspx">Database</a>
</li>
<li class=""><a class="fly" style="padding-left:30px" href="http://www.codeproject.com/Forums/186301/Hardware-Devices.aspx">Hardware &amp; Devices<span class="has-submenu">&gt;</span></a>
<ul class="openable"><li><a class="fly" href="http://www.codeproject.com/Forums/1644/System-Admin.aspx">System Admin</a></li>
</ul></li>
<li><a class="fly" style="padding-left:30px" href="http://www.codeproject.com/Forums/1606152/Hosting-and-Servers.aspx">Hosting and Servers</a>
</li>
<li><a class="fly" style="padding-left:30px" href="http://www.codeproject.com/Forums/1643/Java.aspx">Java</a>
</li>
<li><a class="fly" style="padding-left:30px" href="http://www.codeproject.com/Forums/1650/NET-Framework.aspx">.NET Framework</a>
</li>
<li><a class="fly" style="padding-left:30px" href="http://www.codeproject.com/Forums/1848626/Android.aspx">Android</a>
</li>
<li><a class="fly" style="padding-left:30px" href="http://www.codeproject.com/Forums/1876716/iOS.aspx">iOS</a>
</li>
<li><a class="fly" style="padding-left:30px" href="http://www.codeproject.com/Forums/13695/Mobile.aspx">Mobile</a>
</li>
<li><a class="fly" style="padding-left:30px" href="http://www.codeproject.com/Forums/1540733/SharePoint.aspx">SharePoint</a>
</li>
<li><a class="fly" style="padding-left:30px" href="http://www.codeproject.com/Forums/1004257/Silverlight-WPF.aspx">Silverlight / WPF</a>
</li>
<li><a class="fly" style="padding-left:30px" href="http://www.codeproject.com/Forums/1646/Visual-Basic.aspx">Visual Basic</a>
</li>
<li><a class="fly" style="padding-left:30px" href="http://www.codeproject.com/Forums/1640/Web-Development.aspx">Web Development</a>
</li>
<li><a class="fly" style="padding-left:30px" href="http://www.codeproject.com/suggestions.aspx">Site Bugs / Suggestions</a>
</li>
<li><a class="fly" style="padding-left:30px" href="http://www.codeproject.com/Forums/1652005/Spam-and-Abuse-Watch.aspx">Spam and Abuse Watch</a>
</li>

		<li class="last"></li>
	</ul>

</li>

<li class="desktop-only"><a id="ctl00_TopNavBar_Features" href="http://www.codeproject.com/Feature/">features</a>

	<ul>
		<li><a id="ctl00_TopNavBar_Comps" class="fly" href="http://www.codeproject.com/script/Awards/CurrentCompetitions.aspx?cmpTpId=1&amp;awsac=true">Competitions</a></li>
		<li><a id="ctl00_TopNavBar_News" class="fly" href="http://www.codeproject.com/script/News/List.aspx">News</a></li>
		<li><a id="ctl00_TopNavBar_Insider" class="fly" href="http://www.codeproject.com/Feature/Insider/">The Insider Newsletter</a></li>
    	<li><a id="ctl00_TopNavBar_DailyBuild" class="fly" href="http://www.codeproject.com/Feature/DailyBuild">The Daily Build Newsletter</a></li>
		<li><a id="ctl00_TopNavBar_Newsletters" class="fly" href="http://www.codeproject.com/script/Mailouts/Archive.aspx?mtpid=1">Newsletter archive</a></li>
		<li><a id="ctl00_TopNavBar_Surveys" class="fly" href="http://www.codeproject.com/script/Surveys/List.aspx">Surveys</a></li>
		<li><a id="ctl00_TopNavBar_Showcase" class="fly" href="http://www.codeproject.com/KB/showcase/">Product Showcase</a></li>
		<li><a id="ctl00_TopNavBar_Research" class="fly" href="http://www.codeproject.com/script/ResearchLibrary/Index.aspx">Research Library</a></li>

		<li><a id="ctl00_TopNavBar_Stuff" class="fly" href="http://www.codeproject.com/Info/Stuff.aspx">CodeProject Stuff</a></li>
		<li class="last"></li>
	</ul>

</li>


<li class=""><a id="ctl00_TopNavBar_Lounge" href="http://www.codeproject.com/Lounge.aspx">
            <span class="desktop-only tablet-only">community</span><span class="mobile-only">lounge</span>
</a>

	<ul>
		<li><a id="ctl00_TopNavBar_WhosWho" class="fly" href="http://www.codeproject.com/script/Membership/Profiles.aspx">Who's Who</a></li>
		<li><a id="ctl00_TopNavBar_MVPs" class="fly break" href="http://www.codeproject.com/script/Awards/MVPWinners.aspx">Most Valuable Professionals</a></li>
		

		<li><a id="ctl00_TopNavBar_LoungeLnk" class="fly highlight2" href="http://www.codeproject.com/Lounge.aspx">The Lounge &nbsp;</a></li>
		<li><a id="ctl00_TopNavBar_InsiderLnk" class="fly" href="http://www.codeproject.com/Insider.aspx">The Insider News</a></li>
		<li><a id="ctl00_TopNavBar_WeirdWonderful" class="fly" href="http://www.codeproject.com/Feature/WeirdAndWonderful.aspx">The Weird &amp; The Wonderful</a></li>
		<li><a id="ctl00_TopNavBar_SoapBoxLnk" class="fly" href="http://www.codeproject.com/Forums/1536756/The-Soapbox.aspx">The Soapbox</a></li>
		<li><a id="ctl00_TopNavBar_PRLnk" class="fly break" href="http://www.codeproject.com/Forums/1738007/Press-Releases.aspx">Press Releases</a></li>

		
		<li class=""><a class="fly" href="http://www.codeproject.com/Forums/1580229/Hindi.aspx">Non-English Language
			<span class="has-submenu">&gt;</span></a>
		<ul>
		<li><a class="fly" href="http://www.codeproject.com/Forums/1580229/Hindi.aspx">General Indian Topics</a></li>
		<li><a class="fly" href="http://www.codeproject.com/Forums/1580230/Chinese.aspx">General Chinese Topics</a></li>
		</ul>
		</li><li class="last"></li>
		
	</ul>

</li>


<li class="desktop-only tablet-only" style="margin-left:20px"><a id="ctl00_TopNavBar_Help" href="http://www.codeproject.com/KB/FAQs/">help</a>

	<ul>
		<li><a id="ctl00_TopNavBar_HelpWhatIs" class="fly" href="http://www.codeproject.com/info/guide.aspx">What is 'CodeProject'?</a></li>
		<li><a id="ctl00_TopNavBar_HelpGeneral" class="fly break" href="http://www.codeproject.com/KB/FAQs/">General FAQ</a></li>
		<li><a id="ctl00_TopNavBar_HelpPostQuestion" class="fly break highlight2" href="http://www.codeproject.com/Questions/ask.aspx">Ask a Question</a></li>
		<li><a id="ctl00_TopNavBar_HelpBugs" class="fly" href="http://www.codeproject.com/suggestions.aspx">Bugs and Suggestions</a></li>
		<li><a id="ctl00_TopNavBar_HelpArticles" class="fly" href="http://www.codeproject.com/Forums/1641/Article-Writing.aspx">Article Help Forum</a></li>
		<li><a id="ctl00_TopNavBar_HelpSiteMap" class="fly" href="http://www.codeproject.com/script/Content/SiteMap.aspx">Site Map</a></li>
		<li><a id="ctl00_TopNavBar_HelpAdvertise" class="fly" href="http://developermedia.com/">Advertise with us</a></li>
		<li><a id="ctl00_TopNavBar_HelpJobs" class="fly" href="http://www.codeproject.com/info/Jobs/">Employment Opportunities</a></li>
		<li><a id="ctl00_TopNavBar_HelpAboutUs" class="fly" href="http://www.codeproject.com/info/about.aspx">About Us</a></li>
		<li class="last"></li>
	</ul>

</li>

</ul>

</div>
    </div>
	<div class="sub-headerbar-divider"></div>
	</div>		
	

	<div id="A" class="container-content-wrap fixed"> 

	<div itemscope="" itemtype="http://schema.org/Article" class="container-content"> 


		<div class="clearfix">
			<div class="container-breadcrumb float-left ">
				<div><a href="http://www.codeproject.com/script/Content/SiteMap.aspx">Articles</a> » <a href="http://www.codeproject.com/Chapters/6/General-Programming.aspx">General Programming</a> » <a href="http://www.codeproject.com/KB/recipes/"><span itemprop="articleSection">Algorithms &amp; Recipes</span></a> » <a href="http://www.codeproject.com/KB/recipes/#Algorithms">Algorithms</a></div>
			</div>

			<div class="float-left">
				
			</div>

			<div class="edit-links float-right">
				


 
&nbsp;










			</div>

			<div class="article-nav float-right">
					
		        
		        
					

                
				
			</div>
		</div>

		<table class="extended container-article-parts" cellpadding="0" cellspacing="0">
        <tbody><tr valign="top">
		<td class="article-wing-left" width="117px">

			<div style="position: fixed; top: 10px; left: 155.5px;" id="ctl00_Nav" class="container-article-tabs stuck">
    			

<div class="tabs">
	<div class="selected">Article</div><div class="unselected"><a href="http://www.codeproject.com/script/Articles/ListAlternatives.aspx?aid=66341">Alternatives</a></div>

	<div class="unselected"><a href="http://www.codeproject.com/KB/recipes/WebControls/#_comments" id="ctl00_ArticleTabs_CommentLink" class="anchorLink">Comments 
        <span id="ctl00_ArticleTabs_CmtCnt">(148)</span></a>
	</div>
</div>	


				<a id="ctl00_AddAlternative" title="Write a related article about upgrades or translate this into a different language." class="add-item" href="http://www.codeproject.com/script/Articles/SubmissionWizard.aspx?at=1&amp;apid=66341">Add your own<br>alternative version</a>

			    <div class="tags"> 
                    <h4>Tagged as</h4>
                    
                    <div class="tags">
<span class="t"><a href="http://www.codeproject.com/search.aspx?sbo=kw&amp;aidlst=81">C#</a></span><span class="t"><a href="http://www.codeproject.com/search.aspx?sbo=kw&amp;aidlst=69">C#3.0</a></span><span class="t"><a href="http://www.codeproject.com/search.aspx?sbo=kw&amp;aidlst=94">Windows</a></span><span class="t"><a href="http://www.codeproject.com/search.aspx?sbo=kw&amp;aidlst=98">.NET</a></span><span class="t"><a href="http://www.codeproject.com/search.aspx?sbo=kw&amp;aidlst=76">.NET3.5</a></span><span class="t"><a href="http://www.codeproject.com/search.aspx?sbo=kw&amp;aidlst=103">Visual-Studio</a></span><span class="t"><a href="http://www.codeproject.com/search.aspx?sbo=kw&amp;aidlst=77">VS2008</a></span><span class="t"><a href="http://www.codeproject.com/search.aspx?sbo=kw&amp;aidlst=118">Dev</a></span></div>
			    </div>
                

                <div class="stats">
                <h4>Stats</h4>
                <div id="ctl00_ArtStats"><div class="stats"><div>135.7K views</div><div>7.8K downloads</div><div>147 bookmarked</div></div></div>
                </div>

                <div class="subdue padded-top" title="Date First posted">Posted 
                    <span itemprop="datePublished" content="2010-03-18">18 Mar 2010</span></div>

                
			</div>

		</td>
		<td>
			
			<div id="AT" class="container-article  fixed"> 

				<div class="article">

					<form name="aspnetForm" method="post" action="/KB/recipes/SimplePaletteQuantizer.aspx?display=Mobile" id="aspnetForm" style="margin:0;padding:0">
<div>
<input name="__VIEWSTATE" id="__VIEWSTATE" value="KoxS2i+JrXtNC3PM+jnnTQ8PpdTzPzo9wlm95pdmYENe9CZEIp4l2UHpLqUzthcAGlVQc49vLbiChehq5CBWwHFGNyHtf6bP9tpghNiLID7Ua4HW2qYYonOIaOF6kNbQiQG1ZRnY5Lg4AkUFn55OHWNLTMCb+zGF/5coqaDGgCVUWlZSjrPewGaAdsMM0f2QQ9M1QgDFMG610bnQNJ3sE6faGW1r53jCLEseOq/qfp1DadRS8hrsMqUgJBeHRAjEWEE9IbI3uzWQNfzNHYaD/WTvK2j4ByTGO/rk4vVGRe2e6LWc0F6xBjfTGO0O8KOhQLF+8df4TSg/PHPxYBM/mXl+HvEOummAvVE/GtENnoEmoy0YOMqeNR9KjB2FD499155HYo8sFaaWde7ZBma0AnozqDQxXXl1qhJySqNxLQB4P287LyWVhtjlKiBwvKlKyWYEkz66uNH+WHwEETvM32YRXDrasOIWn/1dlhpLfIes3qmdqgFP1/N+XkByxDeqcsRbG//EuQgZGrH0gDv3GARgP5rQ2vMmLEZIgIkr7z1V3ZdEKCziMtL2Ccb9zZ0tsBvVFFoUDqo1fqS9+meZ2npy1eV4KsLFmTn6sI2BP8tRqXzHzqDEYG8HI1fkovZdVdXUEGYFwzgMOVVBltKs3fakqO3N5mfcXivUqikyNTmFH2CCFn59NpH4b/x6jrGl8a1+P2OPhFGitRZ18vW3jfzovlnlA2avP79tYw05XGCiyYVK6eMXcy/nhdqHtnb/qdmBzwf5khhl0s3yiBcV1DGqFc9LygQFAJQsaNdwnFD9s8j238O39DbtxtO4cNL4O4JFzczDfiiR4GBFtLFhPLYCMRjW1RIVPEEAIlf3zE4XB7QSebA27GhvVCdMTUtZUL/PZ/X8ko6zrq8dET+I6n7cq2YsM0VtmMeP511ie0VS/Quzs+Dgw9vQJGY54RN2EK3K3D5jAJB2K0jIFDtZ/gyYtBevbwddFRGosh/sn/qWN513HT7sfeZSE9Riv1yO92LKyeZTHwSAq4rXrRxQGHDj/J26oKR+u+pfFBKFNivpiMF4iMI2RWpnMn3wxcIhmj0FSVjXB74bh8KsvVIvjAHP49U5kLFoVgF0K3M++dE/tqpn305oy7DQpV7XeqUbZauL27M3rg0KmsAzCO6WThMj11JgPIw9poY0fHuCFnkpDdVfqRfbiiqaKzA2P+H14V35m4bP6hdCCG4Zce8AdtmwRsUQpKCRx56ZKaj/WAMvVnPcFuMBHYP5iTDygGr7LYwMwD1xj7iCVChIWLIUfuoBZdk/5geHBQ3lWAYm2fpuL5rjvznH4hKIqPMCwCgF7A5PoRyzOiniI7pJ+rSkJanu8a6OnSgBgU1DXnRTFq6U5TxGZqtl7qHp0ajwVUVZsan08tQYoDL9VlsCR+7VtzPnk7DX5qh2/vX89Ig+UXSIsk6Qi//57JlaxsNfO9X/1d3WPC0O8RL+H+P6stwQWydG+MT54ZN8gAuxffE77EbakIz7mutxWDgFnM/DRgJ5isSfjt7AxxQXAoZGRzHYW3aissnANKV73B08M1/11rQ0HtN1J+2aD8vHE2aMPNsKlKExg4hC6QDLFE4tUKGxzVZDDlQIUV9o0bWf34IwUnfScfYo40dIVHxodZurUfxGcpFbouSLPwZYZBijhCgYEFi5T3eyIBKoWDYrg2UTv5pYU4R7YXR8qXLt7Qf0rxuU2j9gZMIhx2LYfryguESydcBXQBOYg92hrpCleki1NyWLgJv3VYNzRHLxh9Zu5jDmM18+JA7uzO63wQPOMF5mDlhepcxEQIfqMEfE1Ejl/PpB3aFltiFph1Yjen2rn45sLHnY/Mu47fXETeEv/MUcGAbvueRKQdKBCzPcCL6PXqhg17eqtOc2ZSRJ296ykbeItzGvkQhTUPibQLIuXf5vE47VS0RXbuA0tuwZiRRT/xrBNTS8CTXwGBqJcZ3ARHSG919xYu0AndmG/S3+MdDMDb7eznfc9zYcABu+I2UES6YRzpJxldSzHRZYlEW/9Akqhwr7siCgFmIanWFi/SbtTVdz4QBfffrIRxi59O8UZS0pvJbo/aHcmdWr6TW3qORzJWIHRkEFsXED6cevgNOENtWoNeTUChdd1gtX7cuDTfD1KsLWNRbQYEj3p9aDNc6lmNnoXQniRPU7HzE2VbRt/J75FlbvnZaUkQQXfgDumQ5WjVE4j4cl4VQU7Jap0z5IyrxyEtbEuNoKevxZ+s+Pb65Qg29lomiJMGAXxDFl5cmpPjpgH8TGyBwewBIhtBkp7L8McOJzzXPkBJLi1ICm6HLjcFoYGLARnrkjiXEOyOSdA05iKrpVMZbpTe/S6305gNA3OEePbnR7sD+azbAOZ2Q+csXeGpi9m3utYuRlTAn1jQCU9edGJHiqg9iwnMOYrgfFnDtEAoLAUTPYcOPkM63i/0nAXJhiUQGWBN1JZUx/TTVbUHje5iF/oAgt9QZ+ZluLyb4xm+kUHplNwk5Mab2K8ZQKi4UQADs/tHod8vS/ZxynhqTQ4Cs3dRHPrS1ql0jiSuKAJLLBV2s0/Gao0iosaLEtknLFkRMOLPvx7ZFS/+vKn0jNuZS/R5ABGaXvWN1L92jKdvSFU+i7uXH8tctRr396bf0HhXmWv0lzvdFp1idnYnz0EYil9Md0M4MvtkxxOGqd/oeb8n1qh8As8q82Fim9avIkO/E+v/e6tGYN/1GCIZIkFrnZgTA2+yvKXaWEQQZ+ImlQSnqfuaumno+AFHeXtSWETLFeyiBpRQIRllz/4DSU0NbBAdoFsyZhR+a//7x3/4iT1AuL5WEUNFQdTmAEZnloLeFnAPqSqqm+EfGoT3TQRe8sCKraXi+HOrz8V5rE7tPsbjz4MplBMXP218MhB3wsbupGxpV/efBd2NHzYzVMX/zu9O5PbfeVbwySmbrQPMJroKI+x5aWjxJKmrYl2kyjLe9gnKZS3zaFuYGDB7lsRkbk+g3UxJ59hWlQy1tAUL6qsMlFMeMK1yBbcRktwIDc4M7a4uuV7Pulxr1G9gngJEQeTUZrOOOc5f94aERq10hAyY+zaWjPLSrRc280LbrUMJY7wZisKon/c0smi9fw1xQaGtdUh6ZMteRvLW+Bd6TkXKzIzunkNp61YruElU3kJ8IHRWjclQs9cvvDocdMc5seqg+IrB0T7G+JA/3lsTzk9qOcZ9Lw8PcNesr1jDCqA7uuvbUeMe43Hs39D7brHMRVdSO5P7sYYeoSYO0oEK2Jwb9TUoPJbkH9uv0=" type="hidden">
</div>

<div>

	<input name="__VIEWSTATEGENERATOR" id="__VIEWSTATEGENERATOR" value="10C1FD69" type="hidden">
</div>

					
					 
					<div class="header">
					    <a name="Main"></a>

					    
					    <a name="_articleTop" id="_articleTop"></a>
					    <div class="title">
					        
					        <h1 id="ctl00_ArticleTitle" itemprop="name">A Simple - Yet Quite Powerful - Palette Quantizer in C#</h1> 
					    </div>

                        <div style="height:34px">
					        
					        <div class="entry float-left">
                                <img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/4503976d-c3dc-4773-967f-9de04a1c5b8b.png" id="ctl00_avatar" class="float-left avatar">
                                <div class="float-left">

						            <span class="author"><a href="http://www.codeproject.com/script/Membership/View.aspx?mid=1266003" rel="author"><span itemprop="author" itemscope="" itemtype="http://schema.org/Person"><span itemprop="name">Smart K8</span></span></a></span>, 
						            <span class="date" itemprop="dateModified" title="Date last updated" content="2012-07-28 11:47:00">
							            28 Jul 2012</span>
			
                                    <a id="ctl00_LicenseLink" title="The Code Project Open License (CPOL)" class="license" href="http://www.codeproject.com/info/cpol10.aspx">CPOL</a><div id="ctl00_CurRat" class="tooltip anchorLink" style="cursor:pointer;margin-top: 5px" name="CurRat_66341">
				
							            

<table class="small-text" itemprop="aggregateRating" itemscope="" itemtype="http://schema.org/AggregateRating" cellpadding="0" cellspacing="0"> 
<tbody><tr>
	
	<td class="nowrap">

		
			<meta itemprop="bestRating" content="5"> 
			<meta itemprop="worstRating" content="1">
		

		<span id="ctl00_ArticleRating_VI">
		<div class="nowrap rating-stars-medium" style="height:18px;width:80px;position:relative;">
	<div class="clipped align-left float-left" style="height:16px;width:79px;">
		<img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/stars-fill-md.png" style="border-width:0px;">
	</div><div class="clipped" style="height:16px;width:1px;position:relative;">
		<img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/stars-empty-md.png" style="border-width:0px;position:absolute;top:0;right:0;">
	</div>
</div>
		</span>

		
	</td>
	
	<td id="ctl00_ArticleRating_VR" class="nowrap">
		&nbsp;
		<span id="ctl00_ArticleRating_VotesR">&nbsp;<span itemprop="ratingValue" class="rating">4.97</span> (<span itemprop="ratingCount" class="count">90</span> votes)</span>
		
	</td>

</tr>

</tbody></table>


							            <div id="ctl00_RB" class="speech-bubble-container-up">
								            <div class="speech-bubble-up" style="width:150px !important">
									                        
<div>
<table class="feature" title="Voting Distribution. Recent data only" cellpadding="0" cellspacing="0" height="50px" width="100%"><tbody><tr class="chart-row"><td class="chart-column"><span title="0 votes">1</span></td>
<td class="chart-column"><span title="0 votes">2</span></td>
<td class="chart-column"><div class="rating-ignore-vote" title="Votes not included in score."><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/pollcol.gif" alt="2 votes, 2.3%" title="2 votes, 2.3%" border="0px" height="1px" width="20pxpx"></div><span title="0 votes">3</span></td>
<td class="chart-column"><div><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/pollcol.gif" alt="4 votes, 4.5%" title="4 votes, 4.5%" border="0px" height="2px" width="20pxpx"></div><span title="4 votes">4</span></td>
<td class="chart-column"><div><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/pollcol.gif" alt="84 votes, 95.5%" title="84 votes, 95.5%" border="0px" height="50px" width="20pxpx"></div><span title="84 votes">5</span></td>
</tr></tbody></table><div class="small-text align-center">4.97/5 - 90 votes</div><div class="small-text align-center subdue">2 removed</div><div class="small-text align-center subdue">μ 4.95, σ<sub>a</sub> 1.05 [<a href="http://www.codeproject.com/KB/FAQs/RatingReputationFAQ.aspx#noisefilter">?</a>]</div>
</div>
								            </div>
								            <div class="speech-bubble-pointer-up">
									            <div class="speech-bubble-pointer-up-inner"></div>
								            </div>
							            </div>
						            </div>
                                </div>
					        </div>

                            
						    <div id="ctl00_RateArticleRow" class="float-right align-right voting-bar">
						        <div id="ctl00_RateArticle_RateItemWrapper" class="small-text" name="RateItem_66341">

	<table class="small-text" cellpadding="0" cellspacing="0" width="100%">
	<tbody><tr>
		<td id="ctl00_RateArticle_VoteResultDiv" class="rating-result align-right">
			<span class="align-right"></span>
			<img class="loaderImg" alt="loading..." src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/animated_loading_blue.gif" style="display:none;" height="16px" width="16px"> 
		</td>

	
		<td class="voteTbl" style="white-space:nowrap" align="right">
			<table class="small-text">
			<tbody><tr>
				
				<td id="ctl00_RateArticle_StartForm" align="right" nowrap="nowrap">Rate: </td>

				<td id="ctl00_RateArticle_VoteFormDiv" class="nowrap rating-stars-voter-large">
					

					<span id="ctl00_RateArticle_RB" class="tooltip ajaxHist radio voting">
						<span id="ctl00_RateArticle_VoteRBL"><input style="display: none;" id="ctl00_RateArticle_VoteRBL_0" name="ctl00$RateArticle$VoteRBL" value="1" type="radio"><input style="display: none;" id="ctl00_RateArticle_VoteRBL_1" name="ctl00$RateArticle$VoteRBL" value="2" type="radio"><input style="display: none;" id="ctl00_RateArticle_VoteRBL_2" name="ctl00$RateArticle$VoteRBL" value="3" type="radio"><input style="display: none;" id="ctl00_RateArticle_VoteRBL_3" name="ctl00$RateArticle$VoteRBL" value="4" type="radio"><input style="display: none;" id="ctl00_RateArticle_VoteRBL_4" name="ctl00$RateArticle$VoteRBL" value="5" type="radio"></span> 

						
					<div class="rating-star-block"><a title="vote 1" class="star outline" rating="1" href="#">vote 1</a><a title="vote 2" class="star outline" rating="2" href="#">vote 2</a><a title="vote 3" class="star outline" rating="3" href="#">vote 3</a><a title="vote 4" class="star outline" rating="4" href="#">vote 4</a><a title="vote 5" class="star outline" rating="5" href="#">vote 5</a></div></span>

				</td>

				
				<td style="padding-left:5px">	
					<input style="display: none;" name="ctl00$RateArticle$SubmitRateBtn" value="Vote!" id="ctl00_RateArticle_SubmitRateBtn" class="button" type="submit">
				</td>
			</tr>
			</tbody></table>
			
		</td>
	</tr>
	</tbody></table>
	<div class="hover-container">
		<div id="ctl00_RateArticle_RCD" class="rating-comment align-left float-right">
			Add a reason or comment to your vote:
            <a href="#" id="clear-rate_ctl00_RateArticle_RCD" title="close" class="rating-close">x</a>
            <br>
			<textarea class="RateComment" rows="5" cols="60" style="width:98%;"></textarea>
			<span id="ctl00_RateArticle_CommentReq" class="subdue">Adding a comment to your rating is optional</span>
		</div>
        
	</div>
</div>
						    </div>
						    	
                        </div>

   					    
                        <div id="ctl00_description" class="summary" itemprop="headline">A palette quantizer based on human perception</div><span id="ctl00_thumbnailUrl" class="date" itemprop="image" content="http://www.codeproject.com/KB/recipes/SimplePaletteQuantizer/Thumb-66341.png"></span>			

                    </div>
                    
					
					

					

					
					
					

						
					

					

						
						<div id="contentdiv" class="text" itemprop="articleBody">
						




<ul class="download">
<li><a href="http://www.codeproject.com/KB/recipes/simplepalettequantizer/simplepalettequantizervs2008.zip">Download source (version 1.0) - 28.53 KB</a> </li>
<li><a href="http://www.codeproject.com/KB/recipes/simplepalettequantizer/simplepalettequantizervs2008v2.zip">Download source (version 2.0) - 48.96 KB</a> </li>
<li><a href="http://www.codeproject.com/KB/recipes/SimplePaletteQuantizer/SimplePaletteQuantizerVS2008v3.zip">Download source (version 3.0) - 57.06 KB</a> </li>
<li><a href="http://www.codeproject.com/KB/recipes/SimplePaletteQuantizer/SimplePaletteQuantizerVS2008v4.zip">Download source (version 4.0) - 77.81 KB</a> </li>
<li><a href="http://www.codeproject.com/KB/recipes/SimplePaletteQuantizer/SimplePaletteQuantizerVS2010v5.zip">Download source (version 5.0) - 115.92 KB (<strong>NEW</strong>)</a> </li>
</ul>

<h2>Introduction&nbsp;</h2>

<p>This article presents a color quantizer, which is simple to 
understand for beginners, yet powerful enough for every day use. From 
version 2.0, it contains the optimized version, and also implementation 
of other common quantizers for you to use. From version 4.0, it also 
contains different color matching algorithms for better practical 
usability. In version 5.0 the support for dithering, and parallel 
processing was added (see change log for more details).</p>
<img style="WIDTH: 640px; HEIGHT: 480px" alt="SimplePaletteQuantizerVS2008" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/SimplePaletteQuantizer.png" complete="true" border="0" height="480" hspace="0" width="640"> 
<h2>Background</h2>

<p>I was searching for a good color quantization algorithm, and my first
 stop was of course The Code Project. I found many quantizers, but all 
of them were quite similar. They're all based on octree, and were all 
reducing a palette inaccurately. I needed something - more of a Swiss 
knife quantizer, that will reduce a palette even for the 1-bit color 
depth reasonably. It has to be fast enough, precise enough and also the 
results must be above average at least. So I devised an algorithm based 
on HSL color model, which treats the image more like a human eye. </p>

<h2>Using the Code</h2>

<p>The code for this article is pretty simple, and easy to understand. It consists of one interface <code>IColorQuantizer</code>, which provides a basic quantizer functionality. And one implementation class <code>PaletteQuantizer</code>, about which this article is. </p>

<h2>Color Quantization Explained</h2>

<p>It is a process that tries to reduce the number of colors in a given 
image to a certain limited number (given by the external factors), while
 keeping a visual essence of that image intact. It's usually used to 
satisfy display capabilities of certain devices, to reduce a raw size of
 the image. Also some image formats only support up-to the 256 colors 
(such as the GIF format). The color counts in a source image are usually
 much higher than that&nbsp;of those allowed, so the algorithm has to 
discard the colors carefully. </p>

<h2>The Interface <img style="WIDTH: 32px; HEIGHT: 32px" alt="SimplePaletteQuantizer/New.png" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/New.png" complete="true" height="32" width="32"> </h2>

<p>I've tried to keep it as simple as possible, while allowing for other
 implementations to be integrated. Such as those octree based algorithms
 flying around here somewhere on Code Project. Because in my humble 
opinion, a good API is a first step. The comments are stripped away 
here, so all the methods can be described below in a greater detail. But
 at first look, I think you should already know what's coming. </p>

<div class="pre-action-link" id="premain693395" style="width:100%;display:block;"><span id="prehide693395" onclick="processCodeBlocks.togglePre(693395);">Hide</span>  &nbsp; <span onclick="return processCodeBlocks.copyCode(693395);">Copy Code</span></div><pre style="margin-top: 0px;" id="pre693395" lang="cs">public interface IColorQuantizer
{
    <strong>Boolean AllowParallel { get; } // introduced in version 5.0</strong>
    <em>void Prepare(ImageBuffer image); // introduced in version 4.0 - changed in version 5.0</em>
    <em>void AddColor(Color color, Int32 x, Int32 y); // changed in version 5.0</em>
    List&lt;Color&gt; GetPalette(Int32 colorCount);
    <em>Int32 GetPaletteIndex(Color color, Int32 x, Int32 y); // changed in version 5.0</em>
    Int32 GetColorCount();
    <strong>void Finish(); // introduced in version 5.0</strong>
    <strong><em><strike>void Clear();</strike> // deprecated in version 4.0</em></strong>
}</pre>

<h2>The Greater Detail</h2>

<p>So let's take it one by one; no delays. The <code>AddColor()</code> 
method is used to feed the quantizer with the image pixel colors. To be 
later thrown away, and kept at palette range as needed. The basic idea 
is that you usually traverse all the pixels of one or more images (if 
you want to share that palette among them). All those colors are fed to 
the quantizer, which depending on the implementation will create various
 structures, and other contraptions, to spit a palette of a certain size
 at any moment. This method is the primary method, and will be used 
plentiful. So it should be as quick as possible.</p>
<p>Another important method is <code>GetPalette()</code>, which is 
usually the major know-how. There're many algorithms available, but 
basically it's all about squeezing out the representative points from 
the n-dimensional data (a cube in case of the RGB color model). Ideally 
the number of colors in a quantizer (i.e. a source image) is lower or 
equal to what we want. But it usually isn't the case. So instead of 
having all the true-colors, we're pushed to have only a limited set of 
those. And this method does exactly that. It picks a group of colors, 
and hopes that in the end, those will be the ones that represent the 
image most closely.</p>
<p>When we've our colors gathered, and a palette is determined, it's 
time to convert all the pixels from a truecolor (RGB or ARGB) to an 
index in our palette. As this method is also used on each pixel, it has 
to be also as fast as possible. Usually all the dirty tricks are used 
here. Basically you have an arbitrary color (up to 2^24 colors for RGB, 
or 2^32 colors for ARGB) for each pixel, and your mission - in this 
method - is to find that color in your mere (tops 256 colors) palette, 
and return its index. It's tough, but by far not impossible.</p>
<p>The last two methods, the <code>GetColorCount()</code>, and <s style="COLOR: darkred">the <code>Clear()</code></s> are just cosmetic in comparison. The <code>GetColorCount</code>
 as its title indicates retrieves a number of unique colors currently 
stored in the quantizer. It's usually used to impress the users by what 
factor you reduced the color count, and it still looks the same.. well 
almost. <s style="COLOR: darkred">The <code>Clear()</code> method is used as a maintenance method, to clear all the those precious colors. </s><em style="COLOR: darkgreen">The new <code>Prepare()</code> method does what old <code>Clear()</code> did, but it also provides the chance to process the image beforehand</em> (since version 4.0). A quantizer is then ready for another round, for another image. </p>
<p>In version 5.0 the method <code>Finish()</code> was added, to basically reintroduce the old <code>Clear()</code>
 method (but cowardly give it a different name so it seems like entirely
 different method). It is used to clean-up after the round since 
multiple quantizers were holding large amounts of memory when used 
simultanously. Also property <code>AllowParallel</code> to determine whether the quantizer supports parallel processing or not. Also somewhat notably the <code>ImageBuffer</code> class was refactored to clean-up and optimize the pixel processing.</p>

<h2>My Way</h2>

<p>Now that we know what methods are in the game, I won't be describing 
them one by one as I did implement them. I'll try to put together a 
meta-comment-bullet point-code of what is happening during those three 
phases. </p>

<h3>Phase One - The Hash Table Cheat</h3>

<p>Remember that this phase corresponds to reading all the pixels' color
 data, into our clever structure. My clever structure is a hash table. A
 simple <code>Dictionary&lt;Int32, Int32&gt;</code>, where key is the 
32-bit color value (as in ARGB quad), and the value is number of the 
pixels of this color present in our image data. That presence counter 
doesn't play as big a role here so I call it a cheat, because a <code>Boolean</code> would do almost the same job here. But in the end, I've found some use for it.. soo that's that. MBC (meta-bullet-code): </p>

<ul>
<li>Scan through all the pixels of the source image. </li>
<li>If a color is in the hashtable, increase the pixel presence value by 1. </li>
<li>If it's not, add it and set the pixel presence to 1. </li>
</ul>

<p>So far so good, but the most weird is still to come. </p>

<h3>Phase Two - The Color Grinder</h3>

<p>We now have all the pixels accounted for. So let the massacre begin. I'm talking about <code>GetPalette()</code> method here. </p>

<ul>
<li>Randomize (by a fixed seed of your choice) an order of the colors, the statistics is on our side. </li>
<li>If there're less or equal colors in the quantizer than requested, 
we're done. Let's just take all of them. This is an ideal situation. </li>
<li>Otherwise make three lists. One distinctly filtered by a hue, 
another by saturation, and the last one by brightness. Remember that 
those have to be the float representations. </li>
<li>Determine which one of those has the most elements in it. A scanned 
image has the details in that area. Our candidates are in this one. </li>
</ul>

<p>Let me explain here a bit before I continue. If a list with unique 
hues is the biggest, it's probably an image with many colors in it, so 
the importance will be to catch all those colorful details. If it's 
brightness, then there're probably some less colored, but highly shaded 
objects on the image. As for saturation, the details are mostly in the 
colored shades. So we're slightly adapting to what the eyes are seeing. 
Now that we have reduced a major part of the colors, let's begin to 
refine our choice a bit. Let's continue. </p>

<ul>
<li>If there are still more colors than we need, continue, otherwise we're done. </li>
<li>Now make a similar death-match between the remaining aspects. If for
 example a hue was the major one, let's filter our colors again by 
brightness and saturation. </li>
<li>Take again the one with more colors. </li>
<li>If the winner has less colors than we need, just ignore it and rush to the last round. </li>
<li>Otherwise, take those colors. </li>
<li>As a last resort, try to filter out colors by the last aspect (if we choose a hue at 1<sup>st</sup> level, and brightness at 2<sup>nd</sup> level, be it saturation). </li>
<li>And again, if this would result in less color than requested, ignore it. </li>
<li>Otherwise pass it on. </li>
</ul>

<p>At this point, we should have our colors really decimated at about 
the count we need, but if still there are too many colors, we'll simply 
do: </p>

<ul>
<li>Sort the remaining colors by the pixel count presence (our value in the hash). </li>
<li>And just take the top (n) colors we've requested. Thus, we got exactly the count we needed. </li>
<li>This is our result set of representative colors. So pass them out of the function. </li>
</ul>

<h3>Phase Three - Almost Euclidean</h3>

<p>If you've followed all the steps here, you should now have a palette 
with pretty good color representation. Now all that is needed is to 
change all the colors on the target image to the indexes in our palette.
 You can use any algorithm you want, but I just used the good old 
Euclidean distance (without the square root, to speed it up). </p>

<ul>
<li>For each pixel in the source, take its color. </li>
<li>Call the <code>GetPaletteIndex()</code> method. </li>
<li>If a cache contains this color (we already asked for it before), return the cached index. </li>
<li>Otherwise find it with Euclidean distance, and store the index in the cache. (<code>Dictionary&lt;Color, Byte&gt;</code>) </li>
<li>Store the result index in the target image. </li>
</ul>

<h2>A Picture Is Worth A Thousand Words</h2>

<p>I've found the courage to put all that in the diagram below, so feel 
free to check it out, and be forgiving. Some of my friends told me, that
 it's actually more confusing than just plain bullet points. But the 
effort was made, and perhaps some of you will like it better this way. 
So without further ado, here goes that monster. </p>
<img style="WIDTH: 640px; HEIGHT: 908px" alt="A truly monstrous diagram." src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/DiagramNarrow.png" complete="true" border="0" height="908" hspace="0" width="640"> 

<h2>Distinct Selection Quantizer (aka the color quantizer described in this article)</h2>

<p>I've included this only as a comparison to other algorithms, I've tried to be objective. </p>

<table>
<tbody>
<tr>
<td><img title="Advantages" style="WIDTH: 24px; HEIGHT: 24px" alt="Pros" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/Pros.gif" complete="true" height="24" width="24"> </td>

<td>
<ul>
<li>Very good image quality (especially photos) </li>

<li>Supports all the color counts </li>
</ul>
</td>
</tr>

<tr>
<td><img title="Disadvantages" style="WIDTH: 24px; HEIGHT: 24px" alt="Cons" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/Cons.gif" complete="true" height="24" width="24"> </td>

<td>
<ul>
<li>Memory consumption </li>
<li>Slower <br>&nbsp;(in <strong>version 4.0</strong> - can be improved by Locality-sensitive hash, or Octree search color caches)
           <br>&nbsp;(in <strong>version 5.0</strong> - further improved by parallel processing, and other optimizations) </li>
</ul>
</td>
</tr>
</tbody>
</table>

<h2>The Competit.. the Alternatives Out There <img style="WIDTH: 32px; HEIGHT: 32px" alt="SimplePaletteQuantizer/New.png" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/New.png" complete="true" height="32" width="32"> </h2>

<p>As pointed out by Som Shekhar, to list and briefly describe some other potential <code>IColorQuantizer</code> implementations out there. So here goes, as I promised. </p>

<h3>Uniform Quantization (Included in version 2.0)</h3>

<p>This algorithm is one of the oldest out there. It is sort of a naive 
approach. Each color component axis (red, green and blue) is divided 
into a few fixed segments (either 8-8-4 or 6-6-7 as in 255, resp. 252 
colors). Each found color is placed into a corresponding segment slot. 
After all the colors are added, an average color is calculated for each 
slot. Those are the colors of the palette. </p>

<table>
<tbody>
<tr>
<td><img title="Advantages" style="WIDTH: 24px; HEIGHT: 24px" alt="Pros" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/Pros.gif" complete="true" height="24" width="24"> </td>

<td>
<ul>
<li>Very quick </li>

<li>Very small files </li>

<li>Low on memory </li>
</ul>
</td>
</tr>

<tr>
<td><img title="Disadvantages" style="WIDTH: 24px; HEIGHT: 24px" alt="Cons" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/Cons.gif" complete="true" height="24" width="24"> </td>

<td>
<ul>
<li>Bad image quality </li>

<li>Only reduces to 256 colors </li>
</ul>
</td>
</tr>
</tbody>
</table>

<h3>Popularity Algorithm (Included in Version 2.0)</h3>

<p>Similar as the uniform quantization, and definitely from the same 
family, is a so called popularity algorithm. I was at first targeting to
 write something like this, but then it kind of evolved into something 
better (I hope). A RGB cube is also divided into little regions 4x4x4 
(256/4 = 64 per color component, thus 262,144 little cubes). The colors 
are also placed into a corresponding region, and also the pixel presence
 is counted. After all the colors are in place, the top N regions with 
the highest pixel presence are chosen, an average color is calculated. 
Giving us N colors of the palette. </p>

<table>
<tbody>
<tr>
<td><img title="Advantages" style="WIDTH: 24px; HEIGHT: 24px" alt="Pros" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/Pros.gif" complete="true" height="24" width="24"> </td>

<td>
<ul>
<li>Very small files </li>

<li>Low on memory </li>

<li>Supports all the color counts </li>
</ul>
</td>
</tr>

<tr>
<td><img title="Disadvantages" style="WIDTH: 24px; HEIGHT: 24px" alt="Cons" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/Cons.gif" complete="true" height="24" width="24"> </td>

<td>
<ul>
<li>Very bad image quality for<br>highly colored images </li>
</ul>
</td>
</tr>
</tbody>
</table>

<h3>Median Cut (Included in Version 2.0)</h3>

<p>The median cut took kind of different approach, and is more geometric
 in the nature. First it puts all the pixels out in the RGB space, then 
it finds the smallest box to enclose all of them (the worst cast 
scenario is a whole cube, but it's unusual). Then the iterative process 
begins. The longest axis is chosen (R, G or B) and the points are sorted
 along that axis. Then a median is calculated and the box is cut with a 
plane at that point. Thus we have two smaller boxes. For which we apply 
this recursively again and again until we got our N of boxes, whose 
contained colors are again averaged to give us the palette entries. </p>

<table>
<tbody>
<tr>
<td><img title="Advantages" style="WIDTH: 24px; HEIGHT: 24px" alt="Pros" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/Pros.gif" complete="true" height="24" width="24"> </td>

<td>
<ul>
<li>Acceptable image quality </li>

<li>Supports all the color counts </li>
</ul>
</td>
</tr>

<tr>
<td><img title="Disadvantages" style="WIDTH: 24px; HEIGHT: 24px" alt="Cons" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/Cons.gif" complete="true" height="24" width="24"> </td>

<td>
<ul>
<li>Memory consumption </li>
<li>Slower <br>&nbsp;(in <strong>version 4.0</strong> - can be improved by Locality-sensitive hash, or Octree search color caches)
           <br>&nbsp;(in <strong>version 5.0</strong> - further improved by parallel processing, and other optimizations) </li>
</ul>
</td>
</tr>
</tbody>
</table>

<h3>Octree Algorithm (Included in Version 2.0)</h3>

<p>There are plenty of articles around the web, as this is in current 
day the most used algorithm. Just to reference one here on The Code 
Project (<a href="http://www.codeproject.com/KB/graphics/cquantizer.aspx">CQuantizer</a>). Basically, a cube is iteratively divided into the cubes (again). But this time, it's done along all the axis at once (<a href="http://en.wikipedia.org/wiki/Octree">Octree on Wikipedia</a>).
 So the boxes are only created to cover the pixels inserted. Once all 
the colors are accounted for, the branches (those containing at least 
one leaf), are being reduced starting at the deepest level, because 
there the colors are usually nearer to each other. A branch is reduced 
by calculating an average value on all of its leaves, eliminating them 
and thus becoming a leaf itself. At the moment, we've lower or equal 
count of leaves as the colors we want, we stop reducing, and parse all 
the leaves for our palette colors. The reduction is therefore a 
destructive process, and octree can be used only once. Also up-to 8 
leaves may be reduced at once, leaving us at the worst with 248 colors 
in the palette (which is not quite optimal). </p>

<table>
<tbody>
<tr>
<td><img title="Advantages" style="WIDTH: 24px; HEIGHT: 24px" alt="Pros" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/Pros.gif" complete="true" height="24" width="24"> </td>

<td>
<ul>
<li>Very quick </li>
<li>Good image quality </li>
</ul>
</td>
</tr>

<tr>
<td><img title="Disadvantages" style="WIDTH: 24px; HEIGHT: 24px" alt="Cons" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/Cons.gif" complete="true" height="24" width="24"> </td>

<td>
<ul>
<li>Memory consumption </li>
<li>Only 256 colors are supported 
    <br>&nbsp;(in <strong>version 4.0</strong> - support for any color count was added) </li>
</ul>
</td>
</tr>
</tbody>
</table>

<h3>Spatial Color Quantization</h3>

<p>I don't really know much about this method, as it's relatively new, 
and wasn't really eager to try it. All I know is it somehow combines 
quantization with dithering at the same time and is really exceptional 
for use to 16 colors or less. It's not that good for high color counts 
such as 256 colors. Check for yourself at <a href="http://moonflare.com/code/scolorq/">SColorQ</a>.
 Those were the images I tested against for lower bit rates. It's pretty
 impressive. I can't obviously compete against that dithering there at 
4bpp and lower.</p>

<table>
<tbody>
<tr>
<td><img title="Advantages" style="WIDTH: 24px; HEIGHT: 24px" alt="Pros" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/Pros.gif" complete="true" height="24" width="24"> </td>

<td>
<ul>
<li>Exceptionally good image quality </li>
</ul>
</td>
</tr>

<tr>
<td><img title="Disadvantages" style="WIDTH: 24px; HEIGHT: 24px" alt="Cons" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/Cons.gif" complete="true" height="24" width="24"> </td>

<td>
<ul>
<li>Very slow </li>
<li>Efficient only at 2-16 colors per palette </li>
<li>Not good with photographs (and smooth images) </li>
</ul>
</td>
</tr>
</tbody>
</table>

<h3>Wu's Color Quantizer (Included in Version 4.0)</h3>

<p>Another geometrical quantizer is Wu's color quantizer by Xiaolin Wu. 
This algorithm is slower, but provides very good picture quality, 
unreachable by other algorithms. It's a clustering algorithm cuts the 
RGB space to find desired number of cubes. The parameter for cut being 
volume variance. As the author puts it: "Greedy orthogonal bipartition 
of RGB space for variance minimization aided by inclusion-exclusion 
tricks." I would recommend this algorithm, if quality is more important 
than speed for you.</p>

<table>
<tbody>
<tr>
<td><img title="Advantages" style="WIDTH: 24px; HEIGHT: 24px" alt="Pros" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/Pros.gif" complete="true" height="24" width="24"> </td>

<td>
<ul>
<li>Exceptionally good image quality </li>
<li>Supports all the color counts </li>
</ul>
</td>
</tr>

<tr>
<td><img title="Disadvantages" style="WIDTH: 24px; HEIGHT: 24px" alt="Cons" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/Cons.gif" complete="true" height="24" width="24"> </td>

<td>
<ul>
<li>Slow </li>
<li>Memory consumption </li>
</ul>
</td>
</tr>
</tbody>
</table>

<h3>NeuQuant Algorithm (Included in Version 4.0)</h3>

<p>This algorithm uses Kohonen Neural Network to learn the image colors.
 The neurons then correspond to the color slots, being optimized as the 
training of neural network proceeds. You can select between quality and 
speed. By sampling all the pixels, you'll achieve the maximal quality, 
or you can select lower quality (sampling step) to perform faster 
quantization. This algorithm should be used for higher color counts. 
I've limited it to 256 colors only. Feel free to experiment with other 
options. It performs better on visually rich images, such a the photos 
and rendered images.</p>

<table>
<tbody>
<tr>
<td><img title="Advantages" style="WIDTH: 24px; HEIGHT: 24px" alt="Pros" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/Pros.gif" complete="true" height="24" width="24"> </td>

<td>
<ul>
<li>Good image quality (especially photos) - depends on the quality settings </li>

<li>Memory consumption </li>
</ul>
</td>
</tr>

<tr>
<td><img title="Disadvantages" style="WIDTH: 24px; HEIGHT: 24px" alt="Cons" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/Cons.gif" complete="true" height="24" width="24"> </td>

<td>
<ul>
<li>Slower - depends on the quality settings </li>
</ul>
</td>
</tr>
</tbody>
</table>

<h3>Optimized Palette Algorithm (Included in Version 5.0) <img style="WIDTH: 24px; HEIGHT: 24px" alt="SimplePaletteQuantizer/New.png" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/New.png" complete="true" height="24" width="24"> </h3>

<p>Not much to say about this algorithm. It is basically a smart 
calculated (but unchangable) palette, that kinda covers all the colors, 
but none of them really. You'll get average results without need to 
synthetise a palette (as one is already ready), but the results will be 
also kinda average.</p>

<table>
<tbody>
<tr>
<td><img title="Advantages" style="WIDTH: 24px; HEIGHT: 24px" alt="Pros" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/Pros.gif" complete="true" height="24" width="24"> </td>

<td>
<ul>
<li>Pretty fast</li>
<li>Almost no memory consumption </li>
</ul>
</td>
</tr>

<tr>
<td><img title="Disadvantages" style="WIDTH: 24px; HEIGHT: 24px" alt="Cons" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/Cons.gif" complete="true" height="24" width="24"> </td>

<td>
<ul>
<li>Very bad image quality</li>
<li>Supports only 256 colors</li>
</ul>
</td>
</tr>
</tbody>
</table>

<h2>Color Caches</h2>

<p>Since <strong>version 4.0</strong> the support for color caches was added. You can assign these <code>IColorCache</code> implementations via <code>BaseColorQuantizer.ChangeColorCache()</code>. This concept replaces 'me-being-lazy' default Euclidean distance nearest color search by introducing new interface: </p>

<div class="pre-action-link" id="premain774389" style="width:100%;display:block;"><span id="prehide774389" onclick="processCodeBlocks.togglePre(774389);">Hide</span>  &nbsp; <span onclick="return processCodeBlocks.copyCode(774389);">Copy Code</span></div><pre style="margin-top: 0px;" id="pre774389" lang="cs">public interface IColorCache
{
    void Prepare();
    void CachePalette(IEnumerable&lt;Color&gt; palette);
    void GetColorPaletteIndex(Color color, out Int32 paletteIndex);
}</pre>

<p>This interface allows you to implement the search for optimal color within the quantized palette separately. The <code>CachePalette()</code> allows you to store already calculated palette in your clever structure. The <code>GetColorPaletteIndex()</code> replaces the <code>IColorQuantizer</code>'s method (see for more details). The <code>Prepare()</code> method just removes all the clutter before first (or next) pass. There are three implementations available now. </p>

<h3>Euclidean Distance</h3>

<p>This is a standard three dimensional distance, but without a square root to speed things up. See <a href="http://en.wikipedia.org/wiki/Euclidean_distance">Euclidean distance</a> for more details. Below is a general equation for three dimensions: </p>
<a href="http://www.codeproject.com/KB/recipes/SimplePaletteQuantizer/60fef8f555d15a44d6fb3d0dca84761e.png"><img style="WIDTH: 393px; HEIGHT: 31px" alt="SimplePaletteQuantizer/LocalitySensitiveHashing.png" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/60fef8f555d15a44d6fb3d0dca84761e.png" complete="true" border="0" height="31" hspace="0" width="393"> </a>
<h3>Locality-Sensitive Hashing</h3>

<p>I've searched the Internet to find some faster algorithms for a color matching. I've found this interesting general algorithm <a href="http://cybertron.cg.tu-berlin.de/pdci08/imageflight/nn_search.html">Nearest neighbor problem</a>,
 and I've wondered if it could be of any use to me. Then I forged it 
into a functional version for color matching problem. So now you supply 
the 'quality' (number of buckets really). This algorithm can be further 
improved (speed) by combining more reference points (for example 
distance from white, and from red). The intersection can be then 
calculated to make more precise guess on nearest color, without the need
 to calculate expensive Euclidean distance. The quality ranges from 1 
being best quality (+ overhead). This is not recommended as it brings no
 advantage. Other values: 8 (fast/quality 95%), 16 (faster/quality 85%),
 32 (very quick/60%), or 64 (almost instant/30%). I would not go any 
further than that.</p>
<img style="WIDTH: 590px; HEIGHT: 280px" alt="SimplePaletteQuantizer/LocalitySensitiveHashing.png" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/LocalitySensitiveHashing.png" complete="true" border="0" height="280" hspace="0" width="590"> 

<h3>Octree Search</h3>

<p>This technique combines the quick search in an octree algorithm with a
 specific palette of quantization algorithms without the need to use 
octree algorithm. It's considerably faster then Euclidean distance 
algorithm, without almost no quality impairment. This crude drawing 
below is a slightly modified version of Microsoft's crude drawing of 
full octree quantization algorithm. Each color in a palette is added to a
 list on each tree node it passes. When searching for a specific color. 
You'll find the most far node available, and then you perform comparison
 via Euclidean distance on all the colors in a list on a specific node.</p>
<img style="WIDTH: 284px; HEIGHT: 161px" alt="SimplePaletteQuantizer/OctreeSearch.png" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/OctreeSearch.png" complete="true" border="0" height="161" hspace="0" width="284"> 

<h2>Dithering <img style="WIDTH: 32px; HEIGHT: 32px" alt="SimplePaletteQuantizer/New.png" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/New.png" complete="true" height="32" width="32"> </h2>

<p>The dithering process is based on the fact, that human eye detects 
changes in the brightness more sensitively. So there is a need to reduce
 the effects of quantization on smoothness of final image brightness, 
but while still trying to keep its features (such as the edges, those 
are supposed to be sharp transition of brightness).</p>
<p>In <strong>version 5.0</strong> a new interface was introduce to 
handle the dithering functionality. So let's briefly check out what it 
contains. The main method is <code>ProcessPixel</code> which takes a 
source pixel, performs a dithering routine on it's color, and then 
returns a dithered (target) pixel. Then there is a flag property <code>IsInplace</code>,
 this flag determines whether the dithering processing occurs on 
processed pixel only. Therefore the pixel can be process within the 
quantization pass (much faster). Method <code>Prepare()</code> serves to prepare the ditherer before the processing, and <code>Finish()</code> to clean-up after.</p>

<div class="pre-action-link" id="premain450393" style="width:100%;display:block;"><span id="prehide450393" onclick="processCodeBlocks.togglePre(450393);">Hide</span>  &nbsp; <span onclick="return processCodeBlocks.copyCode(450393);">Copy Code</span></div><pre style="margin-top: 0px;" id="pre450393" lang="cs">public interface IColorDitherer
{
    Boolean IsInplace { get; }
    void Prepare(IColorQuantizer quantizer, Int32 colorCount, ImageBuffer sourceBuffer, ImageBuffer targetBuffer);
    Boolean ProcessPixel(Pixel sourcePixel, Pixel targetPixel);
    void Finish();
}</pre>

<p>There many methods for dithering, a brief list of some of the dithering methods included in this article are:</p>

<h3>Ordered dithering</h3>

<p>This type of dithering only processes the actual pixel without 
knowledge other changes in image (by dithering other pixels). This 
somewhat limits the ability, but still this methods produces image we're
 used to.</p>
<p>Read more on Wikipedia: <a href="http://en.wikipedia.org/wiki/Ordered_dithering">Ordered dithering</a></p>

<table><tbody><tr>
<td><h4>Original</h4></td>
<td><h4>Bayer</h4></td>
<td><h4>Clustered-dot</h4></td>
</tr><tr>
<td><img style="WIDTH: 200px; HEIGHT: 239" alt="SimplePaletteQuantizer/Original.png" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/Original.png" complete="true" border="0" height="239" hspace="0" width="200"> </td>
<td><img style="WIDTH: 200px; HEIGHT: 239" alt="SimplePaletteQuantizer/Bayer.png" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/Bayer.png" complete="true" border="0" height="239" hspace="0" width="200"> </td>
<td><img style="WIDTH: 200px; HEIGHT: 239px" alt="SimplePaletteQuantizer/ClusteredDot.png" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/ClusteredDot.png" complete="true" border="0" height="239" hspace="0" width="200"> </td>
</tr></tbody></table>

<h3>Error-diffusion dithering</h3>

<p>This method processes the pixels, and ditributes the accumulated 
error (difference) onto its neighbours. It depends on the order in which
 the pixels are processed.</p>
<p>Read more on Wikipedia: <a href="http://en.wikipedia.org/wiki/Error_diffusion">Error diffusion</a></p>

<table><tbody><tr>
<td><h4>Original</h4></td>
<td><h4>Floyd-Steinberg</h4></td>
<td><h4>Aktinson</h4></td>
<td><h4>Jarvis-Judice-Ninke</h4></td>
</tr><tr>
<td><img style="WIDTH: 200px; HEIGHT: 239" alt="SimplePaletteQuantizer/Original.png" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/Original.png" complete="true" border="0" height="239" hspace="0" width="200"> </td>
<td><img style="WIDTH: 200px; HEIGHT: 239" alt="SimplePaletteQuantizer/FloydSteinberg.png" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/FloydSteinberg.png" complete="true" border="0" height="239" hspace="0" width="200"> </td>
<td><img style="WIDTH: 200px; HEIGHT: 239px" alt="SimplePaletteQuantizer/Atkinson.png" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/Atkinson.png" complete="true" border="0" height="239" hspace="0" width="200"> </td>
<td><img style="WIDTH: 200px; HEIGHT: 239px" alt="SimplePaletteQuantizer/JarvisJudiceNinke.png" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/JarvisJudiceNinke.png" complete="true" border="0" height="239" hspace="0" width="200"> </td>
</tr></tbody></table>

<h2>Screenshots Gallery<img style="WIDTH: 32px; HEIGHT: 32px" alt="SimplePaletteQuantizer/New.png" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/New.png" complete="true" height="32" width="32"> </h2>

<p>These are just few images to show the new capabilities of the utility inside, and also some new statistics.<br>You
 can now choose one from five methods of color quantization to compare 
the algorithms. Also you may select a bit-depth to which the source 
image will be reduced. </p>
<img style="WIDTH: 640px; HEIGHT: 480px" alt="SimplePaletteQuantizer/SimplePaletteQuantizer1v2.png" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/SimplePaletteQuantizer1v2.png" complete="true" border="0" height="480" hspace="0" width="640"> 
<p>There's another selection on the left side, which allow you to 
preview the source image as it'd look like when saved as a GIF 
(especially for Roey C), and some projected size statistics, how big 
would the quantized image be when saved as a GIF or PNG. </p>
<img style="WIDTH: 640px; HEIGHT: 480px" alt="SimplePaletteQuantizer/SimplePaletteQuantizer2v2.png" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/SimplePaletteQuantizer2v2.png" complete="true" border="0" height="480" hspace="0" width="640"> 
<p>In <strong>version 4.0</strong>, some new selections were added. 
First, you can now choose for some quantizers a type of color-cache to 
be used. In previous versions, only a slow Euclidean distance method was
 available. Now you can choose from two other faster methods. </p>
<img style="WIDTH: 640px; HEIGHT: 548px" alt="SimplePaletteQuantizer/SimplePaletteQuantizer3v4.png" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/SimplePaletteQuantizer3v4.png" complete="true" border="0" height="548" hspace="0" width="640"> 
<p>Also in <strong>version 4.0</strong>, support for color models for 
some color caches was added. It doesn't make much more difference, but 
it's there to be further optimized (I'm lazy). I added the support, then
 I noticed that it doesn't really make a difference, but I left it 
there. </p>
<img style="WIDTH: 640px; HEIGHT: 548px" alt="SimplePaletteQuantizer/SimplePaletteQuantizer4v4.png" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/SimplePaletteQuantizer4v4.png" complete="true" border="0" height="548" hspace="0" width="640"> 
<p><strong>Version 5.0</strong> brought the support for parallel 
processing which really takes advantage of multi-core processors, and 
allows to use full speed potential.</p>
<img style="WIDTH: 640px; HEIGHT: 548px" alt="SimplePaletteQuantizer/SimplePaletteQuantizer5v5.png" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/SimplePaletteQuantizer5v5.png" complete="true" border="0" height="548" hspace="0" width="640"> 
<p>The <strong>Version 5.0</strong> also contains a support for 
dithering. This can lead to potential improvement of color reduction 
quality (it can also lead to worse quality though).</p>
<img style="WIDTH: 640px; HEIGHT: 548px" alt="SimplePaletteQuantizer/SimplePaletteQuantizer6v5.png" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/SimplePaletteQuantizer6v5.png" complete="true" border="0" height="548" hspace="0" width="640"> 

<h2>Feedback</h2>

<p>Feel free to ask anything in the forum below, as usual. I'm working 
on some bigger projects at the moment, so I'll be posting another 
article really soon. This quantizer will probably be a part of it, even 
though a non-essential part. </p>

<h2>Related Articles</h2>

<ul>
<li><a href="http://www.codeproject.com/KB/graphics/ImagePixelEnumerator.aspx">Image per pixel enumeration, pixel format conversion and more</a> </li>
</ul>

<h2>Change Log</h2>

<h3>Version 5.0</h3>

<ul>
<li>New alogrithm included: Optimal Palette Quantizer (ok it's a kinda cheating, but I wanted to add some new method).</li>
<li>All the graphics routines are rewritten, and optimized. Now contains direct pixel (regardless the depth) access.</li>
<li>Support for parallel processing was added. This leads to a speed-up (depends on processor core count).</li>
<li>Because dithering methods were metioned few times in comment section. Few dithering methods are now added.</li>
<li>Faster random numbers (credit goes to <a href="http://www.codeproject.com/script/Membership/View.aspx?mid=453625">colgreen</a>), because speed matters here, randomness not as much.</li>
<li>Other general speed-ups like early palette detection (less than 
needed colors), avoiding floats, Color (24 bytes!) when possible.</li>
<li>Color count detection fixed for all the methods.</li>
</ul>

<h3>Version 4.0</h3>

<ul>
<li>Two new algorithms included: Wu's Color Quantizer, and NeuQuant neural network based quantizer </li>
<li>General optimization profiling speed-up about 2x the original speed </li>
<li>The pixel enumeration now supports in-memory version, this should bring some speed up in some cases </li>
<li>Some quantizers now support an interchangeable color cache. Speed-up is about 2-3x (up-to 5-6x in some cases) </li>
<li>Repaired fatal flaw in processing indexed images (<code>Image.Palette</code>!), this increases speed for indexed images up-to 100x </li>
<li>New color cache concept, to allow for faster then slow Euclidean nearest color </li>
<li>Some color caches also include option for color models </li>
<li>The utility can now load and process all the pixel formats (even indexed ones) </li>
<li>The utility now displays image filename when opened </li>
<li><strong>Note:</strong> Testing image 3072 x 2304 (169220 colors) now takes 3.5s (with HSL method + Octree search) on my CPU </li>
<li><strong>Note:</strong> Image 512 x 512 (155774 colors) takes 0.5s. So it scales well with size. Basically Dictionary (C#) speed issue from now on </li>
<li><strong>Note:</strong> Don't forget to test outside Visual Studio, and built in Release mode </li>
</ul>

<h3>Version 3.0</h3>

<ul>
<li>The Octree quantizer now supports all the color counts (as requested by Matt Perdeck) </li>
<li>Quantized image is now stored in an optimal pixel format (auto-detection) </li>
<li>NRMSD (normalized root-mean-square deviation) can now be calculated </li>
<li>Few minor fixes, and speedups </li>
</ul>

<h3>Version 2.0</h3>

<ul>
<li>Various speed optimizations (thanks to Andrew Rissing) </li>
<li>Support for alpha-blending included </li>
<li>Many quantization algorithms included </li>
<li>Support for semi-transparent images added </li>
<li>Projected statistics added (for Roey C) </li>
<li>Quantization process duration is now measured </li>
<li>Code comments coverage increased </li>
<li>Interface slightly changed, to support more palette indexes (Andrew Rissing) </li>
</ul>

<h3>Version 1.0</h3>

<ul>
<li>Initial spontaneous version released </li>
</ul>

<h2>History</h2>

<ul>
<li>2012-07-28: Version 5.0 published </li>
<li>2011-07-04: The section <em>Color caches</em> added </li>
<li>2011-07-04: Version 4.0 published </li>
<li>2011-07-02: Version 3.0 published </li>
<li>2010-03-26: Version 2.0 published </li>
<li>2010-03-19: The section <em>Color quantization explained</em> added </li>
<li>2010-03-18: The section <em>The competit.. the alternatives out there</em> added </li>
<li>2010-03-18: The initial article was posted </li>
</ul>


						</div>
						

						<div class="float-right" style="margin:20px 0 0 10px;border:1px solid #ccc">
						<div class="msg-300x250" data-format="300x250" data-type="ad" data-publisher="lqm.codeproject.site" data-zone="General-Programming/Algorithms-Recipes/Algorithms" data-country="IN" data-loadonview="true" data-tags="C#3.0, .NET3.5, VS2008, C#, Windows, .NET, Visual-Studio, Dev, Beginner, Intermediate,rating4.5"></div>
						</div>
                        
                        
						
						<h2>License</h2>
						<div id="LicenseTerms"><p>This article, along with any associated source code and files, is licensed under <a href="http://www.codeproject.com/info/cpol10.aspx" rel="license">The Code Project Open License (CPOL)</a></p></div>
						

                        
						<h2>Share</h2>
				        <div class="share-list">
					        



<!-- Buttons start here. Copy this ul to your document. -->
<ul class="rrssb-buttons clearfix rrssb-1">
    <li data-size="34" data-initwidth="16.666666666666668" style="width: calc(50% - 84px);" class="email">

        <a href="mailto:?subject=A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject&amp;body=Here%27s%20an%20interesting%20article%20on%20for%20you%20on%20codeproject.com%0a%0ahttp%3a%2f%2fwww.codeproject.com%2fKB%2frecipes%2fSimplePaletteQuantizer.aspx%3fdisplay%3dMobile%0a">
            <span class="icon">
                <svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" width="28px" height="28px" viewBox="0 0 28 28" enable-background="new 0 0 28 28" xml:space="preserve"><g>
                        <path d="M20.111 26.147c-2.336 1.051-4.361 1.401-7.125 1.401c-6.462 0-12.146-4.633-12.146-12.265 
                            c0-7.94 5.762-14.833 14.561-14.833c6.853 0 11.8 4.7 11.8 11.252c0 5.684-3.194 9.265-7.399 
                            9.3 c-1.829 0-3.153-0.934-3.347-2.997h-0.077c-1.208 1.986-2.96 2.997-5.023 2.997c-2.532 
                            0-4.361-1.868-4.361-5.062 c0-4.749 3.504-9.071 9.111-9.071c1.713 0 3.7 0.4 4.6 0.973l-1.169 
                            7.203c-0.388 2.298-0.116 3.3 1 3.4 c1.673 0 3.773-2.102 3.773-6.58c0-5.061-3.27-8.994-9.303-8.994c-5.957 
                            0-11.175 4.673-11.175 12.1 c0 6.5 4.2 10.2 10 10.201c1.986 0 4.089-0.43 5.646-1.245L20.111 
                            26.147z M16.646 10.1 c-0.311-0.078-0.701-0.155-1.207-0.155c-2.571 0-4.595 2.53-4.595 5.529c0 
                            1.5 0.7 2.4 1.9 2.4 c1.441 0 2.959-1.828 3.311-4.087L16.646 10.068z"></path></g>
                </svg>
            </span>
            <span class="text">email</span>
        </a>
    </li>
    <li data-size="45" data-initwidth="16.666666666666668" style="width: calc(50% - 84px);" class="twitter">
        <!-- Replace href with your Meta and URL information  -->
        <a href="http://twitter.com/home?status=A+Simple+-+Yet+Quite+Powerful+-+Palette+Quantizer+in+C%23+-+CodeProject+-+http%3a%2f%2fwww.codeproject.com%2fKB%2frecipes%2fSimplePaletteQuantizer.aspx%3fdisplay%3dMobile" class="popup">
            <span class="icon">
                <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="28px" height="28px" viewBox="0 0 28 28" enable-background="new 0 0 28 28" xml:space="preserve">
                <path d="M24.253,8.756C24.689,17.08,18.297,24.182,9.97,24.62c-3.122,0.162-6.219-0.646-8.861-2.32
                    c2.703,0.179,5.376-0.648,7.508-2.321c-2.072-0.247-3.818-1.661-4.489-3.638c0.801,0.128,1.62,0.076,2.399-0.155
                    C4.045,15.72,2.215,13.6,2.115,11.077c0.688,0.275,1.426,0.407,2.168,0.386c-2.135-1.65-2.729-4.621-1.394-6.965
                    C5.575,7.816,9.54,9.84,13.803,10.071c-0.842-2.739,0.694-5.64,3.434-6.482c2.018-0.623,4.212,0.044,5.546,1.683
                    c1.186-0.213,2.318-0.662,3.329-1.317c-0.385,1.256-1.247,2.312-2.399,2.942c1.048-0.106,2.069-0.394,3.019-0.851
                    C26.275,7.229,25.39,8.196,24.253,8.756z"></path>
                </svg>
            </span>
            <span class="text">twitter</span>
        </a>
    </li>

    <li data-size="57" data-initwidth="16.666666666666668" style="width: 42px;" class="facebook small">
        <!-- Replace with your URL. For best results, make sure you page has the proper FB Open Graph tags in header: 
        https://developers.facebook.com/docs/opengraph/howtos/maximizing-distribution-media-content/ -->
        <a href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2fwww.codeproject.com%2fKB%2frecipes%2fSimplePaletteQuantizer.aspx%3fdisplay%3dMobile" class="popup">
            <span class="icon">
                <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="28px" height="28px" viewBox="0 0 28 28" enable-background="new 0 0 28 28" xml:space="preserve">
                    <path d="M27.825,4.783c0-2.427-2.182-4.608-4.608-4.608H4.783c-2.422,0-4.608,2.182-4.608,4.608v18.434
                        c0,2.427,2.181,4.608,4.608,4.608H14V17.379h-3.379v-4.608H14v-1.795c0-3.089,2.335-5.885,5.192-5.885h3.718v4.608h-3.726
                        c-0.408,0-0.884,0.492-0.884,1.236v1.836h4.609v4.608h-4.609v10.446h4.916c2.422,0,4.608-2.188,4.608-4.608V4.783z"></path>
                </svg>
            </span>
            <span class="text">facebook</span>
        </a>
    </li>
    
    <li data-size="51" data-initwidth="16.666666666666668" style="width: 42px;" class="linkedin small">
        <!-- Replace href with your meta and URL information -->
        <a href="http://www.linkedin.com/shareArticle?mini=true&amp;url=http%3a%2f%2fwww.codeproject.com%2fKB%2frecipes%2fSimplePaletteQuantizer.aspx%3fdisplay%3dMobile&amp;title=A+Simple+-+Yet+Quite+Powerful+-+Palette+Quantizer+in+C%23+-+CodeProject&amp;summary=&amp;source=codeproject.com" class="popup">
            <span class="icon">
                <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="28px" height="28px" viewBox="0 0 28 28" enable-background="new 0 0 28 28" xml:space="preserve">
                    <path d="M25.424,15.887v8.447h-4.896v-7.882c0-1.979-0.709-3.331-2.48-3.331c-1.354,0-2.158,0.911-2.514,1.803
                        c-0.129,0.315-0.162,0.753-0.162,1.194v8.216h-4.899c0,0,0.066-13.349,0-14.731h4.899v2.088c-0.01,0.016-0.023,0.032-0.033,0.048
                        h0.033V11.69c0.65-1.002,1.812-2.435,4.414-2.435C23.008,9.254,25.424,11.361,25.424,15.887z M5.348,2.501
                        c-1.676,0-2.772,1.092-2.772,2.539c0,1.421,1.066,2.538,2.717,2.546h0.032c1.709,0,2.771-1.132,2.771-2.546
                        C8.054,3.593,7.019,2.501,5.343,2.501H5.348z M2.867,24.334h4.897V9.603H2.867V24.334z"></path>
                </svg>
            </span>
            <span class="text">linkedin</span>
        </a>
    </li>
    <li data-size="38" data-initwidth="16.666666666666668" style="width: 42px;" class="reddit small">
        <a href="http://www.reddit.com/submit?url=http%3a%2f%2fwww.codeproject.com%2fKB%2frecipes%2fSimplePaletteQuantizer.aspx%3fdisplay%3dMobile&amp;title=A+Simple+-+Yet+Quite+Powerful+-+Palette+Quantizer+in+C%23+-+CodeProject">
            <span class="icon">
                <svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" width="28px" height="28px" viewBox="0 0 28 28" enable-background="new 0 0 28 28" xml:space="preserve"><g>
                <path d="M11.794 15.316c0-1.029-0.835-1.895-1.866-1.895c-1.03 0-1.893 0.865-1.893 1.895s0.863 1.9 1.9 1.9 C10.958 17.2 11.8 16.3 11.8 15.316z"></path>
                <path d="M18.1 13.422c-1.029 0-1.895 0.864-1.895 1.895c0 1 0.9 1.9 1.9 1.865c1.031 0 1.869-0.836 1.869-1.865 C19.969 14.3 19.1 13.4 18.1 13.422z"></path>
                <path d="M17.527 19.791c-0.678 0.678-1.826 1.006-3.514 1.006c-0.004 0-0.009 0-0.014 0c-0.004 0-0.01 0-0.015 0 
                c-1.686 0-2.834-0.328-3.51-1.005c-0.264-0.265-0.693-0.265-0.958 0c-0.264 0.265-0.264 0.7 0 1 c0.943 0.9 2.4 1.4 
                4.5 1.402c0.005 0 0 0 0 0c0.005 0 0 0 0 0c2.066 0 3.527-0.459 4.47-1.402 c0.265-0.264 0.265-0.693 0.002-0.958C18.221 
                19.5 17.8 19.5 17.5 19.791z"></path><path d="M27.707 13.267c0-1.785-1.453-3.237-3.236-3.237c-0.793 0-1.518 0.287-2.082 
                0.761c-2.039-1.295-4.646-2.069-7.438-2.219 l1.483-4.691l4.062 0.956c0.071 1.4 1.3 2.6 2.7 2.555c1.488 0 2.695-1.208 
                2.695-2.695C25.881 3.2 24.7 2 23.2 2 c-1.059 0-1.979 0.616-2.42 1.508l-4.633-1.091c-0.344-0.081-0.693 0.118-0.803 
                0.455l-1.793 5.7 C10.548 8.6 7.7 9.4 5.6 10.75C5.006 10.3 4.3 10 3.5 10.029c-1.785 0-3.237 1.452-3.237 3.2 c0 1.1 0.6 
                2.1 1.4 2.69c-0.04 0.272-0.061 0.551-0.061 0.831c0 2.3 1.3 4.4 3.7 5.9 c2.299 1.5 5.3 2.3 8.6 2.325c3.228 0 6.271-0.825 
                8.571-2.325c2.387-1.56 3.7-3.66 3.7-5.917 c0-0.26-0.016-0.514-0.051-0.768C27.088 15.5 27.7 14.4 27.7 13.267z M23.186 
                3.355c0.74 0 1.3 0.6 1.3 1.3 c0 0.738-0.6 1.34-1.34 1.34s-1.342-0.602-1.342-1.34C21.844 4 22.4 3.4 23.2 3.355z M1.648 
                13.3 c0-1.038 0.844-1.882 1.882-1.882c0.31 0 0.6 0.1 0.9 0.209c-1.049 0.868-1.813 1.861-2.26 2.9 C1.832 14.2 1.6 13.8 1.6 
                13.267z M21.773 21.57c-2.082 1.357-4.863 2.105-7.831 2.105c-2.967 0-5.747-0.748-7.828-2.105 
                c-1.991-1.301-3.088-3-3.088-4.782c0-1.784 1.097-3.484 3.088-4.784c2.081-1.358 4.861-2.106 7.828-2.106 c2.967 0 5.7 
                0.7 7.8 2.106c1.99 1.3 3.1 3 3.1 4.784C24.859 18.6 23.8 20.3 21.8 21.57z M25.787 14.6 
                c-0.432-1.084-1.191-2.095-2.244-2.977c0.273-0.156 0.59-0.245 0.928-0.245c1.035 0 1.9 0.8 1.9 1.9 
                C26.354 13.8 26.1 14.3 25.8 14.605z"></path></g></svg>
            </span>
            <span class="text">reddit</span>
        </a>
    </li>
    <li data-size="52" data-initwidth="16.666666666666668" style="width: 42px;" class="googleplus small">
        <!-- Replace href with your meta and URL information.  -->
        <a href="https://plus.google.com/share?url=http%3a%2f%2fwww.codeproject.com%2fKB%2frecipes%2fSimplePaletteQuantizer.aspx%3fdisplay%3dMobile" class="popup">
            <span class="icon">
                <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="28px" height="28px" viewBox="0 0 28 28" enable-background="new 0 0 28 28" xml:space="preserve">
                    <g>
                        <g>
                            <path d="M14.703,15.854l-1.219-0.948c-0.372-0.308-0.88-0.715-0.88-1.459c0-0.748,0.508-1.223,0.95-1.663
                                c1.42-1.119,2.839-2.309,2.839-4.817c0-2.58-1.621-3.937-2.399-4.581h2.097l2.202-1.383h-6.67c-1.83,0-4.467,0.433-6.398,2.027
                                C3.768,4.287,3.059,6.018,3.059,7.576c0,2.634,2.022,5.328,5.604,5.328c0.339,0,0.71-0.033,1.083-0.068
                                c-0.167,0.408-0.336,0.748-0.336,1.324c0,1.04,0.551,1.685,1.011,2.297c-1.524,0.104-4.37,0.273-6.467,1.562
                                c-1.998,1.188-2.605,2.916-2.605,4.137c0,2.512,2.358,4.84,7.289,4.84c5.822,0,8.904-3.223,8.904-6.41
                                c0.008-2.327-1.359-3.489-2.829-4.731H14.703z M10.269,11.951c-2.912,0-4.231-3.765-4.231-6.037c0-0.884,0.168-1.797,0.744-2.511
                                c0.543-0.679,1.489-1.12,2.372-1.12c2.807,0,4.256,3.798,4.256,6.242c0,0.612-0.067,1.694-0.845,2.478
                                c-0.537,0.55-1.438,0.948-2.295,0.951V11.951z M10.302,25.609c-3.621,0-5.957-1.732-5.957-4.142c0-2.408,2.165-3.223,2.911-3.492
                                c1.421-0.479,3.25-0.545,3.555-0.545c0.338,0,0.52,0,0.766,0.034c2.574,1.838,3.706,2.757,3.706,4.479
                                c-0.002,2.073-1.736,3.665-4.982,3.649L10.302,25.609z"></path>
                            <polygon points="23.254,11.89 23.254,8.521 21.569,8.521 21.569,11.89 18.202,11.89 18.202,13.604 21.569,13.604 21.569,17.004
                                23.254,17.004 23.254,13.604 26.653,13.604 26.653,11.89      "></polygon>
                        </g>
                    </g>
                </svg>
            </span>
            <span class="text">google+</span>
        </a>
    </li>
    
</ul>
<!-- Buttons end here -->

				        </div> 
    			        


						
						<h2 id="ctl00_AboutHeading">About the Author</h2>
						    


<div class="author-wrapper">

    <div class="pic-wrapper"> 
        <img id="ctl00_AboutAuthorRptr_ctl00_AboutAuthor_memberPhoto" class="profile-pic" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/4503976d-c3dc-4773-967f-9de04a1c5b8b.png" style="border-width:0px;transform:rotate(1deg);">

    </div>

    <div class="container-member">  
        <b><a id="ctl00_AboutAuthorRptr_ctl00_AboutAuthor_memberProfileLink" class="author" href="http://www.codeproject.com/Members/Smart-K8">Smart K8</a></b>

        <table class="extended">
        <tbody><tr>
            <td rowspan="2" nowrap="nowrap" valign="middle">
            
            </td>
            <td width="100%">
                <div class="company">
                    <span id="ctl00_AboutAuthorRptr_ctl00_AboutAuthor_memberJobTitle">Software Developer</span>
	                <span id="ctl00_AboutAuthorRptr_ctl00_AboutAuthor_memberCompany"></span>
                </div>
            </td>
        </tr>
        <tr>
            <td>
                <span id="ctl00_AboutAuthorRptr_ctl00_AboutAuthor_memberLocation">Czech Republic <img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/CZ.gif" alt="Czech Republic" height="11px" width="16px"></span>
            </td>
        </tr>
        </tbody></table>
    </div>

    <div class="description">
        Contacts: EMAIL - smartk8@gmail.com

        
    </div>

</div><br>
						
						

						<div class="clearfix"></div>

						<div style="padding-top:8px">
							
						</div>

					

				    
					</form>

				</div>

				
				<div class="bottom-promo"> 
				    <div class="msg-728x90" data-format="728x90" data-type="ad" data-publisher="lqm.codeproject.site" data-zone="General-Programming/Algorithms-Recipes/Algorithms" data-country="IN" data-loadonview="true" data-tags="C#3.0, .NET3.5, VS2008, C#, Windows, .NET, Visual-Studio, Dev, Beginner, Intermediate,rating4.5,pos_bottom"></div>
				</div>
				

                
        <h2 id="ctl00_AlsoRead_RelatedResults_ctl00_Header" class="also-read">You may also be interested in...</h2>
        <table class="spaced content-list also-read">
    
	    <tbody><tr>
        <td class="content-list-item" valign="top" width="50%">
            <div class="thumbnail"><a id="ctl00_AlsoRead_RelatedResults_ctl01_Thumbnail" href="http://www.codeproject.com/Articles/1086361/Java-for-Bluetooth-LE-applications"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/article100x80.png" alt="" style="border-width:0px;"></a></div>
            <div class="text">
                <div class="title"><a id="ctl00_AlsoRead_RelatedResults_ctl01_Link" href="http://www.codeproject.com/Articles/1086361/Java-for-Bluetooth-LE-applications">Java for Bluetooth LE applications </a></div>
                
            </div>
        </td>
	
        <td class="content-list-item" valign="top" width="50%">
            <div class="thumbnail"><a id="ctl00_AlsoRead_RelatedResults_ctl02_Thumbnail" href="http://www.codeproject.com/Articles/1086365/The-Past-Present-and-Future-of-IoT"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/Thumb-1086365.jpg" alt="" style="border-width:0px;"></a></div>
            <div class="text">
                <div class="title"><a id="ctl00_AlsoRead_RelatedResults_ctl02_Link" href="http://www.codeproject.com/Articles/1086365/The-Past-Present-and-Future-of-IoT">The Past, Present, and Future of IoT</a></div>
                
            </div>
        </td>
	    </tr>
	
	    <tr>
        <td class="content-list-item" valign="top" width="50%">
            <div class="thumbnail"><a id="ctl00_AlsoRead_RelatedResults_ctl03_Thumbnail" href="http://www.codeproject.com/Articles/1085643/Looking-Ahead-to-Csharp-with-Mads-Torgersen"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/article100x80.png" alt="" style="border-width:0px;"></a></div>
            <div class="text">
                <div class="title"><a id="ctl00_AlsoRead_RelatedResults_ctl03_Link" href="http://www.codeproject.com/Articles/1085643/Looking-Ahead-to-Csharp-with-Mads-Torgersen">Looking Ahead to C# 7 with Mads Torgersen</a></div>
                
            </div>
        </td>
	
        <td class="content-list-item" valign="top" width="50%">
            <div class="thumbnail"><a id="ctl00_AlsoRead_RelatedResults_ctl04_Thumbnail" href="http://www.codeproject.com/Articles/1086350/Case-Study-Build-a-Smart-Conference-System-by-Enab"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/Thumb-1086350.png" alt="" style="border-width:0px;"></a></div>
            <div class="text">
                <div class="title"><a id="ctl00_AlsoRead_RelatedResults_ctl04_Link" href="http://www.codeproject.com/Articles/1086350/Case-Study-Build-a-Smart-Conference-System-by-Enab">Case Study：Build a Smart Conference System by Enabling ZigBee on the Intel® Edison Platform</a></div>
                
            </div>
        </td>
	    </tr>
	
	    <tr>
        <td class="content-list-item" valign="top" width="50%">
            <div class="thumbnail"><a id="ctl00_AlsoRead_RelatedResults_ctl05_Thumbnail" href="http://www.codeproject.com/Articles/1085650/Hack-Grunt-to-Make-Your-Website-Awesome"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/article100x80.png" alt="" style="border-width:0px;"></a></div>
            <div class="text">
                <div class="title"><a id="ctl00_AlsoRead_RelatedResults_ctl05_Link" href="http://www.codeproject.com/Articles/1085650/Hack-Grunt-to-Make-Your-Website-Awesome">Hack Grunt to Make Your Website Awesome</a></div>
                
            </div>
        </td>
	
        <td class="content-list-item" valign="top" width="50%">
            <div class="thumbnail"><a id="ctl00_AlsoRead_RelatedResults_ctl06_Thumbnail" href="http://www.codeproject.com/Articles/23/SAPrefs-Netscape-like-Preferences-Dialog"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/Thumb-23.gif" alt="" style="border-width:0px;"></a></div>
            <div class="text">
                <div class="title"><a id="ctl00_AlsoRead_RelatedResults_ctl06_Link" href="http://www.codeproject.com/Articles/23/SAPrefs-Netscape-like-Preferences-Dialog">SAPrefs - Netscape-like Preferences Dialog</a></div>
                
            </div>
        </td>
	    </tr>
	
		</tbody></table>
	



				
				

					<h2>Comments and Discussions</h2>
					<a class="float-left" name="_comments" id="_comments">&nbsp;</a><div id="_MessageBoardctl00_MessageBoard" onclick="return SwitchMessage(event, null)">
<table id="ForumTable" class="forum relaxed" cellpadding="0" cellspacing="0">
<tbody><tr>
<td><table border="0" cellpadding="3px" cellspacing="0" width="100%">
<tbody><tr class="header1">
<td colspan="2" style="white-space:nowrap;"><div class="container">
<div class="button new-message compose float-left">
<a rel="nofollow" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx" name="Frm_HoverNL" target="_top">Add a Comment or Question&nbsp;</a>
</div><div class="admin-links float-left align-middle" style="width:60px;line-height:24px;margin-top:4px;">
&nbsp;<a href="http://www.codeproject.com/KB/FAQs/MessageBoardsFAQ.aspx"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/help_sm.png" title="FAQ" alt="FAQ" style="border-width:0;width:16px;height:16px;vertical-align:middle;"></a>
</div><div class="float-right">
<form action="/Search.aspx?sbo=fm" method="get" class="searchbar">
<input name="fid" value="1565004" type="hidden"><input name="sbo" value="fm" type="hidden"><b>Search</b><input class="search" name="qf" type="search">&nbsp;<input value="Go" class="button" type="submit">
</form>
</div>
</div></td>
</tr><tr class="header2">
<td></td><td style="width:100%;"><div style="text-align:right;">
<form action="/script/Forums/SetOptions.aspx?display=Mobile&amp;floc=%2fKB%2frecipes%2fSimplePaletteQuantizer.aspx&amp;fid=1565004&amp;df=90&amp;mpp=25&amp;prof=False&amp;sort=Position&amp;view=Normal&amp;spc=Relaxed" method="get" style="margin:0;padding:0;">
<input name="fid" value="1565004" type="hidden"><input name="currentQS" value="?display=Mobile&amp;floc=%2fKB%2frecipes%2fSimplePaletteQuantizer.aspx&amp;fid=1565004&amp;df=90&amp;mpp=25&amp;prof=False&amp;sort=Position&amp;view=Normal&amp;spc=Relaxed" type="hidden"><input name="floc" value="/KB/recipes/SimplePaletteQuantizer.aspx" type="hidden">Per page<select size="1" class="dropdown" name="mpp">
<option value="10">10</option><option selected="selected" value="25">25</option><option value="50">50</option>
</select>&nbsp;&nbsp;&nbsp;<input value="Go" name="SetOpt" class="button" type="submit">
</form>
</div></td>
</tr>
</tbody></table></td>
</tr><tr>
<td><a name="xx0xx"></a><table border="0" cellpadding="2px" cellspacing="0" width="100%">
<tbody><tr class="navbar">
<td></td><td style="text-align:right;white-space:nowrap;"><span class="nav-link disabled">First</span> <span class="nav-link disabled">Prev</span><a class="nav-link" name="Frm_HoverNL" href="http://www.codeproject.com/KB/recipes/SimplePaletteQuantizer.aspx?display=Mobile&amp;fid=1565004&amp;df=90&amp;mpp=25&amp;prof=False&amp;sort=Position&amp;view=Normal&amp;spc=Relaxed&amp;fr=26#xx0xx">Next</a></td>
</tr>
</tbody></table></td>
</tr><tr>
<td><table class="fixed-layout blank-background" border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/t_002.gif" alt="" border="0" height="5px" width="1px"></td>
</tr><tr id="F5160581_h0" class="header hover-row root">
<td class="subject-line normal " width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td class="indent" width="20px"><a name="xx5160581xx"></a><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/msg_bug.gif" alt="Bug" align="top" height="16px" width="16px"></td><td class="subject hover-container"><a class="message-link" name="5160581" parent="0" thread="5160581" href="http://www.codeproject.com/Messages/5160581/A-Bug-for-transparent-Image.aspx">A Bug for transparent Image</a> <a onclick="return Pin(this);" rel="nofollow" href="#" title="Click to pin message"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/pin.png" alt="Pin" align="top" border="0" height="13px" width="13px"></a><div class="mobile-only">
	<span class="author">GISwilson</span><span class="date">15-Nov-15  15:32</span>
</div></td>
</tr>
</tbody></table></td>
</tr><tr id="F5160581_h1" class="content root selected" style="display:none;">
<td class="normal" width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr valign="top">
<td class="indent align-right" style="width:20px;"><div class="voteform vertical" ownerid="7485596" msgid="5160581" votingtype="GoodOrBad">

</div><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/t_002.gif" alt="" height="1px" width="20px"></td><td class="text"><table border="0" cellpadding="0" cellspacing="5px" width="100%">
<tbody><tr>
<td><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td colspan="2">Hi  This project is Great! Thanks very much for sharing~<br>
<br>
I find that It works great excepe one case.That is when the source image
 is a 32bpp image which has the same value(0,0,0,0),all of the 
algorithms show the incorrenct result. The "Uniform" returns the white 
image,and the others returns a color like (255,240,240,240). My need 
result should be zhe still transparent image.<br>
Hope for your answer,Thank you!<br></td>
</tr><tr class="footer" style="vertical-align:top;">
<td><a class="new-message" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=5160581&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=r" title="Reply">Reply</a>·<wbr><a class="nav-link" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=5160581&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=e" title="Email">Email</a>·<wbr><a href="http://www.codeproject.com/KB/recipes/SimplePaletteQuantizer.aspx?display=Mobile&amp;fid=1565004&amp;df=90&amp;mpp=25&amp;sort=Position&amp;spc=Relaxed&amp;tid=5160581" title="View&nbsp;Thread">View&nbsp;Thread</a>·<wbr><a href="http://www.codeproject.com/Messages/5160581/A-Bug-for-transparent-Image.aspx" title="Get permanent link">Permalink</a>·<wbr><a href="http://www.codeproject.com/script/Bookmarks/Add.aspx?obid=5160581&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small" title="Bookmark this post" onclick="return bookmarkMe(0,0,'/script/Bookmarks/Ajax/Add.aspx?obid=5160581&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small',false, this, this);">Bookmark</a></td><td style="text-align:right;"><span id="MVF5160581" data-ref="3_5160581" class="rating-label" style="white-space:nowrap;"></span></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr><tr id="F5160584_h0" class="header hover-row">
<td class="subject-line normal " width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td class="indent" width="29px"><a name="xx5160584xx"></a><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/msg_general.gif" alt="General" align="top" height="16px" width="16px"></td><td class="subject hover-container"><a class="message-link" name="5160584" parent="5160581" thread="5160581" href="http://www.codeproject.com/Messages/5160584/Re-A-Bug-for-transparent-Image.aspx">Re: A Bug for transparent Image</a> <a onclick="return Pin(this);" rel="nofollow" href="#" title="Click to pin message"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/pin.png" alt="Pin" align="top" border="0" height="13px" width="13px"></a><div class="mobile-only">
	<span class="author">Smart K8</span><span class="date">15-Nov-15  15:43</span>
</div></td>
</tr>
</tbody></table></td>
</tr><tr id="F5160584_h1" class="content selected" style="display:none;">
<td class="normal" width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr valign="top">
<td class="indent align-right" style="width:29px;"><div class="voteform vertical" ownerid="1266003" msgid="5160584" votingtype="GoodOrBad">

</div><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/t_002.gif" alt="" height="1px" width="29px"></td><td class="text"><table border="0" cellpadding="0" cellspacing="5px" width="100%">
<tbody><tr>
<td><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td colspan="2"><div class="parent"><a rel="nofollow" onclick="return SwitchMessage(null,5160581);" href="http://www.codeproject.com/Messages/5160581/A-Bug-for-transparent-Image.aspx"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/arrow-up24.png" title="Go to Parent" style="width:16px;height:16px;border:0"></a></div>Hi, the alpha channel removal is by design. Check my answer (few comments below vvv) on question called <a href="http://www.codeproject.com/Messages/4756871/Alpha-support.aspx">Alpha support?</a>. Still the &lt;<b>0,0,0,0</b>&gt; should be black, I'll check it out but feel free to correct the (potential) problem for yourself.<br>
<br>
Update: It is caused by default alpha blending having <code>QuantizationHelper.BackgroundColor = SystemColors.Control</code> (usually &lt;<b>255, 240, 240, 240</b>&gt;). Just change it to whatever you want.<br>
<br>
regards,<br>
Kate<br>
<br><br><div class="modified">modified  15-Nov-15 6:32am.</div><br></td>
</tr><tr class="footer" style="vertical-align:top;">
<td><a class="new-message" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=5160584&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=r" title="Reply">Reply</a>·<wbr><a class="nav-link" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=5160584&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=e" title="Email">Email</a>·<wbr><a href="http://www.codeproject.com/KB/recipes/SimplePaletteQuantizer.aspx?display=Mobile&amp;fid=1565004&amp;df=90&amp;mpp=25&amp;sort=Position&amp;spc=Relaxed&amp;tid=5160581" title="View&nbsp;Thread">View&nbsp;Thread</a>·<wbr><a href="http://www.codeproject.com/Messages/5160584/Re-A-Bug-for-transparent-Image.aspx" title="Get permanent link">Permalink</a>·<wbr><a href="http://www.codeproject.com/script/Bookmarks/Add.aspx?obid=5160584&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small" title="Bookmark this post" onclick="return bookmarkMe(0,0,'/script/Bookmarks/Ajax/Add.aspx?obid=5160584&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small',false, this, this);">Bookmark</a></td><td style="text-align:right;"><span id="MVF5160584" data-ref="3_5160584" class="rating-label" style="white-space:nowrap;"></span></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr><tr id="F5160798_h0" class="header hover-row">
<td class="subject-line normal " width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td class="indent" width="38px"><a name="xx5160798xx"></a><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/msg_general.gif" alt="General" align="top" height="16px" width="16px"></td><td class="subject hover-container"><a class="message-link" name="5160798" parent="5160584" thread="5160581" href="http://www.codeproject.com/Messages/5160798/Re-A-Bug-for-transparent-Image.aspx">Re: A Bug for transparent Image</a> <a onclick="return Pin(this);" rel="nofollow" href="#" title="Click to pin message"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/pin.png" alt="Pin" align="top" border="0" height="13px" width="13px"></a><div class="mobile-only">
	<span class="author">GISwilson</span><span class="date">16-Nov-15  7:32</span>
</div></td>
</tr>
</tbody></table></td>
</tr><tr id="F5160798_h1" class="content selected" style="display:none;">
<td class="normal" width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr valign="top">
<td class="indent align-right" style="width:38px;"><div class="voteform vertical" ownerid="7485596" msgid="5160798" votingtype="GoodOrBad">

</div><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/t_002.gif" alt="" height="1px" width="38px"></td><td class="text"><table border="0" cellpadding="0" cellspacing="5px" width="100%">
<tbody><tr>
<td><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td colspan="2"><div class="parent"><a rel="nofollow" onclick="return SwitchMessage(null,5160584);" href="http://www.codeproject.com/Messages/5160584/Re-A-Bug-for-transparent-Image.aspx"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/arrow-up24.png" title="Go to Parent" style="width:16px;height:16px;border:0"></a></div>Thank you for replying. <br>
I have seen the " Alpha support " discussion. <br>
Since your project still not support the alpha channel, I have to use the nQuant project.<br>
Thank you all the way.<br>
Looking forward to your 6.0 version. <img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/smiley_wink.gif" alt="Wink | ;)" align="top">  <br>
Thank you again.<br></td>
</tr><tr class="footer" style="vertical-align:top;">
<td><a class="new-message" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=5160798&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=r" title="Reply">Reply</a>·<wbr><a class="nav-link" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=5160798&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=e" title="Email">Email</a>·<wbr><a href="http://www.codeproject.com/KB/recipes/SimplePaletteQuantizer.aspx?display=Mobile&amp;fid=1565004&amp;df=90&amp;mpp=25&amp;sort=Position&amp;spc=Relaxed&amp;tid=5160581" title="View&nbsp;Thread">View&nbsp;Thread</a>·<wbr><a href="http://www.codeproject.com/Messages/5160798/Re-A-Bug-for-transparent-Image.aspx" title="Get permanent link">Permalink</a>·<wbr><a href="http://www.codeproject.com/script/Bookmarks/Add.aspx?obid=5160798&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small" title="Bookmark this post" onclick="return bookmarkMe(0,0,'/script/Bookmarks/Ajax/Add.aspx?obid=5160798&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small',false, this, this);">Bookmark</a></td><td style="text-align:right;"><span id="MVF5160798" data-ref="3_5160798" class="rating-label" style="white-space:nowrap;"></span></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr><tr id="F5146112_h0" class="header hover-row root">
<td class="subject-line normal " width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td class="indent" width="20px"><a name="xx5146112xx"></a><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/msg_question.gif" alt="Question" align="top" height="16px" width="16px"></td><td class="subject hover-container"><a class="message-link" name="5146112" parent="0" thread="5146112" href="http://www.codeproject.com/Messages/5146112/How-can-I-use-this-to-process-multiple-input-files.aspx">How can I use this to process multiple input files?</a> <a onclick="return Pin(this);" rel="nofollow" href="#" title="Click to pin message"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/pin.png" alt="Pin" align="top" border="0" height="13px" width="13px"></a><div class="mobile-only">
	<span class="author">ArchCodeAngel</span><span class="date">20-Oct-15  0:36</span>
</div></td>
</tr>
</tbody></table></td>
</tr><tr id="F5146112_h1" class="content root selected" style="display:none;">
<td class="normal" width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr valign="top">
<td class="indent align-right" style="width:20px;"><div class="voteform vertical" ownerid="645081" msgid="5146112" votingtype="GoodOrBad">

</div><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/t_002.gif" alt="" height="1px" width="20px"></td><td class="text"><table border="0" cellpadding="0" cellspacing="5px" width="100%">
<tbody><tr>
<td><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td colspan="2">Greetings!<br>
<br>
Congrats!  One of the best quantization examples out there... I'm 
wondering how to use this to generate a global palette for multiple 
input images (for an animated GIF)...<br>
<br>
Thanks!<br></td>
</tr><tr class="footer" style="vertical-align:top;">
<td><a class="new-message" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=5146112&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=r" title="Reply">Reply</a>·<wbr><a class="nav-link" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=5146112&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=e" title="Email">Email</a>·<wbr><a href="http://www.codeproject.com/KB/recipes/SimplePaletteQuantizer.aspx?display=Mobile&amp;fid=1565004&amp;df=90&amp;mpp=25&amp;sort=Position&amp;spc=Relaxed&amp;tid=5146112" title="View&nbsp;Thread">View&nbsp;Thread</a>·<wbr><a href="http://www.codeproject.com/Messages/5146112/How-can-I-use-this-to-process-multiple-input-files.aspx" title="Get permanent link">Permalink</a>·<wbr><a href="http://www.codeproject.com/script/Bookmarks/Add.aspx?obid=5146112&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small" title="Bookmark this post" onclick="return bookmarkMe(0,0,'/script/Bookmarks/Ajax/Add.aspx?obid=5146112&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small',false, this, this);">Bookmark</a></td><td style="text-align:right;"><span id="MVF5146112" data-ref="3_5146112" class="rating-label" style="white-space:nowrap;"></span></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr><tr id="F5146139_h0" class="header hover-row">
<td class="subject-line normal " width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td class="indent" width="29px"><a name="xx5146139xx"></a><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/msg_answer.gif" alt="Answer" align="top" height="16px" width="16px"></td><td class="subject hover-container"><a class="message-link" name="5146139" parent="5146112" thread="5146112" href="http://www.codeproject.com/Messages/5146139/Re-How-can-I-use-this-to-process-multiple-input-fi.aspx">Re: How can I use this to process multiple input files?</a> <a onclick="return Pin(this);" rel="nofollow" href="#" title="Click to pin message"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/pin.png" alt="Pin" align="top" border="0" height="13px" width="13px"></a><div class="mobile-only">
	<span class="author">Smart K8</span><span class="date">20-Oct-15  1:21</span>
</div></td>
</tr>
</tbody></table></td>
</tr><tr id="F5146139_h1" class="content selected" style="display:none;">
<td class="normal" width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr valign="top">
<td class="indent align-right" style="width:29px;"><div class="voteform vertical" ownerid="1266003" msgid="5146139" votingtype="GoodOrBad">

</div><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/t_002.gif" alt="" height="1px" width="29px"></td><td class="text"><table border="0" cellpadding="0" cellspacing="5px" width="100%">
<tbody><tr>
<td><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td colspan="2"><div class="parent"><a rel="nofollow" onclick="return SwitchMessage(null,5146112);" href="http://www.codeproject.com/Messages/5146112/How-can-I-use-this-to-process-multiple-input-files.aspx"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/arrow-up24.png" title="Go to Parent" style="width:16px;height:16px;border:0"></a></div>Hi and thanks. You'll need something like this (written ad hoc, it's been years):<br>
&nbsp;
<div class="pre-action-link" id="premain712579" style="width:100%;display:block;"><span id="prehide712579" onclick="processCodeBlocks.togglePre(712579);">Hide</span>  &nbsp; <span id="preShrink712579" onclick="processCodeBlocks.shrinkExpand(712579);">Shrink</span> <img id="preimg712579" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/arrow-up-16.png" style="height:16px;width:16px" onclick="processCodeBlocks.shrinkExpand(712579);">  &nbsp; <span onclick="return processCodeBlocks.copyCode(712579);">Copy Code</span></div><pre id="pre712579" style="margin-top: 0px;" lang="c#">IColorQuantizer quantizer = <span class="code-keyword">new</span> DistinctSelectionQuantizer();
<span class="code-sdkkeyword">Boolean</span> isFirst = <span class="code-keyword">true</span>;
&nbsp;
<span class="code-keyword">foreach</span> (Image image <span class="code-keyword">in</span> imageList) <span class="code-comment">//</span><span class="code-comment"> your list of images here
</span><span class="code-keyword">using</span> (ImageBuffer buffer = <span class="code-keyword">new</span> ImageBuffer(image, ImageLockMode.ReadOnly))
{
  <span class="code-keyword">if</span> (isFirst)
  {
    quantizer.Prepare(buffer);
    isFirst = <span class="code-keyword">false</span>;
  }
&nbsp;
  buffer.ScanColors(quantizer, <span class="code-digit">4</span>); <span class="code-comment">//</span><span class="code-comment"> 4 = parallel task count
</span>}
&nbsp;
List&lt;Color&gt; palette = quantizer.GetPalette(<span class="code-digit">256</span>); <span class="code-comment">//</span><span class="code-comment"> 256 = your desired color count</span></pre>
<br>
It should work for most of the quantizers. The trick is to simply scan the colors of the multiple images to a one <code>IColorQuantizer</code>. You might have some problem with Wu quantizer as it requires dimensions for the <code>Prepare()</code> method. Again not tested so it might not compile, but the idea is there. I think you'll figure the rest out.<br>
<br>
regards,<br>
Kate<br>
<br><br><div class="modified">modified  19-Oct-15 15:01pm.</div><br></td>
</tr><tr class="footer" style="vertical-align:top;">
<td><a class="new-message" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=5146139&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=r" title="Reply">Reply</a>·<wbr><a class="nav-link" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=5146139&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=e" title="Email">Email</a>·<wbr><a href="http://www.codeproject.com/KB/recipes/SimplePaletteQuantizer.aspx?display=Mobile&amp;fid=1565004&amp;df=90&amp;mpp=25&amp;sort=Position&amp;spc=Relaxed&amp;tid=5146112" title="View&nbsp;Thread">View&nbsp;Thread</a>·<wbr><a href="http://www.codeproject.com/Messages/5146139/Re-How-can-I-use-this-to-process-multiple-input-fi.aspx" title="Get permanent link">Permalink</a>·<wbr><a href="http://www.codeproject.com/script/Bookmarks/Add.aspx?obid=5146139&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small" title="Bookmark this post" onclick="return bookmarkMe(0,0,'/script/Bookmarks/Ajax/Add.aspx?obid=5146139&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small',false, this, this);">Bookmark</a></td><td style="text-align:right;"><span id="MVF5146139" data-ref="3_5146139" class="rating-label" style="white-space:nowrap;"></span></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr><tr id="F5147394_h0" class="header hover-row">
<td class="subject-line normal " width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td class="indent" width="38px"><a name="xx5147394xx"></a><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/msg_general.gif" alt="General" align="top" height="16px" width="16px"></td><td class="subject hover-container"><a class="message-link" name="5147394" parent="5146139" thread="5146112" href="http://www.codeproject.com/Messages/5147394/Re-How-can-I-use-this-to-process-multiple-input-fi.aspx">Re: How can I use this to process multiple input files?</a> <a onclick="return Pin(this);" rel="nofollow" href="#" title="Click to pin message"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/pin.png" alt="Pin" align="top" border="0" height="13px" width="13px"></a><div class="mobile-only">
	<span class="author">ArchCodeAngel</span><span class="date">22-Oct-15  0:46</span>
</div></td>
</tr>
</tbody></table></td>
</tr><tr id="F5147394_h1" class="content selected" style="display:none;">
<td class="normal" width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr valign="top">
<td class="indent align-right" style="width:38px;"><div class="voteform vertical" ownerid="645081" msgid="5147394" votingtype="GoodOrBad">

</div><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/t_002.gif" alt="" height="1px" width="38px"></td><td class="text"><table border="0" cellpadding="0" cellspacing="5px" width="100%">
<tbody><tr>
<td><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td colspan="2"><div class="parent"><a rel="nofollow" onclick="return SwitchMessage(null,5146139);" href="http://www.codeproject.com/Messages/5146139/Re-How-can-I-use-this-to-process-multiple-input-fi.aspx"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/arrow-up24.png" title="Go to Parent" style="width:16px;height:16px;border:0"></a></div>Thanks much for the quick reply!  <br>
<br>
If we don't call Prepare then the frames other than the first one won't 
get dithered, is that correct?  It's a photographer friend that needs 
this, and dithering is critical.<br>
<br>
Could I keep one IColorQuantizer around for the global color table and 
then call a prepare on a different instance for the rest of the frames 
after the first?<br>
<br>
Thanks!<br><br><div class="modified">modified  21-Oct-15 14:23pm.</div><br></td>
</tr><tr class="footer" style="vertical-align:top;">
<td><a class="new-message" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=5147394&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=r" title="Reply">Reply</a>·<wbr><a class="nav-link" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=5147394&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=e" title="Email">Email</a>·<wbr><a href="http://www.codeproject.com/KB/recipes/SimplePaletteQuantizer.aspx?display=Mobile&amp;fid=1565004&amp;df=90&amp;mpp=25&amp;sort=Position&amp;spc=Relaxed&amp;tid=5146112" title="View&nbsp;Thread">View&nbsp;Thread</a>·<wbr><a href="http://www.codeproject.com/Messages/5147394/Re-How-can-I-use-this-to-process-multiple-input-fi.aspx" title="Get permanent link">Permalink</a>·<wbr><a href="http://www.codeproject.com/script/Bookmarks/Add.aspx?obid=5147394&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small" title="Bookmark this post" onclick="return bookmarkMe(0,0,'/script/Bookmarks/Ajax/Add.aspx?obid=5147394&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small',false, this, this);">Bookmark</a></td><td style="text-align:right;"><span id="MVF5147394" data-ref="3_5147394" class="rating-label" style="white-space:nowrap;"></span></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr><tr id="F5147409_h0" class="header hover-row">
<td class="subject-line normal " width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td class="indent" width="47px"><a name="xx5147409xx"></a><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/msg_general.gif" alt="General" align="top" height="16px" width="16px"></td><td class="subject hover-container"><a class="message-link" name="5147409" parent="5147394" thread="5146112" href="http://www.codeproject.com/Messages/5147409/Re-How-can-I-use-this-to-process-multiple-input-fi.aspx">Re: How can I use this to process multiple input files?</a> <a onclick="return Pin(this);" rel="nofollow" href="#" title="Click to pin message"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/pin.png" alt="Pin" align="top" border="0" height="13px" width="13px"></a><div class="mobile-only">
	<span class="author">Smart K8</span><span class="date">22-Oct-15  1:13</span>
</div></td>
</tr>
</tbody></table></td>
</tr><tr id="F5147409_h1" class="content selected" style="display:none;">
<td class="normal" width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr valign="top">
<td class="indent align-right" style="width:47px;"><div class="voteform vertical" ownerid="1266003" msgid="5147409" votingtype="GoodOrBad">

</div><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/t_002.gif" alt="" height="1px" width="47px"></td><td class="text"><table border="0" cellpadding="0" cellspacing="5px" width="100%">
<tbody><tr>
<td><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td colspan="2"><div class="parent"><a rel="nofollow" onclick="return SwitchMessage(null,5147394);" href="http://www.codeproject.com/Messages/5147394/Re-How-can-I-use-this-to-process-multiple-input-fi.aspx"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/arrow-up24.png" title="Go to Parent" style="width:16px;height:16px;border:0"></a></div>This doesn't do dithering at all. It just scans colors and creates a palette. If you're using <code>BaseErrorDiffusionDitherers</code> then you can just call something like this:<br>
&nbsp;
<div class="pre-action-link" id="premain219464" style="width:100%;display:block;"><span id="prehide219464" onclick="processCodeBlocks.togglePre(219464);">Hide</span>  &nbsp; <span id="preShrink219464" onclick="processCodeBlocks.shrinkExpand(219464);">Shrink</span> <img id="preimg219464" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/arrow-up-16.png" style="height:16px;width:16px" onclick="processCodeBlocks.shrinkExpand(219464);">  &nbsp; <span onclick="return processCodeBlocks.copyCode(219464);">Copy Code</span></div><pre id="pre219464" style="margin-top: 0px;" lang="c#">IColorDitherer ditherer = <span class="code-keyword">new</span> FloydSteinbergDitherer();
&nbsp;
<span class="code-keyword">foreach</span> (Image sourceImage <span class="code-keyword">in</span> imageList) <span class="code-comment">//</span><span class="code-comment"> your list of images here
</span>{
   Image targetImage = <span class="code-keyword">new</span> Bitmap(sourceImage.Width, sourceImage.Height, PixelFormat.Format8bppIndexed);
   ImageBuffer.DitherImage(sourceImage, targetImage, ditherer, quantizer, <span class="code-digit">256</span>, <span class="code-digit">4</span>); 
   <span class="code-comment">//</span><span class="code-comment"> you already have a quantizer from before
</span>   <span class="code-comment">//</span><span class="code-comment"> 256 = your color count
</span>   <span class="code-comment">//</span><span class="code-comment"> 4 = parallel task count
</span>}</pre>
<br>
If you're using <code>BaseOrderedDitherers</code> then it gets more complicated. You can checkout <code>ImageBuffer.Quantize()</code> method to find out how to do it on custom basis. I think the code is commented well to figure out what's what.<br>
<br>
regards,<br>
Kate<br>
<br></td>
</tr><tr class="footer" style="vertical-align:top;">
<td><a class="new-message" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=5147409&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=r" title="Reply">Reply</a>·<wbr><a class="nav-link" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=5147409&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=e" title="Email">Email</a>·<wbr><a href="http://www.codeproject.com/KB/recipes/SimplePaletteQuantizer.aspx?display=Mobile&amp;fid=1565004&amp;df=90&amp;mpp=25&amp;sort=Position&amp;spc=Relaxed&amp;tid=5146112" title="View&nbsp;Thread">View&nbsp;Thread</a>·<wbr><a href="http://www.codeproject.com/Messages/5147409/Re-How-can-I-use-this-to-process-multiple-input-fi.aspx" title="Get permanent link">Permalink</a>·<wbr><a href="http://www.codeproject.com/script/Bookmarks/Add.aspx?obid=5147409&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small" title="Bookmark this post" onclick="return bookmarkMe(0,0,'/script/Bookmarks/Ajax/Add.aspx?obid=5147409&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small',false, this, this);">Bookmark</a></td><td style="text-align:right;"><span id="MVF5147409" data-ref="3_5147409" class="rating-label" style="white-space:nowrap;"></span></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr><tr id="F5148048_h0" class="header hover-row">
<td class="subject-line normal " width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td class="indent" width="56px"><a name="xx5148048xx"></a><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/msg_general.gif" alt="General" align="top" height="16px" width="16px"></td><td class="subject hover-container"><a class="message-link" name="5148048" parent="5147409" thread="5146112" href="http://www.codeproject.com/Messages/5148048/Re-How-can-I-use-this-to-process-multiple-input-fi.aspx">Re: How can I use this to process multiple input files?</a> <a onclick="return Pin(this);" rel="nofollow" href="#" title="Click to pin message"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/pin.png" alt="Pin" align="top" border="0" height="13px" width="13px"></a><div class="mobile-only">
	<span class="author">ArchCodeAngel</span><span class="date">23-Oct-15  2:56</span>
</div></td>
</tr>
</tbody></table></td>
</tr><tr id="F5148048_h1" class="content selected" style="display:none;">
<td class="normal" width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr valign="top">
<td class="indent align-right" style="width:56px;"><div class="voteform vertical" ownerid="645081" msgid="5148048" votingtype="GoodOrBad">

</div><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/t_002.gif" alt="" height="1px" width="56px"></td><td class="text"><table border="0" cellpadding="0" cellspacing="5px" width="100%">
<tbody><tr>
<td><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td colspan="2"><div class="parent"><a rel="nofollow" onclick="return SwitchMessage(null,5147409);" href="http://www.codeproject.com/Messages/5147409/Re-How-can-I-use-this-to-process-multiple-input-fi.aspx"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/arrow-up24.png" title="Go to Parent" style="width:16px;height:16px;border:0"></a></div>Thanks
 much Kate, you rock!  I wish I had time to go through all your code but
 have a pretty heavy time box on this app, I really appreciate it you 
making the integration easier so I can add your code quickly.<br></td>
</tr><tr class="footer" style="vertical-align:top;">
<td><a class="new-message" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=5148048&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=r" title="Reply">Reply</a>·<wbr><a class="nav-link" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=5148048&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=e" title="Email">Email</a>·<wbr><a href="http://www.codeproject.com/KB/recipes/SimplePaletteQuantizer.aspx?display=Mobile&amp;fid=1565004&amp;df=90&amp;mpp=25&amp;sort=Position&amp;spc=Relaxed&amp;tid=5146112" title="View&nbsp;Thread">View&nbsp;Thread</a>·<wbr><a href="http://www.codeproject.com/Messages/5148048/Re-How-can-I-use-this-to-process-multiple-input-fi.aspx" title="Get permanent link">Permalink</a>·<wbr><a href="http://www.codeproject.com/script/Bookmarks/Add.aspx?obid=5148048&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small" title="Bookmark this post" onclick="return bookmarkMe(0,0,'/script/Bookmarks/Ajax/Add.aspx?obid=5148048&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small',false, this, this);">Bookmark</a></td><td style="text-align:right;"><span id="MVF5148048" data-ref="3_5148048" class="rating-label" style="white-space:nowrap;"></span></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr><tr id="F4932731_h0" class="header hover-row root">
<td class="subject-line normal " width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td class="indent" width="20px"><a name="xx4932731xx"></a><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/msg_question.gif" alt="Question" align="top" height="16px" width="16px"></td><td class="subject hover-container"><a class="message-link" name="4932731" parent="0" thread="4932731" href="http://www.codeproject.com/Messages/4932731/A-job-well-done.aspx">A job well done!!</a> <a onclick="return Pin(this);" rel="nofollow" href="#" title="Click to pin message"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/pin.png" alt="Pin" align="top" border="0" height="13px" width="13px"></a><div class="mobile-only">
	<span class="author">lerwine</span><span class="date">30-Oct-14  5:27</span>
</div></td>
</tr>
</tbody></table></td>
</tr><tr id="F4932731_h1" class="content root selected" style="display:none;">
<td class="normal" width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr valign="top">
<td class="indent align-right" style="width:20px;"><div class="voteform vertical" ownerid="3524185" msgid="4932731" votingtype="GoodOrBad">

</div><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/t_002.gif" alt="" height="1px" width="20px"></td><td class="text"><table border="0" cellpadding="0" cellspacing="5px" width="100%">
<tbody><tr>
<td><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td colspan="2">I have just used code from this project and it works really well! It was very easy to convert to a class library as well.<br>
<br>
I used it in a console app from a scheduled task, and was getting 
NullReferenceException errors in the Octree quantizer. I fixed it mostly
 by using synchronized lists. I uploaded it to GitHub at <a href="https://github.com/lerwine/LTEToolkit/tree/master/SimplePaletteQuantizerModLTE">lerwine/LTEToolkit/SimplePaletteQuantizerModLTE</a>[<a href="https://github.com/lerwine/LTEToolkit/tree/master/SimplePaletteQuantizerModLTE" target="_blank" title="New Window">^</a>] if anyone's interested. (the source for the thread-safe lists are in another project in the same repository).<br></td>
</tr><tr class="footer" style="vertical-align:top;">
<td><a class="new-message" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=4932731&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=r" title="Reply">Reply</a>·<wbr><a class="nav-link" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=4932731&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=e" title="Email">Email</a>·<wbr><a href="http://www.codeproject.com/KB/recipes/SimplePaletteQuantizer.aspx?display=Mobile&amp;fid=1565004&amp;df=90&amp;mpp=25&amp;sort=Position&amp;spc=Relaxed&amp;tid=4932731" title="View&nbsp;Thread">View&nbsp;Thread</a>·<wbr><a href="http://www.codeproject.com/Messages/4932731/A-job-well-done.aspx" title="Get permanent link">Permalink</a>·<wbr><a href="http://www.codeproject.com/script/Bookmarks/Add.aspx?obid=4932731&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small" title="Bookmark this post" onclick="return bookmarkMe(0,0,'/script/Bookmarks/Ajax/Add.aspx?obid=4932731&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small',false, this, this);">Bookmark</a></td><td style="text-align:right;"><span id="MVF4932731" data-ref="3_4932731" class="rating-label" style="white-space:nowrap;"></span></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr><tr id="F4756871_h0" class="header hover-row root">
<td class="subject-line normal " width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td class="indent" width="20px"><a name="xx4756871xx"></a><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/msg_question.gif" alt="Question" align="top" height="16px" width="16px"></td><td class="subject hover-container"><a class="message-link" name="4756871" parent="0" thread="4756871" href="http://www.codeproject.com/Messages/4756871/Alpha-support.aspx">Alpha support?</a> <a onclick="return Pin(this);" rel="nofollow" href="#" title="Click to pin message"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/pin.png" alt="Pin" align="top" border="0" height="13px" width="13px"></a><div class="mobile-only">
	<span class="author">Ross Presser</span><span class="date">12-Feb-14  2:20</span>
</div></td>
</tr>
</tbody></table></td>
</tr><tr id="F4756871_h1" class="content root selected" style="display:none;">
<td class="normal" width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr valign="top">
<td class="indent align-right" style="width:20px;"><div class="voteform vertical" ownerid="166632" msgid="4756871" votingtype="GoodOrBad">

</div><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/t_002.gif" alt="" height="1px" width="20px"></td><td class="text"><table border="0" cellpadding="0" cellspacing="5px" width="100%">
<tbody><tr>
<td><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td colspan="2">I see in the changelog that alpha channel is supposed to
 be supported, but I'm having trouble figuring out the code sequence. 
When I quantize an image, the alpha is being removed. Here's my VB code,
 linked to your project:<br>
<br>
<div class="pre-action-link" id="premain745047" style="width:100%;display:block;"><span id="prehide745047" onclick="processCodeBlocks.togglePre(745047);">Hide</span>  &nbsp; <span id="preShrink745047" onclick="processCodeBlocks.shrinkExpand(745047);">Shrink</span> <img id="preimg745047" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/arrow-up-16.png" style="height:16px;width:16px" onclick="processCodeBlocks.shrinkExpand(745047);">  &nbsp; <span onclick="return processCodeBlocks.copyCode(745047);">Copy Code</span></div><pre id="pre745047" style="margin-top: 0px;" lang="vb"><span class="code-keyword">Private</span> <span class="code-keyword">Shared</span> <span class="code-keyword">Function</span> SaveQuantizedImage(imagePath <span class="code-keyword">As</span> <span class="code-keyword">String</span>) <span class="code-keyword">As</span> System.Drawing.Image
    <span class="code-keyword">Dim</span> x <span class="code-keyword">As</span> SimplePaletteQuantizer.Quantizers.IColorQuantizer
    x = <span class="code-keyword">New</span> SimplePaletteQuantizer.Quantizers.DistinctSelection.DistinctSelectionQuantizer()
    <span class="code-keyword">Dim</span> bmp = <span class="code-keyword">New</span> Bitmap(imagePath)
    <span class="code-keyword">Dim</span> ximg <span class="code-keyword">As</span> <span class="code-keyword">New</span> SimplePaletteQuantizer.Helpers.ImageBuffer(bmp, Imaging.ImageLockMode.ReadWrite)
    <span class="code-keyword">Dim</span> newimg = SimplePaletteQuantizer.Helpers.ImageBuffer.QuantizeImage(ximg, x, <span class="code-digit">256</span>, <span class="code-digit">1</span>)
    bmp.Dispose()
    newimg.Save(imagePath, Imaging.ImageFormat.Png)
    <span class="code-keyword">Return</span> newimg
<span class="code-keyword">End</span> <span class="code-keyword">Function</span></pre><br></td>
</tr><tr class="footer" style="vertical-align:top;">
<td><a class="new-message" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=4756871&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=r" title="Reply">Reply</a>·<wbr><a class="nav-link" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=4756871&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=e" title="Email">Email</a>·<wbr><a href="http://www.codeproject.com/KB/recipes/SimplePaletteQuantizer.aspx?display=Mobile&amp;fid=1565004&amp;df=90&amp;mpp=25&amp;sort=Position&amp;spc=Relaxed&amp;tid=4756871" title="View&nbsp;Thread">View&nbsp;Thread</a>·<wbr><a href="http://www.codeproject.com/Messages/4756871/Alpha-support.aspx" title="Get permanent link">Permalink</a>·<wbr><a href="http://www.codeproject.com/script/Bookmarks/Add.aspx?obid=4756871&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small" title="Bookmark this post" onclick="return bookmarkMe(0,0,'/script/Bookmarks/Ajax/Add.aspx?obid=4756871&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small',false, this, this);">Bookmark</a></td><td style="text-align:right;"><span id="MVF4756871" data-ref="3_4756871" class="rating-label" style="white-space:nowrap;"></span></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr><tr id="F4757410_h0" class="header hover-row">
<td class="subject-line normal " width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td class="indent" width="29px"><a name="xx4757410xx"></a><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/msg_answer.gif" alt="Answer" align="top" height="16px" width="16px"></td><td class="subject hover-container"><a class="message-link" name="4757410" parent="4756871" thread="4756871" href="http://www.codeproject.com/Messages/4757410/Re-Alpha-support.aspx">Re: Alpha support?</a> <a onclick="return Pin(this);" rel="nofollow" href="#" title="Click to pin message"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/pin.png" alt="Pin" align="top" border="0" height="13px" width="13px"></a><div class="mobile-only">
	<span class="author">Smart K8</span><span class="date">12-Feb-14  17:57</span>
</div></td>
</tr>
</tbody></table></td>
</tr><tr id="F4757410_h1" class="content selected" style="display:none;">
<td class="normal" width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr valign="top">
<td class="indent align-right" style="width:29px;"><div class="voteform vertical" ownerid="1266003" msgid="4757410" votingtype="GoodOrBad">

</div><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/t_002.gif" alt="" height="1px" width="29px"></td><td class="text"><table border="0" cellpadding="0" cellspacing="5px" width="100%">
<tbody><tr>
<td><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td colspan="2"><div class="parent"><a rel="nofollow" onclick="return SwitchMessage(null,4756871);" href="http://www.codeproject.com/Messages/4756871/Alpha-support.aspx"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/arrow-up24.png" title="Go to Parent" style="width:16px;height:16px;border:0"></a></div>Hi,
 there are two supported things regarding the alpha channel. One is 
alpha blending (calculating blend against a certain color of 
background), and second is taking alpha from the source image into an 
account when calculating optimal palette.<br>
<br>
What you're talking about is support for native transparency in the 
result image (PNG-8 or GIF); I presume. This is not supported. Adding 
PNG-8 transparency (tRNS chunk) is not supported in .NET (afaik). So you
 would be forced to use some library to do that. Moreover 
MakeTransparent() method has some issues with GIF. And you would have to
 do it manually as well. Those are the reasons I don't support 1-bit 
transparency in this project. <br>
<br>
But feel free to implement it. <br>
<br>
for GIF: You would have to find a color that is most similar to 
transparent and also most prevalent in the image, then choose this color
 as being one transparent color. <br>
<br>
for PNG-8: You mark palette entries below a certain alpha threshold as transparent.<br>
<br>
I found this question on how to safe transparent GIF in .NET: <br>
<br>
<a href="http://stackoverflow.com/questions/6495952/how-can-i-save-a-gif-with-a-transparent-background">http://stackoverflow.com/questions/6495952/how-can-i-save-a-gif-with-a-transparent-background</a>[<a href="http://stackoverflow.com/questions/6495952/how-can-i-save-a-gif-with-a-transparent-background" target="_blank" title="New Window">^</a>]<br>
<br>
regards,<br>
Kate<br>
<div class="signature">Wisdom is to see the things as they really are.</div><br><br><div class="modified">modified  12-Feb-14 7:45am.</div><br></td>
</tr><tr class="footer" style="vertical-align:top;">
<td><a class="new-message" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=4757410&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=r" title="Reply">Reply</a>·<wbr><a class="nav-link" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=4757410&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=e" title="Email">Email</a>·<wbr><a href="http://www.codeproject.com/KB/recipes/SimplePaletteQuantizer.aspx?display=Mobile&amp;fid=1565004&amp;df=90&amp;mpp=25&amp;sort=Position&amp;spc=Relaxed&amp;tid=4756871" title="View&nbsp;Thread">View&nbsp;Thread</a>·<wbr><a href="http://www.codeproject.com/Messages/4757410/Re-Alpha-support.aspx" title="Get permanent link">Permalink</a>·<wbr><a href="http://www.codeproject.com/script/Bookmarks/Add.aspx?obid=4757410&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small" title="Bookmark this post" onclick="return bookmarkMe(0,0,'/script/Bookmarks/Ajax/Add.aspx?obid=4757410&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small',false, this, this);">Bookmark</a></td><td style="text-align:right;"><span id="MVF4757410" data-ref="3_4757410" class="rating-label" style="white-space:nowrap;"></span></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr><tr id="F4758022_h0" class="header hover-row">
<td class="subject-line normal " width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td class="indent" width="38px"><a name="xx4758022xx"></a><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/msg_general.gif" alt="General" align="top" height="16px" width="16px"></td><td class="subject hover-container"><a class="message-link" name="4758022" parent="4757410" thread="4756871" href="http://www.codeproject.com/Messages/4758022/Re-Alpha-support.aspx">Re: Alpha support?</a> <a onclick="return Pin(this);" rel="nofollow" href="#" title="Click to pin message"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/pin.png" alt="Pin" align="top" border="0" height="13px" width="13px"></a><div class="mobile-only">
	<span class="author">Ross Presser</span><span class="date">13-Feb-14  12:14</span>
</div></td>
</tr>
</tbody></table></td>
</tr><tr id="F4758022_h1" class="content selected" style="display:none;">
<td class="normal" width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr valign="top">
<td class="indent align-right" style="width:38px;"><div class="voteform vertical" ownerid="166632" msgid="4758022" votingtype="GoodOrBad">

</div><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/t_002.gif" alt="" height="1px" width="38px"></td><td class="text"><table border="0" cellpadding="0" cellspacing="5px" width="100%">
<tbody><tr>
<td><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td colspan="2"><div class="parent"><a rel="nofollow" onclick="return SwitchMessage(null,4757410);" href="http://www.codeproject.com/Messages/4757410/Re-Alpha-support.aspx"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/arrow-up24.png" title="Go to Parent" style="width:16px;height:16px;border:0"></a></div>I do not understand you. Let me make my issue clearer.<br>
<br>
Consider <a href="http://imgur.com/nKs46Uf">this image</a>, a 32-bit RGBA PNG of a coffee cup with a white gradient set on a transparent background.  When I quantize it using <a href="http://nquant.codeplex.com/">nQuant</a>, I get an <a href="http://imgur.com/Kq1sR7l">8-bit PNG with a transparent background</a>.
  nQuant, however, produces an unsatisfactory quantized result because 
the gradient becomes banded instead of smooth. Your library produces a 
smoother quantized result, but the background becomes opaque white 
instead of transparent.<br>
<br>
nQuant returns a System.Drawing.Bitmap that can be saved out using the 
standard Bitmap.Save method, as a PNG, and the result is the 8-bit PNG I
 linked to above. No manual manipulation of the palette was necessary 
for me.<br>
<br>
I am not interested in GIF, only PNG.<br></td>
</tr><tr class="footer" style="vertical-align:top;">
<td><a class="new-message" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=4758022&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=r" title="Reply">Reply</a>·<wbr><a class="nav-link" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=4758022&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=e" title="Email">Email</a>·<wbr><a href="http://www.codeproject.com/KB/recipes/SimplePaletteQuantizer.aspx?display=Mobile&amp;fid=1565004&amp;df=90&amp;mpp=25&amp;sort=Position&amp;spc=Relaxed&amp;tid=4756871" title="View&nbsp;Thread">View&nbsp;Thread</a>·<wbr><a href="http://www.codeproject.com/Messages/4758022/Re-Alpha-support.aspx" title="Get permanent link">Permalink</a>·<wbr><a href="http://www.codeproject.com/script/Bookmarks/Add.aspx?obid=4758022&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small" title="Bookmark this post" onclick="return bookmarkMe(0,0,'/script/Bookmarks/Ajax/Add.aspx?obid=4758022&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small',false, this, this);">Bookmark</a></td><td style="text-align:right;"><span id="MVF4758022" data-ref="3_4758022" class="rating-label" style="white-space:nowrap;"></span></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr><tr id="F4758231_h0" class="header hover-row">
<td class="subject-line normal " width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td class="indent" width="47px"><a name="xx4758231xx"></a><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/msg_general.gif" alt="General" align="top" height="16px" width="16px"></td><td class="subject hover-container"><a class="message-link" name="4758231" parent="4758022" thread="4756871" href="http://www.codeproject.com/Messages/4758231/Re-Alpha-support.aspx">Re: Alpha support?</a> <a onclick="return Pin(this);" rel="nofollow" href="#" title="Click to pin message"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/pin.png" alt="Pin" align="top" border="0" height="13px" width="13px"></a><div class="mobile-only">
	<span class="author">Smart K8</span><span class="date">13-Feb-14  15:14</span>
</div></td>
</tr>
</tbody></table></td>
</tr><tr id="F4758231_h1" class="content selected" style="display:none;">
<td class="normal" width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr valign="top">
<td class="indent align-right" style="width:47px;"><div class="voteform vertical" ownerid="1266003" msgid="4758231" votingtype="GoodOrBad">

</div><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/t_002.gif" alt="" height="1px" width="47px"></td><td class="text"><table border="0" cellpadding="0" cellspacing="5px" width="100%">
<tbody><tr>
<td><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td colspan="2"><div class="parent"><a rel="nofollow" onclick="return SwitchMessage(null,4758022);" href="http://www.codeproject.com/Messages/4758022/Re-Alpha-support.aspx"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/arrow-up24.png" title="Go to Parent" style="width:16px;height:16px;border:0"></a></div>Hello again, <br>
<br>
&nbsp; the alpha channel quantization is at the cost of precious palette
 entries. It's counted as a color. The nQuant probably does that, but 
reduced quality is exactly because it allows you to quantize alpha 
component of the color. I'm not even sure how to implement it for some 
of the presented algorithms, but most of them was not build with that in
 mind (transparent output images). <br>
<br>
&nbsp; Said support for alpha channel is about supporting input images 
that contains alpha. Earlier versions (1.0 I think) didn't correctly 
processed alpha channel. Thus alpha blending was implemented to 
pre-process the pixels into a blended color (without alpha). Without the
 need to process alpha it is also sped up a notch.<br>
<br>
&nbsp; Your problem was addressed earlier in this forum. You can't have 
both for images with complex histogram: alpha channel and quality. 
Because they both compete for the same palette entries. I chose quality 
over support of alpha-channel (in the output). nQuant obviously chose 
support for alpha-channel, but this logically led to worse quality. <br>
<br>
&nbsp; This conundrum is usually solved by the web designers either by 
using directly PNG-32, or by faking the background. So the page 
background (either simple color, or even image) is included in the image
 and reduced as a whole without alpha-channel. Thus you have quality, 
small size, and also image seems like it's still transparent.<br>
<br>
&nbsp; If you still need the alpha-channel for some reason, and you 
don't want to (or are not allowed to) fake it. I would stick with 
nQuant. Even if I would implement the "alpha-channel" (transparency 
rather) support, it would affected the output anyway. So it would look 
like probably like nQuant output does. There are simply not enough 
palette entries to do both.<br>
<br>
&nbsp; If you don't mind about faking the background. There is a 
"secret" setting for color to blend against (by default it's 
SystemColors.Control a gray control color). It's a global property. You 
can set it to your background color (color of your webpage, or other 
background the image will be presented on).<br>
<br>
<div class="pre-action-link" id="premain312492" style="width:100%;display:block;"><span id="prehide312492" onclick="processCodeBlocks.togglePre(312492);">Hide</span>  &nbsp; <span id="preShrink312492" onclick="processCodeBlocks.shrinkExpand(312492);">Shrink</span> <img id="preimg312492" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/arrow-up-16.png" style="height:16px;width:16px" onclick="processCodeBlocks.shrinkExpand(312492);">  &nbsp; <span onclick="return processCodeBlocks.copyCode(312492);">Copy Code</span></div><pre id="pre312492" style="margin-top: 0px;">QuantizationHelper.BackgroundColor = Color.YourColor;</pre>
<br>
regards,<br>
Kate<br>
<div class="signature">Wisdom is to see the things as they really are.</div><br><br><div class="modified">modified  13-Feb-14 5:08am.</div><br></td>
</tr><tr class="footer" style="vertical-align:top;">
<td><a class="new-message" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=4758231&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=r" title="Reply">Reply</a>·<wbr><a class="nav-link" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=4758231&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=e" title="Email">Email</a>·<wbr><a href="http://www.codeproject.com/KB/recipes/SimplePaletteQuantizer.aspx?display=Mobile&amp;fid=1565004&amp;df=90&amp;mpp=25&amp;sort=Position&amp;spc=Relaxed&amp;tid=4756871" title="View&nbsp;Thread">View&nbsp;Thread</a>·<wbr><a href="http://www.codeproject.com/Messages/4758231/Re-Alpha-support.aspx" title="Get permanent link">Permalink</a>·<wbr><a href="http://www.codeproject.com/script/Bookmarks/Add.aspx?obid=4758231&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small" title="Bookmark this post" onclick="return bookmarkMe(0,0,'/script/Bookmarks/Ajax/Add.aspx?obid=4758231&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small',false, this, this);">Bookmark</a></td><td style="text-align:right;"><span id="MVF4758231" data-ref="3_4758231" class="rating-label" style="white-space:nowrap;"></span></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr><tr id="F4758603_h0" class="header hover-row">
<td class="subject-line normal " width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td class="indent" width="56px"><a name="xx4758603xx"></a><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/msg_general.gif" alt="General" align="top" height="16px" width="16px"></td><td class="subject hover-container"><a class="message-link" name="4758603" parent="4758231" thread="4756871" href="http://www.codeproject.com/Messages/4758603/Re-Alpha-support.aspx">Re: Alpha support?</a> <a onclick="return Pin(this);" rel="nofollow" href="#" title="Click to pin message"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/pin.png" alt="Pin" align="top" border="0" height="13px" width="13px"></a><div class="mobile-only">
	<span class="author">Ross Presser</span><span class="date">13-Feb-14  22:11</span>
</div></td>
</tr>
</tbody></table></td>
</tr><tr id="F4758603_h1" class="content selected" style="display:none;">
<td class="normal" width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr valign="top">
<td class="indent align-right" style="width:56px;"><div class="voteform vertical" ownerid="166632" msgid="4758603" votingtype="GoodOrBad">

</div><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/t_002.gif" alt="" height="1px" width="56px"></td><td class="text"><table border="0" cellpadding="0" cellspacing="5px" width="100%">
<tbody><tr>
<td><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td colspan="2"><div class="parent"><a rel="nofollow" onclick="return SwitchMessage(null,4758231);" href="http://www.codeproject.com/Messages/4758231/Re-Alpha-support.aspx"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/arrow-up24.png" title="Go to Parent" style="width:16px;height:16px;border:0"></a></div>Thanks, I understand a bit better now. Faking won't work; the PNGs are used in an interactive HTML5 app <a href="http://client.edocbuilder.com/html5plus.aspx?docCode=f8232f73-991c-4481-be6d-aa00b0c8df97&amp;docPwd=059aa19d-ad7b-47b7-ac62-3405c9da8a57&amp;postbackURL=close&amp;addToCartButton=Finished%20Editing&amp;cancelButton=Cancel%20Order&amp;approveWhenDone=true">(see a demo)</a>,
 using customer images to design a printed piece, and they really need 
transparency, because it could be literally anything under there, not 
just a solid color known in advance.<br>
<br>
For now I will stick with nQuant, and provide an option to turn off 
quantization if the person is annoyed by banding (which seems to be a 
general problem with nQuant and gradients, not just this one image). I 
still think that if I could get a dithering function inserted into 
nQuant it would be great, but oh well.<br></td>
</tr><tr class="footer" style="vertical-align:top;">
<td><a class="new-message" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=4758603&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=r" title="Reply">Reply</a>·<wbr><a class="nav-link" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=4758603&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=e" title="Email">Email</a>·<wbr><a href="http://www.codeproject.com/KB/recipes/SimplePaletteQuantizer.aspx?display=Mobile&amp;fid=1565004&amp;df=90&amp;mpp=25&amp;sort=Position&amp;spc=Relaxed&amp;tid=4756871" title="View&nbsp;Thread">View&nbsp;Thread</a>·<wbr><a href="http://www.codeproject.com/Messages/4758603/Re-Alpha-support.aspx" title="Get permanent link">Permalink</a>·<wbr><a href="http://www.codeproject.com/script/Bookmarks/Add.aspx?obid=4758603&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small" title="Bookmark this post" onclick="return bookmarkMe(0,0,'/script/Bookmarks/Ajax/Add.aspx?obid=4758603&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small',false, this, this);">Bookmark</a></td><td style="text-align:right;"><span id="MVF4758603" data-ref="3_4758603" class="rating-label" style="white-space:nowrap;"></span></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr><tr id="F4758633_h0" class="header hover-row">
<td class="subject-line normal " width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td class="indent" width="65px"><a name="xx4758633xx"></a><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/msg_general.gif" alt="General" align="top" height="16px" width="16px"></td><td class="subject hover-container"><a class="message-link" name="4758633" parent="4758603" thread="4756871" href="http://www.codeproject.com/Messages/4758633/Re-Alpha-support.aspx">Re: Alpha support?</a> <a onclick="return Pin(this);" rel="nofollow" href="#" title="Click to pin message"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/pin.png" alt="Pin" align="top" border="0" height="13px" width="13px"></a><div class="mobile-only">
	<span class="author">Smart K8</span><span class="date">13-Feb-14  23:34</span>
</div></td>
</tr>
</tbody></table></td>
</tr><tr id="F4758633_h1" class="content selected" style="display:none;">
<td class="normal" width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr valign="top">
<td class="indent align-right" style="width:65px;"><div class="voteform vertical" ownerid="1266003" msgid="4758633" votingtype="GoodOrBad">

</div><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/t_002.gif" alt="" height="1px" width="65px"></td><td class="text"><table border="0" cellpadding="0" cellspacing="5px" width="100%">
<tbody><tr>
<td><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td colspan="2"><div class="parent"><a rel="nofollow" onclick="return SwitchMessage(null,4758603);" href="http://www.codeproject.com/Messages/4758603/Re-Alpha-support.aspx"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/arrow-up24.png" title="Go to Parent" style="width:16px;height:16px;border:0"></a></div>Dithering
 would be good in this situation. I would also consider just using 
PNG-32, it spares you the pain. Unless the file size difference is 
critical for you, of course. <br>
<br>
You can also try to update my implementation of Wu's quantizer with 
nQuant's to support transparency (and also disable all the 
QuantizationHelper.ConvertAlpha conversions). Then you can use 
Floyd-Steinberg dithering in my library to have both ("smooth" gradients
 and transparency). <br>
<br>
Some of the algorithms don't support alpha by design, but I might be 
able to create optional alpha-channel support in the next version (6.0),
 but I really don't have time usually. So it might take year, or more. I
 wouldn't hold breath. <img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/smiley_smile.gif" alt="Smile | :)" align="top">  <br>
<br>
regards,<br>
Kate<br>
<div class="signature">Wisdom is to see the things as they really are.</div><br></td>
</tr><tr class="footer" style="vertical-align:top;">
<td><a class="new-message" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=4758633&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=r" title="Reply">Reply</a>·<wbr><a class="nav-link" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=4758633&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=e" title="Email">Email</a>·<wbr><a href="http://www.codeproject.com/KB/recipes/SimplePaletteQuantizer.aspx?display=Mobile&amp;fid=1565004&amp;df=90&amp;mpp=25&amp;sort=Position&amp;spc=Relaxed&amp;tid=4756871" title="View&nbsp;Thread">View&nbsp;Thread</a>·<wbr><a href="http://www.codeproject.com/Messages/4758633/Re-Alpha-support.aspx" title="Get permanent link">Permalink</a>·<wbr><a href="http://www.codeproject.com/script/Bookmarks/Add.aspx?obid=4758633&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small" title="Bookmark this post" onclick="return bookmarkMe(0,0,'/script/Bookmarks/Ajax/Add.aspx?obid=4758633&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small',false, this, this);">Bookmark</a></td><td style="text-align:right;"><span id="MVF4758633" data-ref="3_4758633" class="rating-label" style="white-space:nowrap;"></span></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr><tr id="F4698577_h0" class="header hover-row root">
<td class="subject-line normal " width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td class="indent" width="20px"><a name="xx4698577xx"></a><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/msg_question.gif" alt="Question" align="top" height="16px" width="16px"></td><td class="subject hover-container"><a class="message-link" name="4698577" parent="0" thread="4698577" href="http://www.codeproject.com/Messages/4698577/Origin-of-your-NeuQuant-implementation.aspx">Origin of your NeuQuant implementation</a> <a onclick="return Pin(this);" rel="nofollow" href="#" title="Click to pin message"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/pin.png" alt="Pin" align="top" border="0" height="13px" width="13px"></a><div class="mobile-only">
	<span class="author">wip_</span><span class="date">11-Nov-13  13:00</span>
</div></td>
</tr>
</tbody></table></td>
</tr><tr id="F4698577_h1" class="content root selected" style="display:none;">
<td class="normal" width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr valign="top">
<td class="indent align-right" style="width:20px;"><div class="voteform vertical" ownerid="5395187" msgid="4698577" votingtype="GoodOrBad">

</div><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/t_002.gif" alt="" height="1px" width="20px"></td><td class="text"><table border="0" cellpadding="0" cellspacing="5px" width="100%">
<tbody><tr>
<td><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td colspan="2">I am looking at the NeuralColorQuantizer class.<br>
Did you write it from scratch, directly implementing Anthony Dekker's <a href="http://members.ozemail.com.au/%7Edekker/NeuQuant.pdf">paper</a>? Or did you adapt his <a href="http://members.ozemail.com.au/%7Edekker/NEUQUANT.C">c source code maybe</a>?<br>
Or, another possibility, did you start from the pngnq source code <a href="https://sourceforge.net/projects/pngnqs9/files/">here</a> or <a href="https://github.com/stuart/pngnq">maybe here</a>? This last one also seems to support Alpha channel quantization.<br></td>
</tr><tr class="footer" style="vertical-align:top;">
<td><a class="new-message" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=4698577&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=r" title="Reply">Reply</a>·<wbr><a class="nav-link" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=4698577&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=e" title="Email">Email</a>·<wbr><a href="http://www.codeproject.com/KB/recipes/SimplePaletteQuantizer.aspx?display=Mobile&amp;fid=1565004&amp;df=90&amp;mpp=25&amp;sort=Position&amp;spc=Relaxed&amp;tid=4698577" title="View&nbsp;Thread">View&nbsp;Thread</a>·<wbr><a href="http://www.codeproject.com/Messages/4698577/Origin-of-your-NeuQuant-implementation.aspx" title="Get permanent link">Permalink</a>·<wbr><a href="http://www.codeproject.com/script/Bookmarks/Add.aspx?obid=4698577&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small" title="Bookmark this post" onclick="return bookmarkMe(0,0,'/script/Bookmarks/Ajax/Add.aspx?obid=4698577&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small',false, this, this);">Bookmark</a></td><td style="text-align:right;"><span id="MVF4698577" data-ref="3_4698577" class="rating-label" style="white-space:nowrap;"></span></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr><tr id="F4698614_h0" class="header hover-row">
<td class="subject-line normal " width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td class="indent" width="29px"><a name="xx4698614xx"></a><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/msg_answer.gif" alt="Answer" align="top" height="16px" width="16px"></td><td class="subject hover-container"><a class="message-link" name="4698614" parent="4698577" thread="4698577" href="http://www.codeproject.com/Messages/4698614/Re-Origin-of-your-NeuQuant-implementation.aspx">Re: Origin of your NeuQuant implementation</a> <a onclick="return Pin(this);" rel="nofollow" href="#" title="Click to pin message"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/pin.png" alt="Pin" align="top" border="0" height="13px" width="13px"></a><div class="mobile-only">
	<span class="author">Smart K8</span><span class="date">11-Nov-13  13:49</span>
</div></td>
</tr>
</tbody></table></td>
</tr><tr id="F4698614_h1" class="content selected" style="display:none;">
<td class="normal" width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr valign="top">
<td class="indent align-right" style="width:29px;"><div class="voteform vertical" ownerid="1266003" msgid="4698614" votingtype="GoodOrBad">

</div><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/t_002.gif" alt="" height="1px" width="29px"></td><td class="text"><table border="0" cellpadding="0" cellspacing="5px" width="100%">
<tbody><tr>
<td><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td colspan="2"><div class="parent"><a rel="nofollow" onclick="return SwitchMessage(null,4698577);" href="http://www.codeproject.com/Messages/4698577/Origin-of-your-NeuQuant-implementation.aspx"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/arrow-up24.png" title="Go to Parent" style="width:16px;height:16px;border:0"></a></div>Hi,
 it's been years, so I don't remember. I'm usually reading available 
documentation to "get" the algorithm. If there are sources to resolve 
some "what belongs where" moments, then I would definitely consult them,
 I guess. I'm not sure, but I would guess I didn't go for some 
derivative, but directly for original source (I'm afraid of original 
algorithm being messed up by adoption, as possibly mine is). The alpha 
channel is centralized for all the algorithms in this article. Feel free
 to modify it, if you found a better way to do it. <img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/smiley_smile.gif" alt="Smile | :)" align="top">  <br>
<br>
regards,<br>
Kate<br>
<div class="signature">Wisdom is to see the things as they really are.</div><br><br><div class="modified">modified  11-Nov-13 3:34am.</div><br></td>
</tr><tr class="footer" style="vertical-align:top;">
<td><a class="new-message" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=4698614&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=r" title="Reply">Reply</a>·<wbr><a class="nav-link" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=4698614&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=e" title="Email">Email</a>·<wbr><a href="http://www.codeproject.com/KB/recipes/SimplePaletteQuantizer.aspx?display=Mobile&amp;fid=1565004&amp;df=90&amp;mpp=25&amp;sort=Position&amp;spc=Relaxed&amp;tid=4698577" title="View&nbsp;Thread">View&nbsp;Thread</a>·<wbr><a href="http://www.codeproject.com/Messages/4698614/Re-Origin-of-your-NeuQuant-implementation.aspx" title="Get permanent link">Permalink</a>·<wbr><a href="http://www.codeproject.com/script/Bookmarks/Add.aspx?obid=4698614&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small" title="Bookmark this post" onclick="return bookmarkMe(0,0,'/script/Bookmarks/Ajax/Add.aspx?obid=4698614&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small',false, this, this);">Bookmark</a></td><td style="text-align:right;"><span id="MVF4698614" data-ref="3_4698614" class="rating-label" style="white-space:nowrap;"></span></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr><tr id="F4699477_h0" class="header hover-row">
<td class="subject-line normal " width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td class="indent" width="38px"><a name="xx4699477xx"></a><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/msg_general.gif" alt="General" align="top" height="16px" width="16px"></td><td class="subject hover-container"><a class="message-link" name="4699477" parent="4698614" thread="4698577" href="http://www.codeproject.com/Messages/4699477/Re-Origin-of-your-NeuQuant-implementation.aspx">Re: Origin of your NeuQuant implementation</a> <a onclick="return Pin(this);" rel="nofollow" href="#" title="Click to pin message"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/pin.png" alt="Pin" align="top" border="0" height="13px" width="13px"></a><div class="mobile-only">
	<span class="author">wip_</span><span class="date">12-Nov-13  6:23</span>
</div></td>
</tr>
</tbody></table></td>
</tr><tr id="F4699477_h1" class="content selected" style="display:none;">
<td class="normal" width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr valign="top">
<td class="indent align-right" style="width:38px;"><div class="voteform vertical" ownerid="5395187" msgid="4699477" votingtype="GoodOrBad">

</div><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/t_002.gif" alt="" height="1px" width="38px"></td><td class="text"><table border="0" cellpadding="0" cellspacing="5px" width="100%">
<tbody><tr>
<td><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td colspan="2"><div class="parent"><a rel="nofollow" onclick="return SwitchMessage(null,4698614);" href="http://www.codeproject.com/Messages/4698614/Re-Origin-of-your-NeuQuant-implementation.aspx"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/arrow-up24.png" title="Go to Parent" style="width:16px;height:16px;border:0"></a></div>Yes, your approach makes sense. Thanks for the feeedback  <img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/smiley_smile.gif" alt="Smile | :)" align="top"> <br></td>
</tr><tr class="footer" style="vertical-align:top;">
<td><a class="new-message" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=4699477&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=r" title="Reply">Reply</a>·<wbr><a class="nav-link" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=4699477&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=e" title="Email">Email</a>·<wbr><a href="http://www.codeproject.com/KB/recipes/SimplePaletteQuantizer.aspx?display=Mobile&amp;fid=1565004&amp;df=90&amp;mpp=25&amp;sort=Position&amp;spc=Relaxed&amp;tid=4698577" title="View&nbsp;Thread">View&nbsp;Thread</a>·<wbr><a href="http://www.codeproject.com/Messages/4699477/Re-Origin-of-your-NeuQuant-implementation.aspx" title="Get permanent link">Permalink</a>·<wbr><a href="http://www.codeproject.com/script/Bookmarks/Add.aspx?obid=4699477&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small" title="Bookmark this post" onclick="return bookmarkMe(0,0,'/script/Bookmarks/Ajax/Add.aspx?obid=4699477&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small',false, this, this);">Bookmark</a></td><td style="text-align:right;"><span id="MVF4699477" data-ref="3_4699477" class="rating-label" style="white-space:nowrap;"></span></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr><tr id="F4689243_h0" class="header hover-row root">
<td class="subject-line normal " width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td class="indent" width="20px"><a name="xx4689243xx"></a><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/msg_idea.gif" alt="Suggestion" align="top" height="16px" width="16px"></td><td class="subject hover-container"><a class="message-link" name="4689243" parent="0" thread="4689243" href="http://www.codeproject.com/Messages/4689243/List-of-other-quantization-methods.aspx">List of other quantization methods...</a> <a onclick="return Pin(this);" rel="nofollow" href="#" title="Click to pin message"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/pin.png" alt="Pin" align="top" border="0" height="13px" width="13px"></a><div class="mobile-only">
	<span class="author">wip_</span><span class="date">29-Oct-13  12:29</span>
</div></td>
</tr>
</tbody></table></td>
</tr><tr id="F4689243_h1" class="content root selected" style="display:none;">
<td class="normal" width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr valign="top">
<td class="indent align-right" style="width:20px;"><div class="voteform vertical" ownerid="5395187" msgid="4689243" votingtype="GoodOrBad">

</div><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/t_002.gif" alt="" height="1px" width="20px"></td><td class="text"><table border="0" cellpadding="0" cellspacing="5px" width="100%">
<tbody><tr>
<td><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td colspan="2">Sorry to spam your code-project's forum  <img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/smiley_biggrin.gif" alt="Big Grin | :-D" align="top">  <br>
Here are some other methods that could be implemented as well:<br>
<a href="http://github.com/jsummers/imageworsener/issues/2">http://github.com/jsummers/imageworsener/issues/2</a>[<a href="http://github.com/jsummers/imageworsener/issues/2" target="_blank" title="New Window">^</a>]<br>
<br>
Among them, those do not seem to be in Simple Palette Quantizer:<br>
<br>
Binary Split<br>
Lloyd<br>
Scolorq<br>
Dennis Lee<br>
Pairwise Nearest Neighbor<br>
<br>
I was just curious to know if you already had the opportunity to give a look at those?<br></td>
</tr><tr class="footer" style="vertical-align:top;">
<td><a class="new-message" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=4689243&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=r" title="Reply">Reply</a>·<wbr><a class="nav-link" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=4689243&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=e" title="Email">Email</a>·<wbr><a href="http://www.codeproject.com/KB/recipes/SimplePaletteQuantizer.aspx?display=Mobile&amp;fid=1565004&amp;df=90&amp;mpp=25&amp;sort=Position&amp;spc=Relaxed&amp;tid=4689243" title="View&nbsp;Thread">View&nbsp;Thread</a>·<wbr><a href="http://www.codeproject.com/Messages/4689243/List-of-other-quantization-methods.aspx" title="Get permanent link">Permalink</a>·<wbr><a href="http://www.codeproject.com/script/Bookmarks/Add.aspx?obid=4689243&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small" title="Bookmark this post" onclick="return bookmarkMe(0,0,'/script/Bookmarks/Ajax/Add.aspx?obid=4689243&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small',false, this, this);">Bookmark</a></td><td style="text-align:right;"><span id="MVF4689243" data-ref="3_4689243" class="rating-label" style="white-space:nowrap;"></span></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr><tr id="F4689482_h0" class="header hover-row">
<td class="subject-line normal " width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td class="indent" width="29px"><a name="xx4689482xx"></a><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/msg_general.gif" alt="General" align="top" height="16px" width="16px"></td><td class="subject hover-container"><a class="message-link" name="4689482" parent="4689243" thread="4689243" href="http://www.codeproject.com/Messages/4689482/Re-List-of-other-quantization-methods.aspx">Re: List of other quantization methods...</a> <a onclick="return Pin(this);" rel="nofollow" href="#" title="Click to pin message"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/pin.png" alt="Pin" align="top" border="0" height="13px" width="13px"></a><div class="mobile-only">
	<span class="author">Smart K8</span><span class="date">29-Oct-13  17:03</span>
</div></td>
</tr>
</tbody></table></td>
</tr><tr id="F4689482_h1" class="content selected" style="display:none;">
<td class="normal" width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr valign="top">
<td class="indent align-right" style="width:29px;"><div class="voteform vertical" ownerid="1266003" msgid="4689482" votingtype="GoodOrBad">

</div><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/t_002.gif" alt="" height="1px" width="29px"></td><td class="text"><table border="0" cellpadding="0" cellspacing="5px" width="100%">
<tbody><tr>
<td><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td colspan="2"><div class="parent"><a rel="nofollow" onclick="return SwitchMessage(null,4689243);" href="http://www.codeproject.com/Messages/4689243/List-of-other-quantization-methods.aspx"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/arrow-up24.png" title="Go to Parent" style="width:16px;height:16px;border:0"></a></div>I
 did check them out, when I was deciding what to include next. But it's 
all about me not having much time. I usually have time around summer 
(July <img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/smiley_smile.gif" alt="Smile | :)" align="top">
 ), or so it seems from the dates I usual post articles here. Otherwise 
than that I've included it in my next version, but as I've said it will 
take some time (probably few months to year) before I'll find some spare
 time to release new version.<br>
<br>
regards,<br>
Kate<br>
<div class="signature">Wisdom is to see the things as they really are.</div><br></td>
</tr><tr class="footer" style="vertical-align:top;">
<td><a class="new-message" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=4689482&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=r" title="Reply">Reply</a>·<wbr><a class="nav-link" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=4689482&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=e" title="Email">Email</a>·<wbr><a href="http://www.codeproject.com/KB/recipes/SimplePaletteQuantizer.aspx?display=Mobile&amp;fid=1565004&amp;df=90&amp;mpp=25&amp;sort=Position&amp;spc=Relaxed&amp;tid=4689243" title="View&nbsp;Thread">View&nbsp;Thread</a>·<wbr><a href="http://www.codeproject.com/Messages/4689482/Re-List-of-other-quantization-methods.aspx" title="Get permanent link">Permalink</a>·<wbr><a href="http://www.codeproject.com/script/Bookmarks/Add.aspx?obid=4689482&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small" title="Bookmark this post" onclick="return bookmarkMe(0,0,'/script/Bookmarks/Ajax/Add.aspx?obid=4689482&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small',false, this, this);">Bookmark</a></td><td style="text-align:right;"><span id="MVF4689482" data-ref="3_4689482" class="rating-label" style="white-space:nowrap;"></span></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr><tr id="F4689206_h0" class="header hover-row root">
<td class="subject-line normal " width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td class="indent" width="20px"><a name="xx4689206xx"></a><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/msg_question.gif" alt="Question" align="top" height="16px" width="16px"></td><td class="subject hover-container"><a class="message-link" name="4689206" parent="0" thread="4689206" href="http://www.codeproject.com/Messages/4689206/Best-dithering-method.aspx">Best dithering method?</a> <a onclick="return Pin(this);" rel="nofollow" href="#" title="Click to pin message"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/pin.png" alt="Pin" align="top" border="0" height="13px" width="13px"></a><div class="mobile-only">
	<span class="author">wip_</span><span class="date">29-Oct-13  10:30</span>
</div></td>
</tr>
</tbody></table></td>
</tr><tr id="F4689206_h1" class="content root selected" style="display:none;">
<td class="normal" width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr valign="top">
<td class="indent align-right" style="width:20px;"><div class="voteform vertical" ownerid="5395187" msgid="4689206" votingtype="GoodOrBad">

</div><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/t_002.gif" alt="" height="1px" width="20px"></td><td class="text"><table border="0" cellpadding="0" cellspacing="5px" width="100%">
<tbody><tr>
<td><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td colspan="2">From my few experiments on the Simple Palette Quantizer,
 I found that Xiaolin Wu's algorithm produce images with smaller NRMSD 
errors (and better image quality from a subjective point of view).<br>
What about the dithering method, which one did you think was giving the best image quality?<br>
Thanks for sharing your experiences!<br></td>
</tr><tr class="footer" style="vertical-align:top;">
<td><a class="new-message" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=4689206&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=r" title="Reply">Reply</a>·<wbr><a class="nav-link" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=4689206&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=e" title="Email">Email</a>·<wbr><a href="http://www.codeproject.com/KB/recipes/SimplePaletteQuantizer.aspx?display=Mobile&amp;fid=1565004&amp;df=90&amp;mpp=25&amp;sort=Position&amp;spc=Relaxed&amp;tid=4689206" title="View&nbsp;Thread">View&nbsp;Thread</a>·<wbr><a href="http://www.codeproject.com/Messages/4689206/Best-dithering-method.aspx" title="Get permanent link">Permalink</a>·<wbr><a href="http://www.codeproject.com/script/Bookmarks/Add.aspx?obid=4689206&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small" title="Bookmark this post" onclick="return bookmarkMe(0,0,'/script/Bookmarks/Ajax/Add.aspx?obid=4689206&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small',false, this, this);">Bookmark</a></td><td style="text-align:right;"><span id="MVF4689206" data-ref="3_4689206" class="rating-label" style="white-space:nowrap;"></span></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr><tr id="F4689400_h0" class="header hover-row">
<td class="subject-line normal " width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td class="indent" width="29px"><a name="xx4689400xx"></a><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/msg_answer.gif" alt="Answer" align="top" height="16px" width="16px"></td><td class="subject hover-container"><a class="message-link" name="4689400" parent="4689206" thread="4689206" href="http://www.codeproject.com/Messages/4689400/Re-Best-dithering-method.aspx">Re: Best dithering method?</a> <a onclick="return Pin(this);" rel="nofollow" href="#" title="Click to pin message"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/pin.png" alt="Pin" align="top" border="0" height="13px" width="13px"></a><div class="mobile-only">
	<span class="author">Smart K8</span><span class="date">29-Oct-13  15:37</span>
</div></td>
</tr>
</tbody></table></td>
</tr><tr id="F4689400_h1" class="content selected" style="display:none;">
<td class="normal" width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr valign="top">
<td class="indent align-right" style="width:29px;"><div class="voteform vertical" ownerid="1266003" msgid="4689400" votingtype="GoodOrBad">

</div><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/t_002.gif" alt="" height="1px" width="29px"></td><td class="text"><table border="0" cellpadding="0" cellspacing="5px" width="100%">
<tbody><tr>
<td><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td colspan="2"><div class="parent"><a rel="nofollow" onclick="return SwitchMessage(null,4689206);" href="http://www.codeproject.com/Messages/4689206/Best-dithering-method.aspx"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/arrow-up24.png" title="Go to Parent" style="width:16px;height:16px;border:0"></a></div>I
 think the Floyd-Steinberg is the most prevalent and used, I would argue
 it is one of the best dithering methods overall. But it depends on the 
source image to a large extent. But as general algorithm I would go with
 it.<br>
<br>
regards,<br>
Kate<br>
<div class="signature">Wisdom is to see the things as they really are.</div><br></td>
</tr><tr class="footer" style="vertical-align:top;">
<td><a class="new-message" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=4689400&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=r" title="Reply">Reply</a>·<wbr><a class="nav-link" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=4689400&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=e" title="Email">Email</a>·<wbr><a href="http://www.codeproject.com/KB/recipes/SimplePaletteQuantizer.aspx?display=Mobile&amp;fid=1565004&amp;df=90&amp;mpp=25&amp;sort=Position&amp;spc=Relaxed&amp;tid=4689206" title="View&nbsp;Thread">View&nbsp;Thread</a>·<wbr><a href="http://www.codeproject.com/Messages/4689400/Re-Best-dithering-method.aspx" title="Get permanent link">Permalink</a>·<wbr><a href="http://www.codeproject.com/script/Bookmarks/Add.aspx?obid=4689400&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small" title="Bookmark this post" onclick="return bookmarkMe(0,0,'/script/Bookmarks/Ajax/Add.aspx?obid=4689400&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small',false, this, this);">Bookmark</a></td><td style="text-align:right;"><span id="MVF4689400" data-ref="3_4689400" class="rating-label" style="white-space:nowrap;"></span></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr><tr id="F4689443_h0" class="header hover-row">
<td class="subject-line normal " width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td class="indent" width="38px"><a name="xx4689443xx"></a><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/msg_general.gif" alt="General" align="top" height="16px" width="16px"></td><td class="subject hover-container"><a class="message-link" name="4689443" parent="4689400" thread="4689206" href="http://www.codeproject.com/Messages/4689443/Re-Best-dithering-method.aspx">Re: Best dithering method?</a> <a onclick="return Pin(this);" rel="nofollow" href="#" title="Click to pin message"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/pin.png" alt="Pin" align="top" border="0" height="13px" width="13px"></a><div class="mobile-only">
	<span class="author">wip_</span><span class="date">29-Oct-13  16:12</span>
</div></td>
</tr>
</tbody></table></td>
</tr><tr id="F4689443_h1" class="content selected" style="display:none;">
<td class="normal" width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr valign="top">
<td class="indent align-right" style="width:38px;"><div class="voteform vertical" ownerid="5395187" msgid="4689443" votingtype="GoodOrBad">

</div><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/t_002.gif" alt="" height="1px" width="38px"></td><td class="text"><table border="0" cellpadding="0" cellspacing="5px" width="100%">
<tbody><tr>
<td><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td colspan="2"><div class="parent"><a rel="nofollow" onclick="return SwitchMessage(null,4689400);" href="http://www.codeproject.com/Messages/4689400/Re-Best-dithering-method.aspx"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/arrow-up24.png" title="Go to Parent" style="width:16px;height:16px;border:0"></a></div>Thanks
 for the advice. I found that when using dithering, the NRMSD error 
usually gets bigger, and the dithering "grid" effect is very visible in 
my test images. Anyway I will test the different methods more, thanks 
again.<br></td>
</tr><tr class="footer" style="vertical-align:top;">
<td><a class="new-message" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=4689443&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=r" title="Reply">Reply</a>·<wbr><a class="nav-link" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=4689443&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=e" title="Email">Email</a>·<wbr><a href="http://www.codeproject.com/KB/recipes/SimplePaletteQuantizer.aspx?display=Mobile&amp;fid=1565004&amp;df=90&amp;mpp=25&amp;sort=Position&amp;spc=Relaxed&amp;tid=4689206" title="View&nbsp;Thread">View&nbsp;Thread</a>·<wbr><a href="http://www.codeproject.com/Messages/4689443/Re-Best-dithering-method.aspx" title="Get permanent link">Permalink</a>·<wbr><a href="http://www.codeproject.com/script/Bookmarks/Add.aspx?obid=4689443&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small" title="Bookmark this post" onclick="return bookmarkMe(0,0,'/script/Bookmarks/Ajax/Add.aspx?obid=4689443&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small',false, this, this);">Bookmark</a></td><td style="text-align:right;"><span id="MVF4689443" data-ref="3_4689443" class="rating-label" style="white-space:nowrap;"></span></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr><tr id="F4689462_h0" class="header hover-row">
<td class="subject-line normal " width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td class="indent" width="47px"><a name="xx4689462xx"></a><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/msg_general.gif" alt="General" align="top" height="16px" width="16px"></td><td class="subject hover-container"><a class="message-link" name="4689462" parent="4689443" thread="4689206" href="http://www.codeproject.com/Messages/4689462/Re-Best-dithering-method.aspx">Re: Best dithering method?</a> <a onclick="return Pin(this);" rel="nofollow" href="#" title="Click to pin message"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/pin.png" alt="Pin" align="top" border="0" height="13px" width="13px"></a><div class="mobile-only">
	<span class="author">Smart K8</span><span class="date">29-Oct-13  16:47</span>
</div></td>
</tr>
</tbody></table></td>
</tr><tr id="F4689462_h1" class="content selected" style="display:none;">
<td class="normal" width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr valign="top">
<td class="indent align-right" style="width:47px;"><div class="voteform vertical" ownerid="1266003" msgid="4689462" votingtype="GoodOrBad">

</div><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/t_002.gif" alt="" height="1px" width="47px"></td><td class="text"><table border="0" cellpadding="0" cellspacing="5px" width="100%">
<tbody><tr>
<td><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td colspan="2"><div class="parent"><a rel="nofollow" onclick="return SwitchMessage(null,4689443);" href="http://www.codeproject.com/Messages/4689443/Re-Best-dithering-method.aspx"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/arrow-up24.png" title="Go to Parent" style="width:16px;height:16px;border:0"></a></div>Usually
 the quantization itself is enough. Dithering should only be used, when 
quantization is used to reduce to radically less colors. When it creates
 thick transition "layers" example:<br>
<br>
<a href="http://i42.tinypic.com/330civb.png">No dithering</a>[<a href="http://i42.tinypic.com/330civb.png" target="_blank" title="New Window">^</a>]<br>
<br>
These layers can then diffused by the dithering:<br>
<br>
<a href="http://i40.tinypic.com/2irvp1c.png">With dithering</a>[<a href="http://i40.tinypic.com/2irvp1c.png" target="_blank" title="New Window">^</a>]<br>
<br>
As you can see although the NRMSD is technically higher, the perceptual 
quality is better. The main reason for dithering is to make brightness 
transitions less apparent, because eye is more sensitive to these. Even 
though the math (NRSMD) tells us differently.<br>
<br>
Photoshop (for example) also uses transparency dithering to use less 
colors for actual transparency, and this increases the number of colors 
to be used on actual (opaque) parts of the image. <br>
<br>
<a href="http://i44.tinypic.com/es6b60.png">Image + transparency dithering</a>[<a href="http://i44.tinypic.com/es6b60.png" target="_blank" title="New Window">^</a>]<br>
<br>
regards,<br>
Kate<br>
<div class="signature">Wisdom is to see the things as they really are.</div><br></td>
</tr><tr class="footer" style="vertical-align:top;">
<td><a class="new-message" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=4689462&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=r" title="Reply">Reply</a>·<wbr><a class="nav-link" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=4689462&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=e" title="Email">Email</a>·<wbr><a href="http://www.codeproject.com/KB/recipes/SimplePaletteQuantizer.aspx?display=Mobile&amp;fid=1565004&amp;df=90&amp;mpp=25&amp;sort=Position&amp;spc=Relaxed&amp;tid=4689206" title="View&nbsp;Thread">View&nbsp;Thread</a>·<wbr><a href="http://www.codeproject.com/Messages/4689462/Re-Best-dithering-method.aspx" title="Get permanent link">Permalink</a>·<wbr><a href="http://www.codeproject.com/script/Bookmarks/Add.aspx?obid=4689462&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small" title="Bookmark this post" onclick="return bookmarkMe(0,0,'/script/Bookmarks/Ajax/Add.aspx?obid=4689462&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small',false, this, this);">Bookmark</a></td><td style="text-align:right;"><span id="MVF4689462" data-ref="3_4689462" class="rating-label" style="white-space:nowrap;"></span></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr><tr id="F4688421_h0" class="header hover-row root">
<td class="subject-line normal " width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td class="indent" width="20px"><a name="xx4688421xx"></a><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/msg_question.gif" alt="Question" align="top" height="16px" width="16px"></td><td class="subject hover-container"><a class="message-link" name="4688421" parent="0" thread="4688421" href="http://www.codeproject.com/Messages/4688421/Dithering-with-Wus-algorithm.aspx">Dithering with Wu's algorithm?</a> <a onclick="return Pin(this);" rel="nofollow" href="#" title="Click to pin message"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/pin.png" alt="Pin" align="top" border="0" height="13px" width="13px"></a><div class="mobile-only">
	<span class="author">wip_</span><span class="date">28-Oct-13  15:29</span>
</div></td>
</tr>
</tbody></table></td>
</tr><tr id="F4688421_h1" class="content root selected" style="display:none;">
<td class="normal" width="100%"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr valign="top">
<td class="indent align-right" style="width:20px;"><div class="voteform vertical" ownerid="5395187" msgid="4688421" votingtype="GoodOrBad">

</div><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/t_002.gif" alt="" height="1px" width="20px"></td><td class="text"><table border="0" cellpadding="0" cellspacing="5px" width="100%">
<tbody><tr>
<td><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><tr>
<td colspan="2">Why cannot we select a Ditherer when when choose Wu's color quantizer as a quantizing method?<br>
Is it a limitation inherent to Wu's algorithm?<br></td>
</tr><tr class="footer" style="vertical-align:top;">
<td><a class="new-message" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=4688421&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=r" title="Reply">Reply</a>·<wbr><a class="nav-link" href="http://www.codeproject.com/script/Forums/Edit.aspx?fid=1565004&amp;select=4688421&amp;floc=/KB/recipes/SimplePaletteQuantizer.aspx&amp;action=e" title="Email">Email</a>·<wbr><a href="http://www.codeproject.com/KB/recipes/SimplePaletteQuantizer.aspx?display=Mobile&amp;fid=1565004&amp;df=90&amp;mpp=25&amp;sort=Position&amp;spc=Relaxed&amp;tid=4688421" title="View&nbsp;Thread">View&nbsp;Thread</a>·<wbr><a href="http://www.codeproject.com/Messages/4688421/Dithering-with-Wus-algorithm.aspx" title="Get permanent link">Permalink</a>·<wbr><a href="http://www.codeproject.com/script/Bookmarks/Add.aspx?obid=4688421&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small" title="Bookmark this post" onclick="return bookmarkMe(0,0,'/script/Bookmarks/Ajax/Add.aspx?obid=4688421&amp;obtid=3&amp;action=AddBookmark&amp;bio=false&amp;bis=small',false, this, this);">Bookmark</a></td><td style="text-align:right;"><span id="MVF4688421" data-ref="3_4688421" class="rating-label" style="white-space:nowrap;"></span></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table></td>
</tr><tr>
<td><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/t_002.gif" alt="" border="0" height="5px" width="1px"></td>
</tr><tr>
<td><table cellpadding="2px" cellspacing="0" width="100%">
<tbody><tr class="footer">
<td><span class="last-visit desktop-only tablet-only"></span></td><td><a rel="nofollow" href="http://www.codeproject.com/KB/recipes/SimplePaletteQuantizer.aspx?display=Mobile&amp;fid=1565004&amp;df=90&amp;mpp=25&amp;prof=False&amp;sort=Position&amp;view=Normal&amp;spc=Relaxed">Refresh</a></td><td style="text-align:right;white-space:nowrap;"><input id="_mbnUrl" value="/KB/recipes/SimplePaletteQuantizer.aspx?display=Mobile&amp;fid=1565004&amp;df=90&amp;mpp=25&amp;prof=False&amp;sort=Position&amp;view=Normal&amp;spc=Relaxed&amp;fr=26" type="hidden"><span class="nav-link selected">1</span><a class="nav-link" name="Frm_HoverNL" href="http://www.codeproject.com/KB/recipes/SimplePaletteQuantizer.aspx?display=Mobile&amp;fid=1565004&amp;df=90&amp;mpp=25&amp;prof=False&amp;sort=Position&amp;view=Normal&amp;spc=Relaxed&amp;fr=26#xx0xx">2</a><a class="nav-link" name="Frm_HoverNL" href="http://www.codeproject.com/KB/recipes/SimplePaletteQuantizer.aspx?display=Mobile&amp;fid=1565004&amp;df=90&amp;mpp=25&amp;prof=False&amp;sort=Position&amp;view=Normal&amp;spc=Relaxed&amp;fr=51#xx0xx">3</a><a class="nav-link" name="Frm_HoverNL" href="http://www.codeproject.com/KB/recipes/SimplePaletteQuantizer.aspx?display=Mobile&amp;fid=1565004&amp;df=90&amp;mpp=25&amp;prof=False&amp;sort=Position&amp;view=Normal&amp;spc=Relaxed&amp;fr=76#xx0xx">4</a><a class="nav-link" name="Frm_HoverNL" href="http://www.codeproject.com/KB/recipes/SimplePaletteQuantizer.aspx?display=Mobile&amp;fid=1565004&amp;df=90&amp;mpp=25&amp;prof=False&amp;sort=Position&amp;view=Normal&amp;spc=Relaxed&amp;fr=101#xx0xx">5</a><a class="nav-link" name="Frm_HoverNL" href="http://www.codeproject.com/KB/recipes/SimplePaletteQuantizer.aspx?display=Mobile&amp;fid=1565004&amp;df=90&amp;mpp=25&amp;prof=False&amp;sort=Position&amp;view=Normal&amp;spc=Relaxed&amp;fr=126#xx0xx">6</a> <a class="nav-link" name="Frm_HoverNL" href="http://www.codeproject.com/KB/recipes/SimplePaletteQuantizer.aspx?display=Mobile&amp;fid=1565004&amp;df=90&amp;mpp=25&amp;prof=False&amp;sort=Position&amp;view=Normal&amp;spc=Relaxed&amp;fr=26#xx0xx">Next »</a></td>
</tr>
</tbody></table></td>
</tr>
</tbody></table>
</div>
				

			</div>
			
		</td>
		<td class="article-wing-right" width="170px">
			<div id="ctl00_RightSideBar" class="container-article-info">

                <div style="position: fixed; top: 10px; left: 1023.5px;" id="RHSticky" class="container-article-info-sticky stuck">
        			


<div class="article-summary">

    


    

    

    
</div>

				    

				    <div style="width:160px;margin: 10px auto;">
					    <div class="msg-160x600" data-format="160x600" data-type="ad" data-publisher="lqm.codeproject.site" data-zone="General-Programming/Algorithms-Recipes/Algorithms" data-country="IN" data-tags="C#3.0, .NET3.5, VS2008, C#, Windows, .NET, Visual-Studio, Dev, Beginner, Intermediate,rating4.5"><div id="div-gpt-ad-lqm.codeproject.site/general-programming/algorithms-recipes/algorithms-4" style="height: 600px; width: 160px; box-sizing: border-box; border: 0px none; font-size: 0px;"><div style="border: 0pt none;" id="google_ads_iframe_/6839/lqm.codeproject.site/general-programming/algorithms-recipes/algorithms_1__container__"><iframe src="javascript:&quot;<html><body style='background:transparent'></body></html>&quot;" style="border: 0px none; vertical-align: bottom;" marginheight="0" marginwidth="0" scrolling="no" name="google_ads_iframe_/6839/lqm.codeproject.site/general-programming/algorithms-recipes/algorithms_1" title="3rd party ad content" id="google_ads_iframe_/6839/lqm.codeproject.site/general-programming/algorithms-recipes/algorithms_1" frameborder="0" height="600" width="160"></iframe></div><iframe src="javascript:&quot;<html><body style='background:transparent'></body></html>&quot;" style="border: 0px none; vertical-align: bottom; visibility: hidden; display: none;" marginheight="0" marginwidth="0" scrolling="no" name="google_ads_iframe_/6839/lqm.codeproject.site/general-programming/algorithms-recipes/algorithms_1__hidden__" title="" id="google_ads_iframe_/6839/lqm.codeproject.site/general-programming/algorithms-recipes/algorithms_1__hidden__" frameborder="0" height="0" width="0"></iframe></div></div>
				    </div>

                    

				    

				    

				    

                    <div class="anchorLink gototop" id="gototop">
                        <a id="ctl00_GoToTop" href="http://www.codeproject.com/KB/recipes/SimplePaletteQuantizer.aspx?display=Mobile#_articleTop">Go to top</a>
                    </div>

				</div>

			</div>
		</td>
		</tr></tbody></table>

		
		<div class="theme1-background" style="height:2px" id="stickyStop"></div>

		<div class="extended tiny-text">
			<div class="row">
				<div class="float-left">
					<a id="ctl00_PermaLink" itemprop="url" href="http://www.codeproject.com/Articles/66341/A-Simple-Yet-Quite-Powerful-Palette-Quantizer-in-C">Permalink</a> | 
					<a id="ctl00_AdvertiseLink" href="http://developermedia.com/">Advertise </a> |
					<a id="ctl00_PrivacyLink" href="http://www.codeproject.com/info/privacy.aspx">Privacy</a> |
                    <a id="ctl00_TermsOfUseLink" href="http://www.codeproject.com/info/TermsOfUse.aspx">Terms of Use</a> |
					<a id="ctl00_Mobile">Mobile</a>
					<br>
								
					
					Web02 |
					2.8.160406.2 |
					Last Updated 28 Jul 2012								
				</div>

                <div id="ctl00_GoogleTranslate" class="translate float-left"><div style="" dir="ltr" class="skiptranslate goog-te-gadget"><div class="goog-te-gadget-simple" style="white-space: nowrap;" id=":0.targetLanguage"><img style="background-image: url(&quot;https://translate.googleapis.com/translate_static/img/te_ctrl3.gif&quot;); background-position: -65px 0px;" class="goog-te-gadget-icon" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/cleardot.gif"><span style="vertical-align: middle;"><a href="javascript:void(0)" class="goog-te-menu-value"><span>Select Language</span><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/cleardot.gif" height="1" width="1"><span style="border-left: 1px solid rgb(187, 187, 187);">​</span><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/cleardot.gif" height="1" width="1"><span style="color: rgb(155, 155, 155);">▼</span></a></span></div></div></div>      

				<div class="float-right align-right">
					Article Copyright 2010 by Smart K8<br>Everything else
					Copyright © <a href="mailto:webmaster@codeproject.com">CodeProject</a>, 1999-2016 <br>
				</div>

				

			</div>
		</div>
		

		<br clear="all">
		
			

	</div> 
	</div>
</div>


<img id="ctl00_Audience" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/DFPAudiencePixel.gif" style="border-width:0px;height:1px;width:1px;">



<script type="text/javascript" language="Javascript" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/jquery.js"></script><script type="text/javascript">//<![CDATA[
if (typeof jQuery == 'undefined') {
    document.write(unescape("%3Cscript src='/script/JS/jquery-1.6.2.min.js' type='text/javascript' %3E%3C/script%3E"));
}//]]></script>
<script type="text/javascript" language="Javascript" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/article.js"></script>
<script type="text/javascript" language="Javascript" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/element.js"></script>
<script type="text/javascript" language="Javascript" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/navbar.js"></script>
<script type="text/javascript" language="Javascript" src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/Notifications.js"></script>
<script type="text/javascript" language="Javascript">//<![CDATA[
$(document).ready(function () { processCodeBlocks.Initialise('#contentdiv'); });
function googleTranslateElementInit() {  new google.translate.TranslateElement({   pageLanguage: 'en',   layout: google.translate.TranslateElement.InlineLayout.SIMPLE,   autoDisplay: false,   gaTrack: true,   gaId: 'UA-1735123-1'},  'ctl00_GoogleTranslate');}
$(document).ready(function() { anchorAnimate();
$('#RHSticky').sticky($('#stickyStop'));
$('#ctl00_Nav').sticky($('#stickyStop'));
});
var notificationAlert = new NotificationAlert('ctl00_MemberMenu_Messages_NotificationCount','Notifications','/script/Membership/Ajax/NotificationList.aspx');
notificationAlert.initialise();
var oSrchFlt = false, oSrchBox=false,srchBoxFoc=false;
$(document).ready(function() {
 if(InitWatermark)InitWatermark('sb_tb', 'Search for articles, questions, tips');
 var sbar = $('#sb_tb'); 
 var sfilter = $('#SearchFilter');
 if (sbar && sfilter) {
  sfilter.removeClass('popup'); sfilter.hide(); sfilter.removeClass('open');
  sbar.blur(function() {
 if (!oSrchFlt) {sfilter.hide(); sfilter.removeClass('open');}
 srchBoxFoc=false;
 });
  sbar.focus(function() {
 oSrchFlt=false; srchBoxFoc=true;
 sfilter.show(); sfilter.addClass('open');
 });
  sbar.mouseleave(function() { oSrchBox=false; });
  sbar.mouseover(function() { oSrchBox=true; });
  sfilter.mouseleave(function() { oSrchFlt=false; if (!srchBoxFoc&&!oSrchBox) { sfilter.hide(); sfilter.removeClass('open'); }});
  sfilter.mouseover(function() { oSrchFlt=true; });
 }
});
$('#clear-rate_ctl00_RateArticle_RCD').click(function () {    $('#ctl00_RateArticle_RCD').hide(); return false;});$("#ctl00_RateArticle_RateItemWrapper")   .removeClass("container-rating")   .hover( function() { $('#ctl00_RateArticle_RCD').fadeIn('fast'); },            function() { $('#ctl00_RateArticle_RCD').fadeOut('fast'); } );
function PostBack_ctl00_RateArticle_RateItemWrapper() {
  return rateItem(66341,2,1,true,true,0,'LargeStars');
}

                        function getVotesHistogram(objectId, objectTypeId, containerId, loadingId) {
                            if (!$('#' + containerId).attr('alreadyRequested')){
                                $.ajax({
                                    url: '/script/Ratings/Ajax/Histogram.aspx?obid=' + objectId + '&obtid='+objectTypeId,
                                    success: function (data) {
                                        $('#' + containerId).html(data);
                                        $('#' + loadingId).hide();
                                    }
                                });
                                $('#' + containerId).attr('alreadyRequested', 'true');
                            }
                        }
$(document).ready(function() {   new starRating('#ctl00_RateArticle_VoteFormDiv', PostBack_ctl00_RateArticle_RateItemWrapper,'ctl00_RateArticle');
  $('#ctl00_RateArticle_RB').mouseenter(function() {     getVotesHistogram(66341,2   ,'ctl00_RateArticle_Histogram','ctl00_RateArticle_Loading');  })})
$(document).ready(function() { $('#ctl00_RateArticle_SubmitRateBtn').hide(); });
$(document).ready(function() { $('#ctl00_RateArticle_SubmitRateBtn').hide(); });function ChkRtctl00_RateArticle(val) {}

forumDir = '/script/Forums/';
allowReporting = false;
allowRating = false;
allowRatingDisplay = true;
var smoothScroll = false;
Selected        = -1;
oldTitle        = document.title;
minMessageScore = 1;
minMessageScore = 5;
abuseScore      = -2;
spamScore       = -1;
getRatingUrl    = '/script/Ratings/Ajax/GetRatings.aspx';
getRatingRefKey = 'obrs';


//]]>
</script>



<canvas id="cv1" width="1px" height="1px" style="position:absolute;left:0;top:0;pointer-events:none"></canvas><div id="goog-gt-tt" class="skiptranslate" dir="ltr"><div style="padding: 8px;"><div><div class="logo"><img src="A%20Simple%20-%20Yet%20Quite%20Powerful%20-%20Palette%20Quantizer%20in%20C%23%20-%20CodeProject_files/translate_24dp.png" height="20" width="20"></div></div></div><div class="top" style="padding: 8px; float: left; width: 100%;"><h1 class="title gray">Original text</h1></div><div class="middle" style="padding: 8px;"><div class="original-text"></div></div><div class="bottom" style="padding: 8px;"><div class="activity-links"><span class="activity-link">Contribute a better translation</span><span class="activity-link"></span></div><div class="started-activity-container"><hr style="color: #CCC; background-color: #CCC; height: 1px; border: none;"><div class="activity-root"></div></div></div><div style="display: none;" class="status-message"></div></div><canvas id="cv2" width="1px" height="1px" style="position:absolute;left:0;top:0;pointer-events:none"></canvas><iframe style="visibility: visible; box-sizing: content-box; width: 1004px; height: 285px; display: none;" class="goog-te-menu-frame skiptranslate" frameborder="0"></iframe><iframe style="display: none; width: 0px; height: 0px;" name="google_osd_static_frame" id="google_osd_static_frame_6410071126441"></iframe></body></html>